import{c as u,r as c,j as e,b as m,u as g,a as h}from"./index-BIIL7VVf.js";import{g as b}from"./batchAPI-DA6bdFLf.js";import{u as f,P as y}from"./Pagination-D0MucXAQ.js";import{f as j,g as N}from"./dateUtils-lVKvXNql.js";import{g as v,i as w,H as k,P as p}from"./Header-Dr5R5qW5.js";import{L as P}from"./List-CH4oabYR.js";import{H as C}from"./heart-plus-ecbcs1qE.js";import{F as I}from"./folder-CS-JJ-Ph.js";import"./pdfjs-DdtK18WL.js";import"./apiClient-C4E4e5VJ.js";import"./index-C0RmN517.js";import"./genericApi-Cv9PbjaR.js";/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],H=u("activity",_);function E({fetchData:a,emptyMessage:d="Tidak ada riwayat",onItemClick:s}){const[o,i]=c.useState([]),[r,t]=c.useState(!0);return c.useEffect(()=>{(async()=>{try{const l=await a();i(l)}catch(l){console.error("Failed to load history:",l)}finally{t(!1)}})()},[a]),r?e.jsx(m,{}):e.jsx(P,{items:o,emptyMessage:d,onItemClick:s})}function L(){const a=g(),d=async()=>{const o=(await v()).data.batches,i=Array.isArray(o)?o:Object.values(o);return console.log(i),i.filter(r=>typeof r.examination=="object").map(r=>{const t=r.examination;return{id:t.id,batchId:r.id,title:typeof t.mcu_package=="string"?t.mcu_package:t.mcu_package.name||"MCU Event",timestamp:j(r.exam_date),icon:e.jsx(C,{size:20}),titleClassName:typeof t.mcu_package=="string"&&t.mcu_package==="Paket Belum Ditentukan"?"text-red-500":"",badge:w(t.result)?e.jsx("span",{className:"badge bg-primary/20 text-base-content text-xs p-0",children:"Hasil tersedia"}):void 0}})};return e.jsx(E,{fetchData:d,emptyMessage:"Belum ada riwayat MCU",onItemClick:s=>s.batchId?a(`/dashboard/batch/${s.batchId}/examination/${s.id}`):a(`/examinations/${s.id}`)})}function O(){const{user:a}=h(),d=g(),{data:s,loading:o,error:i,page:r,lastPage:t,total:x,handlePageChange:l}=f({queryFn:b,defaultParams:{}});return a?e.jsxs("div",{className:"bg-base-100 text-base-content p-6 space-y-6",children:[e.jsx(k,{greeting:"Selamat Datang,",name:a.name,icon:H}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6",children:[a.role==="Company PIC"&&e.jsxs("div",{className:"bg-base-100 border-2 border-dashed border-primary/50 rounded-2xl p-6 shadow-md w-full",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2 text-base-content",children:[e.jsx(p,{className:"w-6 h-6 text-primary"}),"Batch MCU"]}),o&&e.jsx(m,{}),i&&e.jsx("p",{className:"text-error text-center",children:i}),!o&&!i&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:s.map(n=>e.jsxs("div",{className:"group flex flex-col items-center justify-center p-4 rounded-xl cursor-pointer bg-base-100 hover:bg-primary hover:text-primary-content shadow-sm transition-all duration-200 tooltip tooltip-bottom","data-tip":`${N(n.exam_date)} | ${n.location}`,onClick:()=>d(`/dashboard/batch/${n.id}`),children:[e.jsx(I,{className:"w-12 h-12 text-yellow-400 group-hover:text-yellow-100 transition-colors"}),e.jsx("span",{className:"mt-2 text-sm text-center font-medium truncate w-full transition-colors",title:n.batch_code,children:n.batch_code})]},n.id))}),e.jsx(y,{page:r,lastPage:t,onPageChange:l,total:x})]}),a.role==="Employee"&&e.jsxs("div",{className:"bg-base-100 border-2 border-dashed border-primary/50 rounded-2xl p-6 shadow-md w-full",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2 text-base-content",children:[e.jsx(p,{className:"w-6 h-6 text-primary"}),"Medical Check-Up"]}),e.jsx(L,{})]}),a.role!=="Company PIC"&&a.role!=="Employee"&&e.jsx("div",{className:"bg-error/10 border-2 border-dashed border-error rounded-2xl p-6 shadow-md w-full text-center",children:e.jsx("h2",{className:"text-xl font-semibold text-error",children:"Anda tidak memiliki akses"})})]})]}):e.jsx(m,{})}export{O as default};
