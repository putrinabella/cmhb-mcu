import{u as l,a as u,s as i,j as s}from"./index-DBCl1piy.js";import{l as p,A as c,F as g}from"./authService-cyRsW18N.js";import{B as d}from"./button-DOBZ2I0b.js";import{E as k}from"./EmailField-DmsIy3Lv.js";import{P as h}from"./PasswordField-DwSObI-P.js";import"./pdfjs-BzSgQdvw.js";import"./apiClient-BmXS3_vS.js";import"./index-NIGUFBhG.js";import"./mail-BWWQdC_H.js";function f(){const n=l(),{login:o,setToken:a}=u();return{loginUser:async(r,m)=>{try{const e=await p(r,m);if(e.token){const t={id:e.user.id,email:e.user.email,token:e.token,name:e.user.name,position:e.user.position,department:e.user.department,phone_number:e.user.phone_number,role:"Company PIC",company:e.user.company_id?{id:e.user.company_id,name:e.user.company_name}:null};o(e.token,t),a(e.token),i({title:"Login Berhasil",text:"Selamat datang kembali!",icon:"success",timer:1e3,showConfirmButton:!1,onClose:()=>n("/")})}else console.warn("Token tidak ditemukan")}catch(e){let t=e?.meta?.message||e?.message||"Terjadi kesalahan";t=t.replace(/^Login Gagal\s*/,""),i({title:"Login Gagal",text:t,icon:"error"})}}}}function F(){const{loginUser:n}=f(),o=a=>n(a.email,a.password);return s.jsx(c,{title:"Login",subtitle:"Masukkan email dan kata sandi untuk masuk.",children:s.jsx(g,{defaultValues:{email:"testingpic@gmail.com",password:"Testingpic@12"},onSubmit:o,children:({control:a})=>s.jsxs("div",{className:"space-y-4",children:[s.jsx(k,{control:a}),s.jsx(h,{control:a}),s.jsx(d,{type:"submit",className:"w-full bg-primary text-primary-content hover:bg-primary-focus",children:"Masuk"})]})})})}export{F as default};
