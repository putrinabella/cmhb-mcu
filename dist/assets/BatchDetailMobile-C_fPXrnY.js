import{g as p,j as e,H as b,s as x}from"./index-BIIL7VVf.js";import{u as h,f as u,C as j,a as f}from"./use-examination-access-_sAT3Rl3.js";import{g}from"./dateUtils-lVKvXNql.js";import{F as N}from"./fingerprint-C0qeCUNx.js";import{I as y}from"./id-card-C3Tk8csT.js";import{C as k}from"./calendar-BRCx1wEa.js";import{P as v}from"./phone-S_0D9Tnl.js";import"./pdfjs-DdtK18WL.js";import"./apiClient-C4E4e5VJ.js";import"./index-C0RmN517.js";function D({examinations:t}){const{id:r}=p(),l=t.map(s=>({id:s.id,isVisibleToEmployee:s.is_visible_to_employee===1||s.isVisibleToEmployee===1})),{accessState:i,toggleAccess:c,loadingIds:d}=h(l),o=s=>{if(!r){x({icon:"error",title:"Error",text:"Batch ID tidak ditemukan"});return}const n=`/dashboard/batch/${r}/examination/${s}`;window.open(n,"_blank")};return!t||t.length===0?e.jsx("p",{className:"p-4 text-center text-base-content",children:"Tidak ada data pemeriksaan."}):e.jsx("div",{className:"block md:hidden space-y-3 py-4",children:t.map((s,n)=>{const a=s.company_employee,m=typeof s.result=="object"&&s.result!==null&&"id"in s.result?s.result:null;return e.jsxs("div",{className:"rounded-2xl border border-base-300 shadow-sm bg-base-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-primary/20 px-3 py-2",children:[e.jsxs("h2",{className:"font-semibold text-base text-base-content",children:[n+1,". ",a?.name||"-"]}),e.jsxs("p",{className:"text-xs text-base-content/70 mt-0.5",children:[a?.gender||"-"," â€¢ ",a?.age_detail||"-"]})]}),e.jsxs("div",{className:"p-3 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center text-base-content",children:[e.jsx(N,{size:16,className:"mr-2 text-primary"}),e.jsxs("span",{children:["NIK: ",a?.nik||"-"]})]}),e.jsxs("div",{className:"flex items-center text-base-content",children:[e.jsx(y,{size:16,className:"mr-2 text-primary"}),e.jsxs("span",{children:["No Peg: ",a?.employee_number||"-"]})]}),e.jsxs("div",{className:"flex items-center text-base-content",children:[e.jsx(k,{size:16,className:"mr-2 text-primary"}),e.jsxs("span",{children:["Lahir:"," ",a?.dob?g(a.dob):"-"]})]}),e.jsxs("div",{className:"flex items-center text-base-content",children:[e.jsx(v,{size:16,className:"mr-2 text-primary"}),a?.phone_number?e.jsx("a",{href:u(a.phone_number),target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:a.phone_number}):e.jsx("span",{children:"-"})]}),e.jsx("hr",{className:"border-base-300"}),e.jsxs("div",{className:"flex items-start text-base-content",children:[e.jsx(b,{size:16,className:"mr-2 mt-0.5 text-primary flex-shrink-0"}),e.jsx("span",{className:`break-words leading-tight ${s.mcu_package?.name?"":"text-red-600 font-bold"}`,children:s.mcu_package?.name||"Paket MCU Belum Ditentukan"})]}),s.notes&&e.jsxs("p",{className:"text-xs italic text-base-content/70 ps-6",children:["Catatan: ",s.notes]}),e.jsx("div",{className:"mt-2",children:m?e.jsx("button",{className:"btn btn-sm w-full rounded-full text-base-content bg-primary/20",onClick:()=>o(s.id),children:"Lihat Hasil"}):e.jsx("button",{className:"btn btn-sm w-full rounded-full text-base-content bg-secondary/5",children:"Belum ada hasil"})}),e.jsx("div",{className:"mt-2",children:e.jsx("button",{className:`btn btn-sm flex items-center gap-2 w-full rounded-full text-base-content ${i[s.id]?"bg-primary/20":"bg-secondary/5"}`,disabled:d.has(s.id),onClick:()=>c(s.id),children:i[s.id]?e.jsxs(e.Fragment,{children:[e.jsx(j,{size:16})," Hasil dapat diakses pegawai"]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{size:16})," Hasil tidak dapat diakses pegawai"]})})})]})]},s.id)})})}export{D as default};
