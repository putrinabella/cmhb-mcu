import{c as N,j as r,l as A,g as G,r as k,b as W,U as Y}from"./index-BIIL7VVf.js";import{a as X,r as J}from"./pdfjs-DdtK18WL.js";import{D as Q}from"./download-opCvTTK7.js";import{H as ee,P as U,a as te,b as ne,d as re}from"./Header-Dr5R5qW5.js";import{g as oe}from"./dateUtils-lVKvXNql.js";import{H as ae}from"./heart-plus-ecbcs1qE.js";import{I as ce}from"./id-card-C3Tk8csT.js";import{F as se}from"./fingerprint-C0qeCUNx.js";import"./apiClient-C4E4e5VJ.js";import"./index-C0RmN517.js";/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],le=N("calendar-days",ie);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"m21 3-6.75 6.75",key:"pv0uzu"}],["circle",{cx:"10",cy:"14",r:"6",key:"1qwbdc"}]],ue=N("mars",me);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M5 12h14",key:"1ays0h"}]],pe=N("minus",de);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],he=N("plus",fe);/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M9 19h6",key:"456am0"}],["circle",{cx:"12",cy:"9",r:"6",key:"1nw4tq"}]],be=N("venus",xe);var O={exports:{}},_={},F;function ge(){if(F)return _;F=1;var c=X();function m(t){var a=Object.create(null);return t&&Object.keys(t).forEach((function(n){if(n!=="default"){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(a,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}})),a.default=t,Object.freeze(a)}var e=m(J()),x=function(){return e.createElement(c.Icon,{ignoreDirection:!0,size:16},e.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10
            M10.5,5.499v10`}))},j=function(){return e.createElement(c.Icon,{ignoreDirection:!0,size:16},e.createElement("path",{d:`M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z
            M23.5,23.499
            l-5.929-5.929
            M5.5,10.499h10`}))},d=function(){return d=Object.assign||function(t){for(var a,n=1,i=arguments.length;n<i;n++)for(var l in a=arguments[n])Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l]);return t},d.apply(this,arguments)},g=function(t){var a=e.useState(t.get("scale")||0),n=a[0],i=a[1],l=function(o){i(o)};return e.useEffect((function(){return t.subscribe("scale",l),function(){t.unsubscribe("scale",l)}}),[]),{scale:n}},v=function(t){var a=t.children,n=t.store;return(a||function(i){return e.createElement(e.Fragment,null,"".concat(Math.round(100*i.scale),"%"))})({scale:g(n).scale})},f={passive:!1},h=null,S=function(t){var a=t.pagesContainerRef,n=t.store,i=c.useDebounceCallback((function(o){var s=n.get("zoom");s&&s(o)}),40),l=function(o){if(o.ctrlKey){o.preventDefault();var s=o.target.getBoundingClientRect(),u=1-o.deltaY/100,p=o.clientX-s.left,y=o.clientY-s.top,M=n.get("scale"),Z=(h||(h=document.createElementNS("http://www.w3.org/2000/svg","svg"))).createSVGMatrix().translate(p,y).scale(u).translate(-p,-y).scale(M);i(Z.a)}};return c.useIsomorphicLayoutEffect((function(){var o=a.current;if(o)return o.addEventListener("wheel",l,f),function(){o.removeEventListener("wheel",l)}}),[]),e.createElement(e.Fragment,null)},z=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],L=function(t){return z.find((function(a){return a>t}))||t},b=function(t){var a=z.findIndex((function(n){return n>=t}));return a===-1||a===0?t:z[a-1]},R=function(t){var a=t.containerRef,n=t.store,i=function(l){if(!l.shiftKey&&!l.altKey&&(c.isMac()?l.metaKey:l.ctrlKey)){var o=a.current;if(o&&document.activeElement&&o.contains(document.activeElement)){var s=n.get("zoom");if(s){var u=n.get("scale")||1,p=1;switch(l.key){case"-":p=b(u);break;case"=":p=L(u);break;case"0":p=1;break;default:p=u}p!==u&&(l.preventDefault(),s(p))}}}};return e.useEffect((function(){if(a.current)return document.addEventListener("keydown",i),function(){document.removeEventListener("keydown",i)}}),[a.current]),e.createElement(e.Fragment,null)},E=[.5,.75,1,1.25,1.5,2,3,4],C={left:0,top:8},w=function(t){var a=t.levels,n=a===void 0?E:a,i=t.scale,l=t.onZoom,o=e.useContext(c.LocalizationContext).l10n,s=e.useContext(c.ThemeContext).direction===c.TextDirection.RightToLeft,u=o&&o.zoom?o.zoom.zoomDocument:"Zoom document";return e.createElement(c.Popover,{ariaControlsSuffix:"zoom",ariaHasPopup:"menu",position:c.Position.BottomCenter,target:function(p){return e.createElement(c.MinimalButton,{ariaLabel:u,testId:"zoom__popover-target",onClick:function(){p()}},e.createElement("span",{className:"rpv-zoom__popover-target"},e.createElement("span",{"data-testid":"zoom__popover-target-scale",className:c.classNames({"rpv-zoom__popover-target-scale":!0,"rpv-zoom__popover-target-scale--ltr":!s,"rpv-zoom__popover-target-scale--rtl":s})},Math.round(100*i),"%"),e.createElement("span",{className:"rpv-zoom__popover-target-arrow"})))},content:function(p){return e.createElement(c.Menu,null,Object.keys(c.SpecialZoomLevel).map((function(y){var M=y;return e.createElement(c.MenuItem,{key:M,onClick:function(){p(),l(M)}},(function(Z){switch(Z){case c.SpecialZoomLevel.ActualSize:return o&&o.zoom?o.zoom.actualSize:"Actual size";case c.SpecialZoomLevel.PageFit:return o&&o.zoom?o.zoom.pageFit:"Page fit";case c.SpecialZoomLevel.PageWidth:return o&&o.zoom?o.zoom.pageWidth:"Page width"}})(M))})),e.createElement(c.MenuDivider,null),n.map((function(y){return e.createElement(c.MenuItem,{key:y,onClick:function(){p(),l(y)}},"".concat(Math.round(100*y),"%"))})))},offset:C,closeOnClickOutside:!0,closeOnEscape:!0})},I=function(t){var a=t.children,n=t.levels,i=t.store;return(a||function(l){return e.createElement(w,{levels:n,scale:l.scale,onZoom:l.onZoom})})({scale:g(i).scale,onZoom:function(l){var o=i.get("zoom");o&&o(l)}})},q={left:0,top:8},P=function(t){var a=t.enableShortcuts,n=t.onClick,i=e.useContext(c.LocalizationContext).l10n,l=i&&i.zoom?i.zoom.zoomIn:"Zoom in",o=a?c.isMac()?"Meta+=":"Ctrl+=":"";return e.createElement(c.Tooltip,{ariaControlsSuffix:"zoom-in",position:c.Position.BottomCenter,target:e.createElement(c.MinimalButton,{ariaKeyShortcuts:o,ariaLabel:l,testId:"zoom__in-button",onClick:n},e.createElement(x,null)),content:function(){return l},offset:q})},$=function(t){var a=t.children,n=t.enableShortcuts,i=t.store,l=g(i).scale;return(a||P)({enableShortcuts:n,onClick:function(){var o=i.get("zoom");o&&o(L(l))}})},K=function(t){var a=t.onClick,n=e.useContext(c.LocalizationContext).l10n,i=n&&n.zoom?n.zoom.zoomIn:"Zoom in";return e.createElement(c.MenuItem,{icon:e.createElement(x,null),testId:"zoom__in-menu",onClick:a},i)},T={left:0,top:8},D=function(t){var a=t.enableShortcuts,n=t.onClick,i=e.useContext(c.LocalizationContext).l10n,l=i&&i.zoom?i.zoom.zoomOut:"Zoom out",o=a?c.isMac()?"Meta+-":"Ctrl+-":"";return e.createElement(c.Tooltip,{ariaControlsSuffix:"zoom-out",position:c.Position.BottomCenter,target:e.createElement(c.MinimalButton,{ariaKeyShortcuts:o,ariaLabel:l,testId:"zoom__out-button",onClick:n},e.createElement(j,null)),content:function(){return l},offset:T})},V=function(t){var a=t.children,n=t.enableShortcuts,i=t.store,l=g(i).scale;return(a||D)({enableShortcuts:n,onClick:function(){var o=i.get("zoom");o&&o(b(l))}})},H=function(t){var a=t.onClick,n=e.useContext(c.LocalizationContext).l10n,i=n&&n.zoom?n.zoom.zoomOut:"Zoom out";return e.createElement(c.MenuItem,{icon:e.createElement(j,null),testId:"zoom__out-menu",onClick:a},i)};return _.ZoomInIcon=x,_.ZoomOutIcon=j,_.zoomPlugin=function(t){var a=e.useMemo((function(){return Object.assign({},{enableShortcuts:!0},t)}),[]),n=e.useMemo((function(){return c.createStore({})}),[]),i=function(s){return e.createElement($,d({enableShortcuts:a.enableShortcuts},s,{store:n}))},l=function(s){return e.createElement(V,d({enableShortcuts:a.enableShortcuts},s,{store:n}))},o=function(s){return e.createElement(I,d({},s,{store:n}))};return{renderViewer:function(s){var u=s.slot;if(!a.enableShortcuts)return u;var p={children:e.createElement(e.Fragment,null,e.createElement(R,{containerRef:s.containerRef,store:n}),e.createElement(S,{pagesContainerRef:s.pagesContainerRef,store:n}),u.children)};return d(d({},u),p)},install:function(s){n.update("zoom",s.zoom)},onViewerStateChange:function(s){return n.update("scale",s.scale),s},zoomTo:function(s){var u=n.get("zoom");u&&u(s)},CurrentScale:function(s){return e.createElement(v,d({},s,{store:n}))},ZoomIn:i,ZoomInButton:function(){return e.createElement(i,null,(function(s){return e.createElement(P,d({},s))}))},ZoomInMenuItem:function(s){return e.createElement(i,null,(function(u){return e.createElement(K,{onClick:function(){u.onClick(),s.onClick()}})}))},ZoomOut:l,ZoomOutButton:function(){return e.createElement(l,null,(function(s){return e.createElement(D,d({},s))}))},ZoomOutMenuItem:function(s){return e.createElement(l,null,(function(u){return e.createElement(H,{onClick:function(){u.onClick(),s.onClick()}})}))},Zoom:o,ZoomPopover:function(s){return e.createElement(o,null,(function(u){return e.createElement(w,d({levels:s?.levels},u))}))}}},_}var B;function ve(){if(B)return O.exports;B=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return O.exports=ge(),O.exports}var ye=ve();const ke=({fileUrl:c,fileBlob:m,fileName:e})=>{const x=ye.zoomPlugin(),{ZoomIn:j,ZoomOut:d,CurrentScale:g}=x,v=()=>{const f=URL.createObjectURL(m),h=document.createElement("a");h.href=f,h.download=e,h.style.display="none",document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(f)};return r.jsxs("div",{className:"border border-base-300 rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"bg-base-300 text-base-content px-2 md:px-4 py-2 flex flex-wrap justify-between items-center gap-2",children:[r.jsx("span",{className:"font-bold text-sm md:text-base",children:"PDF Viewer"}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx(d,{children:f=>r.jsx("button",{onClick:f.onClick,className:"bg-primary hover:bg-primary/90 transition text-primary-content p-2 rounded flex items-center justify-center",title:"Zoom Out",children:r.jsx(pe,{size:16})})}),r.jsx(g,{children:f=>r.jsxs("span",{className:"text-xs md:text-sm px-2 min-w-[36px] md:min-w-[40px] text-center",children:[Math.round(f.scale*100),"%"]})}),r.jsx(j,{children:f=>r.jsx("button",{onClick:f.onClick,className:"bg-primary hover:bg-primary/90 transition text-primary-content p-2 rounded flex items-center justify-center",title:"Zoom In",children:r.jsx(he,{size:16})})}),r.jsx("button",{onClick:v,className:"bg-primary hover:bg-primary/90 text-primary-content p-2 rounded flex items-center justify-center transition",title:"Download PDF",children:r.jsx(Q,{size:18})})]})]}),r.jsx("div",{className:"h-[70vh] md:h-[700px] bg-base-100",children:r.jsx(A.Viewer,{fileUrl:c,plugins:[x]})})]})};function Ie(){const{examId:c}=G(),[m,e]=k.useState(null),[x,j]=k.useState(null),[d,g]=k.useState(null),v=k.useRef(null),[f,h]=k.useState(!0),[S,z]=k.useState(null);if(k.useEffect(()=>{if(!c){z("ID pemeriksaan tidak ditemukan"),h(!1);return}let b=!0;return(async()=>{try{const E=await te(c);if(!b)return;if(e(E.data),ne(E.data.result)){const C=await re(E.data.result.id);if(!b){const I=URL.createObjectURL(C);URL.revokeObjectURL(I);return}j(C);const w=URL.createObjectURL(C);v.current=w,g(w)}}catch(E){console.error(E),b&&z("Gagal mengambil detail pemeriksaan")}finally{b&&h(!1)}})(),()=>{b=!1}},[c]),k.useEffect(()=>()=>{if(v.current){try{URL.revokeObjectURL(v.current)}catch{}v.current=null}},[]),f)return r.jsx(W,{});if(S)return r.jsx("div",{className:"p-6 text-error",children:S});if(!m)return r.jsx("div",{className:"p-6 text-error",children:"Data tidak ditemukan"});console.log(m);const L=`${m.company_employee.nik} - ${m.company_employee.name}.pdf`;return r.jsxs("div",{className:"bg-base-100 text-base-content p-6 space-y-6",children:[r.jsx(ee,{greeting:"Hasil MCU",name:typeof m.mcu_package=="string"?m.mcu_package:m.mcu_package.name,icon:ae}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"order-1 flex items-center gap-3 bg-base-100 p-4 rounded-lg shadow-sm border border-base-200",children:[r.jsx(Y,{className:"w-6 h-6 text-primary"}),r.jsx("span",{className:"font-medium text-base-content",children:m.company_employee.name})]}),r.jsxs("div",{className:"order-2 flex items-center gap-3 bg-base-100 p-4 rounded-lg shadow-sm border border-base-200",children:[r.jsx(ce,{className:"w-6 h-6 text-primary"}),r.jsx("span",{className:"font-medium text-base-content",children:m.company_employee.nik})]}),r.jsxs("div",{className:"order-3 flex items-center gap-3 bg-base-100 p-4 rounded-lg shadow-sm border border-base-200",children:[r.jsx(se,{className:"w-6 h-6 text-primary"}),r.jsx("span",{className:"font-medium text-base-content",children:m.company_employee.employee_number})]}),r.jsxs("div",{className:"order-6 md:order-4 flex items-start gap-3 bg-base-100 p-4 rounded-lg shadow-sm border border-base-200 md:row-span-2",children:[r.jsx(U,{className:"w-6 h-6 text-primary mt-1"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-base-content/60",children:"Catatan MCU"}),r.jsx("p",{className:"font-medium text-base-content",children:m.notes??"Tidak ada catatan"})]})]}),r.jsxs("div",{className:"order-4 md:order-5 flex items-center gap-3 bg-base-100 p-4 rounded-lg shadow-sm border border-base-200 md:col-span-2",children:[r.jsx(le,{className:"w-6 h-6 text-primary"}),r.jsxs("span",{className:"font-medium text-base-content whitespace-pre-line md:whitespace-normal",children:[oe(m.company_employee.dob),`
`,r.jsxs("span",{className:"block md:inline text-sm md:text-base",children:["(",m.company_employee.age_detail,")"]})]})]}),r.jsxs("div",{className:"order-5 md:order-6 flex items-center gap-3 bg-base-100 p-4 rounded-lg shadow-sm border border-base-200",children:[m.company_employee.gender==="Perempuan"?r.jsx(be,{className:"w-6 h-6 text-primary"}):r.jsx(ue,{className:"w-6 h-6 text-primary"}),r.jsx("span",{className:"font-medium text-base-content",children:m.company_employee.gender})]})]}),d&&x?r.jsx(ke,{fileUrl:d,fileBlob:x,fileName:L}):r.jsx("div",{className:"bg-base-100 border-2 border-dashed border-primary/50 rounded-2xl p-6 shadow-md w-full",children:r.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2 text-base-content",children:[r.jsx(U,{className:"w-6 h-6 text-primary"}),typeof m.result=="string"?m.result:"Belum ada hasil"]})})]})}export{Ie as default};
