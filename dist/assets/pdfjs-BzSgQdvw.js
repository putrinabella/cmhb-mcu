function getDefaultExportFromCjs(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}function getAugmentedNamespace(h){if(Object.prototype.hasOwnProperty.call(h,"__esModule"))return h;var o=h.default;if(typeof o=="function"){var F=function c(){var y=!1;try{y=this instanceof c}catch{}return y?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};F.prototype=o.prototype}else F={};return Object.defineProperty(F,"__esModule",{value:!0}),Object.keys(h).forEach(function(c){var y=Object.getOwnPropertyDescriptor(h,c);Object.defineProperty(F,c,y.get?y:{enumerable:!0,get:function(){return h[c]}})}),F}var react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var h=Symbol.for("react.transitional.element"),o=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),e=Symbol.for("react.consumer"),U=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),t=Symbol.for("react.memo"),n=Symbol.for("react.lazy"),v=Symbol.iterator;function a(r){return r===null||typeof r!="object"?null:(r=v&&r[v]||r["@@iterator"],typeof r=="function"?r:null)}var u={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},i=Object.assign,_={};function m(r,f,T){this.props=r,this.context=f,this.refs=_,this.updater=T||u}m.prototype.isReactComponent={},m.prototype.setState=function(r,f){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,f,"setState")},m.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function g(){}g.prototype=m.prototype;function C(r,f,T){this.props=r,this.context=f,this.refs=_,this.updater=T||u}var H=C.prototype=new g;H.constructor=C,i(H,m.prototype),H.isPureReactComponent=!0;var I=Array.isArray,p={H:null,A:null,T:null,S:null,V:null},w=Object.prototype.hasOwnProperty;function B(r,f,T,P,L,M){return T=M.ref,{$$typeof:h,type:r,key:f,ref:T!==void 0?T:null,props:M}}function K(r,f){return B(r.type,f,void 0,void 0,void 0,r.props)}function z(r){return typeof r=="object"&&r!==null&&r.$$typeof===h}function Q(r){var f={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(T){return f[T]})}var et=/\/+/g;function ft(r,f){return typeof r=="object"&&r!==null&&r.key!=null?Q(""+r.key):f.toString(36)}function dt(){}function pt(r){switch(r.status){case"fulfilled":return r.value;case"rejected":throw r.reason;default:switch(typeof r.status=="string"?r.then(dt,dt):(r.status="pending",r.then(function(f){r.status==="pending"&&(r.status="fulfilled",r.value=f)},function(f){r.status==="pending"&&(r.status="rejected",r.reason=f)})),r.status){case"fulfilled":return r.value;case"rejected":throw r.reason}}throw r}function yt(r,f,T,P,L){var M=typeof r;(M==="undefined"||M==="boolean")&&(r=null);var s=!1;if(r===null)s=!0;else switch(M){case"bigint":case"string":case"number":s=!0;break;case"object":switch(r.$$typeof){case h:case o:s=!0;break;case n:return s=r._init,yt(s(r._payload),f,T,P,L)}}if(s)return L=L(r),s=P===""?"."+ft(r,0):P,I(L)?(T="",s!=null&&(T=s.replace(et,"$&/")+"/"),yt(L,f,T,"",function(k){return k})):L!=null&&(z(L)&&(L=K(L,T+(L.key==null||r&&r.key===L.key?"":(""+L.key).replace(et,"$&/")+"/")+s)),f.push(L)),1;s=0;var b=P===""?".":P+":";if(I(r))for(var E=0;E<r.length;E++)P=r[E],M=b+ft(P,E),s+=yt(P,f,T,M,L);else if(E=a(r),typeof E=="function")for(r=E.call(r),E=0;!(P=r.next()).done;)P=P.value,M=b+ft(P,E++),s+=yt(P,f,T,M,L);else if(M==="object"){if(typeof r.then=="function")return yt(pt(r),f,T,P,L);throw f=String(r),Error("Objects are not valid as a React child (found: "+(f==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":f)+"). If you meant to render a collection of children, use an array instead.")}return s}function st(r,f,T){if(r==null)return r;var P=[],L=0;return yt(r,P,"","",function(M){return f.call(T,M,L++)}),P}function D(r){if(r._status===-1){var f=r._result;f=f(),f.then(function(T){(r._status===0||r._status===-1)&&(r._status=1,r._result=T)},function(T){(r._status===0||r._status===-1)&&(r._status=2,r._result=T)}),r._status===-1&&(r._status=0,r._result=f)}if(r._status===1)return r._result.default;throw r._result}var S=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function d(){}return react_production.Children={map:st,forEach:function(r,f,T){st(r,function(){f.apply(this,arguments)},T)},count:function(r){var f=0;return st(r,function(){f++}),f},toArray:function(r){return st(r,function(f){return f})||[]},only:function(r){if(!z(r))throw Error("React.Children.only expected to receive a single React element child.");return r}},react_production.Component=m,react_production.Fragment=F,react_production.Profiler=y,react_production.PureComponent=C,react_production.StrictMode=c,react_production.Suspense=R,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=p,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(r){return p.H.useMemoCache(r)}},react_production.cache=function(r){return function(){return r.apply(null,arguments)}},react_production.cloneElement=function(r,f,T){if(r==null)throw Error("The argument must be a React element, but you passed "+r+".");var P=i({},r.props),L=r.key,M=void 0;if(f!=null)for(s in f.ref!==void 0&&(M=void 0),f.key!==void 0&&(L=""+f.key),f)!w.call(f,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&f.ref===void 0||(P[s]=f[s]);var s=arguments.length-2;if(s===1)P.children=T;else if(1<s){for(var b=Array(s),E=0;E<s;E++)b[E]=arguments[E+2];P.children=b}return B(r.type,L,void 0,void 0,M,P)},react_production.createContext=function(r){return r={$$typeof:U,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null},r.Provider=r,r.Consumer={$$typeof:e,_context:r},r},react_production.createElement=function(r,f,T){var P,L={},M=null;if(f!=null)for(P in f.key!==void 0&&(M=""+f.key),f)w.call(f,P)&&P!=="key"&&P!=="__self"&&P!=="__source"&&(L[P]=f[P]);var s=arguments.length-2;if(s===1)L.children=T;else if(1<s){for(var b=Array(s),E=0;E<s;E++)b[E]=arguments[E+2];L.children=b}if(r&&r.defaultProps)for(P in s=r.defaultProps,s)L[P]===void 0&&(L[P]=s[P]);return B(r,M,void 0,void 0,null,L)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(r){return{$$typeof:W,render:r}},react_production.isValidElement=z,react_production.lazy=function(r){return{$$typeof:n,_payload:{_status:-1,_result:r},_init:D}},react_production.memo=function(r,f){return{$$typeof:t,type:r,compare:f===void 0?null:f}},react_production.startTransition=function(r){var f=p.T,T={};p.T=T;try{var P=r(),L=p.S;L!==null&&L(T,P),typeof P=="object"&&P!==null&&typeof P.then=="function"&&P.then(d,S)}catch(M){S(M)}finally{p.T=f}},react_production.unstable_useCacheRefresh=function(){return p.H.useCacheRefresh()},react_production.use=function(r){return p.H.use(r)},react_production.useActionState=function(r,f,T){return p.H.useActionState(r,f,T)},react_production.useCallback=function(r,f){return p.H.useCallback(r,f)},react_production.useContext=function(r){return p.H.useContext(r)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(r,f){return p.H.useDeferredValue(r,f)},react_production.useEffect=function(r,f,T){var P=p.H;if(typeof T=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return P.useEffect(r,f)},react_production.useId=function(){return p.H.useId()},react_production.useImperativeHandle=function(r,f,T){return p.H.useImperativeHandle(r,f,T)},react_production.useInsertionEffect=function(r,f){return p.H.useInsertionEffect(r,f)},react_production.useLayoutEffect=function(r,f){return p.H.useLayoutEffect(r,f)},react_production.useMemo=function(r,f){return p.H.useMemo(r,f)},react_production.useOptimistic=function(r,f){return p.H.useOptimistic(r,f)},react_production.useReducer=function(r,f,T){return p.H.useReducer(r,f,T)},react_production.useRef=function(r){return p.H.useRef(r)},react_production.useState=function(r){return p.H.useState(r)},react_production.useSyncExternalStore=function(r,f,T){return p.H.useSyncExternalStore(r,f,T)},react_production.useTransition=function(){return p.H.useTransition()},react_production.version="19.1.1",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var lib={exports:{}},core_min={};function commonjsRequire(h){throw new Error('Could not dynamically require "'+h+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports){(function(o,F){module.exports=F()})(globalThis,()=>(()=>{var __webpack_modules__=[,((h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.VerbosityLevel=o.Util=o.UnknownErrorException=o.UnexpectedResponseException=o.TextRenderingMode=o.RenderingIntentFlag=o.PromiseCapability=o.PermissionFlag=o.PasswordResponses=o.PasswordException=o.PageActionEventType=o.OPS=o.MissingPDFException=o.MAX_IMAGE_SIZE_TO_CACHE=o.LINE_FACTOR=o.LINE_DESCENT_FACTOR=o.InvalidPDFException=o.ImageKind=o.IDENTITY_MATRIX=o.FormatError=o.FeatureTest=o.FONT_IDENTITY_MATRIX=o.DocumentActionEventType=o.CMapCompressionType=o.BaseException=o.BASELINE_FACTOR=o.AnnotationType=o.AnnotationReplyType=o.AnnotationMode=o.AnnotationFlag=o.AnnotationFieldFlag=o.AnnotationEditorType=o.AnnotationEditorPrefix=o.AnnotationEditorParamsType=o.AnnotationBorderStyleType=o.AnnotationActionEventType=o.AbortException=void 0,o.assert=d,o.bytesToString=G,o.createValidAbsoluteUrl=f,o.getModificationDate=Ae,o.getUuid=cn,o.getVerbosityLevel=yt,o.info=st,o.isArrayBuffer=ne,o.isArrayEqual=xe,o.isNodeJS=void 0,o.normalizeUnicode=Ve,o.objectFromMap=rt,o.objectSize=St,o.setVerbosityLevel=pt,o.shadow=T,o.string32=it,o.stringToBytes=X,o.stringToPDFString=Bt,o.stringToUTF8String=$t,o.unreachable=S,o.utf8StringToString=Yt,o.warn=D;const F=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");o.isNodeJS=F;const c=[1,0,0,1,0,0];o.IDENTITY_MATRIX=c;const y=[.001,0,0,.001,0,0];o.FONT_IDENTITY_MATRIX=y;const e=1e7;o.MAX_IMAGE_SIZE_TO_CACHE=e;const U=1.35;o.LINE_FACTOR=U;const W=.35;o.LINE_DESCENT_FACTOR=W;const R=W/U;o.BASELINE_FACTOR=R;const t={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};o.RenderingIntentFlag=t;const n={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};o.AnnotationMode=n;const v="pdfjs_internal_editor_";o.AnnotationEditorPrefix=v;const a={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};o.AnnotationEditorType=a;const u={RESIZE:1,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};o.AnnotationEditorParamsType=u;const i={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};o.PermissionFlag=i;const _={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};o.TextRenderingMode=_;const m={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};o.ImageKind=m;const g={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};o.AnnotationType=g;const C={GROUP:"Group",REPLY:"R"};o.AnnotationReplyType=C;const H={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};o.AnnotationFlag=H;const I={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};o.AnnotationFieldFlag=I;const p={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};o.AnnotationBorderStyleType=p;const w={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};o.AnnotationActionEventType=w;const B={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};o.DocumentActionEventType=B;const K={O:"PageOpen",C:"PageClose"};o.PageActionEventType=K;const z={ERRORS:0,WARNINGS:1,INFOS:5};o.VerbosityLevel=z;const Q={NONE:0,BINARY:1};o.CMapCompressionType=Q;const et={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};o.OPS=et;const ft={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};o.PasswordResponses=ft;let dt=z.WARNINGS;function pt(gt){Number.isInteger(gt)&&(dt=gt)}function yt(){return dt}function st(gt){dt>=z.INFOS&&console.log(`Info: ${gt}`)}function D(gt){dt>=z.WARNINGS&&console.log(`Warning: ${gt}`)}function S(gt){throw new Error(gt)}function d(gt,nt){gt||S(nt)}function r(gt){switch(gt?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function f(gt,nt=null,tt=null){if(!gt)return null;try{if(tt&&typeof gt=="string"&&(tt.addDefaultProtocol&&gt.startsWith("www.")&&gt.match(/\./g)?.length>=2&&(gt=`http://${gt}`),tt.tryConvertEncoding))try{gt=$t(gt)}catch{}const Et=nt?new URL(gt,nt):new URL(gt);if(r(Et))return Et}catch{}return null}function T(gt,nt,tt,Et=!1){return Object.defineProperty(gt,nt,{value:tt,enumerable:!Et,configurable:!0,writable:!1}),tt}const P=(function(){function nt(tt,Et){this.constructor===nt&&S("Cannot initialize BaseException."),this.message=tt,this.name=Et}return nt.prototype=new Error,nt.constructor=nt,nt})();o.BaseException=P;class L extends P{constructor(nt,tt){super(nt,"PasswordException"),this.code=tt}}o.PasswordException=L;class M extends P{constructor(nt,tt){super(nt,"UnknownErrorException"),this.details=tt}}o.UnknownErrorException=M;class s extends P{constructor(nt){super(nt,"InvalidPDFException")}}o.InvalidPDFException=s;class b extends P{constructor(nt){super(nt,"MissingPDFException")}}o.MissingPDFException=b;class E extends P{constructor(nt,tt){super(nt,"UnexpectedResponseException"),this.status=tt}}o.UnexpectedResponseException=E;class k extends P{constructor(nt){super(nt,"FormatError")}}o.FormatError=k;class x extends P{constructor(nt){super(nt,"AbortException")}}o.AbortException=x;function G(gt){(typeof gt!="object"||gt?.length===void 0)&&S("Invalid argument for bytesToString");const nt=gt.length,tt=8192;if(nt<tt)return String.fromCharCode.apply(null,gt);const Et=[];for(let Gt=0;Gt<nt;Gt+=tt){const Se=Math.min(Gt+tt,nt),Wt=gt.subarray(Gt,Se);Et.push(String.fromCharCode.apply(null,Wt))}return Et.join("")}function X(gt){typeof gt!="string"&&S("Invalid argument for stringToBytes");const nt=gt.length,tt=new Uint8Array(nt);for(let Et=0;Et<nt;++Et)tt[Et]=gt.charCodeAt(Et)&255;return tt}function it(gt){return String.fromCharCode(gt>>24&255,gt>>16&255,gt>>8&255,gt&255)}function St(gt){return Object.keys(gt).length}function rt(gt){const nt=Object.create(null);for(const[tt,Et]of gt)nt[tt]=Et;return nt}function at(){const gt=new Uint8Array(4);return gt[0]=1,new Uint32Array(gt.buffer,0,1)[0]===1}function ut(){try{return new Function(""),!0}catch{return!1}}class ht{static get isLittleEndian(){return T(this,"isLittleEndian",at())}static get isEvalSupported(){return T(this,"isEvalSupported",ut())}static get isOffscreenCanvasSupported(){return T(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?T(this,"platform",{isWin:!1,isMac:!1}):T(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}o.FeatureTest=ht;const _t=[...Array(256).keys()].map(gt=>gt.toString(16).padStart(2,"0"));class Ct{static makeHexColor(nt,tt,Et){return`#${_t[nt]}${_t[tt]}${_t[Et]}`}static scaleMinMax(nt,tt){let Et;nt[0]?(nt[0]<0&&(Et=tt[0],tt[0]=tt[1],tt[1]=Et),tt[0]*=nt[0],tt[1]*=nt[0],nt[3]<0&&(Et=tt[2],tt[2]=tt[3],tt[3]=Et),tt[2]*=nt[3],tt[3]*=nt[3]):(Et=tt[0],tt[0]=tt[2],tt[2]=Et,Et=tt[1],tt[1]=tt[3],tt[3]=Et,nt[1]<0&&(Et=tt[2],tt[2]=tt[3],tt[3]=Et),tt[2]*=nt[1],tt[3]*=nt[1],nt[2]<0&&(Et=tt[0],tt[0]=tt[1],tt[1]=Et),tt[0]*=nt[2],tt[1]*=nt[2]),tt[0]+=nt[4],tt[1]+=nt[4],tt[2]+=nt[5],tt[3]+=nt[5]}static transform(nt,tt){return[nt[0]*tt[0]+nt[2]*tt[1],nt[1]*tt[0]+nt[3]*tt[1],nt[0]*tt[2]+nt[2]*tt[3],nt[1]*tt[2]+nt[3]*tt[3],nt[0]*tt[4]+nt[2]*tt[5]+nt[4],nt[1]*tt[4]+nt[3]*tt[5]+nt[5]]}static applyTransform(nt,tt){const Et=nt[0]*tt[0]+nt[1]*tt[2]+tt[4],Gt=nt[0]*tt[1]+nt[1]*tt[3]+tt[5];return[Et,Gt]}static applyInverseTransform(nt,tt){const Et=tt[0]*tt[3]-tt[1]*tt[2],Gt=(nt[0]*tt[3]-nt[1]*tt[2]+tt[2]*tt[5]-tt[4]*tt[3])/Et,Se=(-nt[0]*tt[1]+nt[1]*tt[0]+tt[4]*tt[1]-tt[5]*tt[0])/Et;return[Gt,Se]}static getAxialAlignedBoundingBox(nt,tt){const Et=this.applyTransform(nt,tt),Gt=this.applyTransform(nt.slice(2,4),tt),Se=this.applyTransform([nt[0],nt[3]],tt),Wt=this.applyTransform([nt[2],nt[1]],tt);return[Math.min(Et[0],Gt[0],Se[0],Wt[0]),Math.min(Et[1],Gt[1],Se[1],Wt[1]),Math.max(Et[0],Gt[0],Se[0],Wt[0]),Math.max(Et[1],Gt[1],Se[1],Wt[1])]}static inverseTransform(nt){const tt=nt[0]*nt[3]-nt[1]*nt[2];return[nt[3]/tt,-nt[1]/tt,-nt[2]/tt,nt[0]/tt,(nt[2]*nt[5]-nt[4]*nt[3])/tt,(nt[4]*nt[1]-nt[5]*nt[0])/tt]}static singularValueDecompose2dScale(nt){const tt=[nt[0],nt[2],nt[1],nt[3]],Et=nt[0]*tt[0]+nt[1]*tt[2],Gt=nt[0]*tt[1]+nt[1]*tt[3],Se=nt[2]*tt[0]+nt[3]*tt[2],Wt=nt[2]*tt[1]+nt[3]*tt[3],pe=(Et+Wt)/2,qe=Math.sqrt((Et+Wt)**2-4*(Et*Wt-Se*Gt))/2,We=pe+qe||1,Fe=pe-qe||1;return[Math.sqrt(We),Math.sqrt(Fe)]}static normalizeRect(nt){const tt=nt.slice(0);return nt[0]>nt[2]&&(tt[0]=nt[2],tt[2]=nt[0]),nt[1]>nt[3]&&(tt[1]=nt[3],tt[3]=nt[1]),tt}static intersect(nt,tt){const Et=Math.max(Math.min(nt[0],nt[2]),Math.min(tt[0],tt[2])),Gt=Math.min(Math.max(nt[0],nt[2]),Math.max(tt[0],tt[2]));if(Et>Gt)return null;const Se=Math.max(Math.min(nt[1],nt[3]),Math.min(tt[1],tt[3])),Wt=Math.min(Math.max(nt[1],nt[3]),Math.max(tt[1],tt[3]));return Se>Wt?null:[Et,Se,Gt,Wt]}static bezierBoundingBox(nt,tt,Et,Gt,Se,Wt,pe,qe){const We=[],Fe=[[],[]];let Ge,Be,Ze,Ee,rn,sn,un,hn;for(let dn=0;dn<2;++dn){if(dn===0?(Be=6*nt-12*Et+6*Se,Ge=-3*nt+9*Et-9*Se+3*pe,Ze=3*Et-3*nt):(Be=6*tt-12*Gt+6*Wt,Ge=-3*tt+9*Gt-9*Wt+3*qe,Ze=3*Gt-3*tt),Math.abs(Ge)<1e-12){if(Math.abs(Be)<1e-12)continue;Ee=-Ze/Be,0<Ee&&Ee<1&&We.push(Ee);continue}un=Be*Be-4*Ze*Ge,hn=Math.sqrt(un),!(un<0)&&(rn=(-Be+hn)/(2*Ge),0<rn&&rn<1&&We.push(rn),sn=(-Be-hn)/(2*Ge),0<sn&&sn<1&&We.push(sn))}let Qe=We.length,Le;const tn=Qe;for(;Qe--;)Ee=We[Qe],Le=1-Ee,Fe[0][Qe]=Le*Le*Le*nt+3*Le*Le*Ee*Et+3*Le*Ee*Ee*Se+Ee*Ee*Ee*pe,Fe[1][Qe]=Le*Le*Le*tt+3*Le*Le*Ee*Gt+3*Le*Ee*Ee*Wt+Ee*Ee*Ee*qe;return Fe[0][tn]=nt,Fe[1][tn]=tt,Fe[0][tn+1]=pe,Fe[1][tn+1]=qe,Fe[0].length=Fe[1].length=tn+2,[Math.min(...Fe[0]),Math.min(...Fe[1]),Math.max(...Fe[0]),Math.max(...Fe[1])]}}o.Util=Ct;const Lt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Bt(gt){if(gt[0]>="ï"){let tt;if(gt[0]==="þ"&&gt[1]==="ÿ"?tt="utf-16be":gt[0]==="ÿ"&&gt[1]==="þ"?tt="utf-16le":gt[0]==="ï"&&gt[1]==="»"&&gt[2]==="¿"&&(tt="utf-8"),tt)try{const Et=new TextDecoder(tt,{fatal:!0}),Gt=X(gt);return Et.decode(Gt)}catch(Et){D(`stringToPDFString: "${Et}".`)}}const nt=[];for(let tt=0,Et=gt.length;tt<Et;tt++){const Gt=Lt[gt.charCodeAt(tt)];nt.push(Gt?String.fromCharCode(Gt):gt.charAt(tt))}return nt.join("")}function $t(gt){return decodeURIComponent(escape(gt))}function Yt(gt){return unescape(encodeURIComponent(gt))}function ne(gt){return typeof gt=="object"&&gt?.byteLength!==void 0}function xe(gt,nt){if(gt.length!==nt.length)return!1;for(let tt=0,Et=gt.length;tt<Et;tt++)if(gt[tt]!==nt[tt])return!1;return!0}function Ae(gt=new Date){return[gt.getUTCFullYear().toString(),(gt.getUTCMonth()+1).toString().padStart(2,"0"),gt.getUTCDate().toString().padStart(2,"0"),gt.getUTCHours().toString().padStart(2,"0"),gt.getUTCMinutes().toString().padStart(2,"0"),gt.getUTCSeconds().toString().padStart(2,"0")].join("")}class He{#t=!1;constructor(){this.promise=new Promise((nt,tt)=>{this.resolve=Et=>{this.#t=!0,nt(Et)},this.reject=Et=>{this.#t=!0,tt(Et)}})}get settled(){return this.#t}}o.PromiseCapability=He;let Te=null,Ne=null;function Ve(gt){return Te||(Te=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ne=new Map([["ﬅ","ſt"]])),gt.replaceAll(Te,(nt,tt,Et)=>tt?tt.normalize("NFKC"):Ne.get(Et))}function cn(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const gt=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(gt);else for(let nt=0;nt<32;nt++)gt[nt]=Math.floor(Math.random()*255);return G(gt)}}),((__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(h){if(typeof h=="string"||h instanceof URL?h={url:h}:(0,_util.isArrayBuffer)(h)&&(h={data:h}),typeof h!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!h.url&&!h.data&&!h.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const o=new PDFDocumentLoadingTask,{docId:F}=o,c=h.url?getUrlProp(h.url):null,y=h.data?getDataProp(h.data):null,e=h.httpHeaders||null,U=h.withCredentials===!0,W=h.password??null,R=h.range instanceof PDFDataRangeTransport?h.range:null,t=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let n=h.worker instanceof PDFWorker?h.worker:null;const v=h.verbosity,a=typeof h.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(h.docBaseUrl)?h.docBaseUrl:null,u=typeof h.cMapUrl=="string"?h.cMapUrl:null,i=h.cMapPacked!==!1,_=h.CMapReaderFactory||DefaultCMapReaderFactory,m=typeof h.standardFontDataUrl=="string"?h.standardFontDataUrl:null,g=h.StandardFontDataFactory||DefaultStandardFontDataFactory,C=h.stopAtErrors!==!0,H=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,I=h.isEvalSupported!==!1,p=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!_util.isNodeJS,w=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,B=typeof h.disableFontFace=="boolean"?h.disableFontFace:_util.isNodeJS,K=h.fontExtraProperties===!0,z=h.enableXfa===!0,Q=h.ownerDocument||globalThis.document,et=h.disableRange===!0,ft=h.disableStream===!0,dt=h.disableAutoFetch===!0,pt=h.pdfBug===!0,yt=R?R.length:h.length??NaN,st=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!_util.isNodeJS&&!B,D=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:_===_display_utils.DOMCMapReaderFactory&&g===_display_utils.DOMStandardFontDataFactory&&u&&m&&(0,_display_utils.isValidFetchUrl)(u,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(m,document.baseURI),S=h.canvasFactory||new DefaultCanvasFactory({ownerDocument:Q}),d=h.filterFactory||new DefaultFilterFactory({docId:F,ownerDocument:Q}),r=null;(0,_util.setVerbosityLevel)(v);const f={canvasFactory:S,filterFactory:d};if(D||(f.cMapReaderFactory=new _({baseUrl:u,isCompressed:i}),f.standardFontDataFactory=new g({baseUrl:m})),!n){const L={verbosity:v,port:_worker_options.GlobalWorkerOptions.workerPort};n=L.port?PDFWorker.fromPort(L):new PDFWorker(L),o._worker=n}const T={docId:F,apiVersion:"3.9.179",data:y,password:W,disableAutoFetch:dt,rangeChunkSize:t,length:yt,docBaseUrl:a,enableXfa:z,evaluatorOptions:{maxImageSize:H,disableFontFace:B,ignoreErrors:C,isEvalSupported:I,isOffscreenCanvasSupported:p,canvasMaxAreaInBytes:w,fontExtraProperties:K,useSystemFonts:st,cMapUrl:D?u:null,standardFontDataUrl:D?m:null}},P={ignoreErrors:C,isEvalSupported:I,disableFontFace:B,fontExtraProperties:K,enableXfa:z,ownerDocument:Q,disableAutoFetch:dt,pdfBug:pt,styleElement:r};return n.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");const L=_fetchDocument(n,T),M=new Promise(function(s){let b;R?b=new _transport_stream.PDFDataTransportStream({length:yt,initialData:R.initialData,progressiveDone:R.progressiveDone,contentDispositionFilename:R.contentDispositionFilename,disableRange:et,disableStream:ft},R):y||(b=(k=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(k):(0,_display_utils.isValidFetchUrl)(k.url)?new _displayFetch_stream.PDFFetchStream(k):new _displayNetwork.PDFNetworkStream(k))({url:c,length:yt,httpHeaders:e,withCredentials:U,rangeChunkSize:t,disableRange:et,disableStream:ft})),s(b)});return Promise.all([L,M]).then(function([s,b]){if(o.destroyed)throw new Error("Loading aborted");const E=new _message_handler.MessageHandler(F,s,n.port),k=new WorkerTransport(E,o,b,P,f);o._transport=k,E.send("Ready",null)})}).catch(o._capability.reject),o}async function _fetchDocument(h,o){if(h.destroyed)throw new Error("Worker was destroyed");const F=await h.messageHandler.sendWithPromise("GetDocRequest",o,o.data?[o.data.buffer]:null);if(h.destroyed)throw new Error("Worker was destroyed");return F}function getUrlProp(h){if(h instanceof URL)return h.href;try{return new URL(h,window.location).href}catch{if(_util.isNodeJS&&typeof h=="string")return h}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(h){if(_util.isNodeJS&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return(0,_util.stringToBytes)(h);if(typeof h=="object"&&!isNaN(h?.length)||(0,_util.isArrayBuffer)(h))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0,await this._transport?.destroy(),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(o,F,c=!1,y=null){this.length=o,this.initialData=F,this.progressiveDone=c,this.contentDispositionFilename=y,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(o){this._rangeListeners.push(o)}addProgressListener(o){this._progressListeners.push(o)}addProgressiveReadListener(o){this._progressiveReadListeners.push(o)}addProgressiveDoneListener(o){this._progressiveDoneListeners.push(o)}onDataRange(o,F){for(const c of this._rangeListeners)c(o,F)}onDataProgress(o,F){this._readyCapability.promise.then(()=>{for(const c of this._progressListeners)c(o,F)})}onDataProgressiveRead(o){this._readyCapability.promise.then(()=>{for(const F of this._progressiveReadListeners)F(o)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const o of this._progressiveDoneListeners)o()})}transportReady(){this._readyCapability.resolve()}requestDataRange(o,F){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(o,F){this._pdfInfo=o,this._transport=F}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(o){return this._transport.getPage(o)}getPageIndex(o){return this._transport.getPageIndex(o)}getDestinations(){return this._transport.getDestinations()}getDestination(o){return this._transport.getDestination(o)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(o=!1){return this._transport.startCleanup(o||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#t=null;#e=!1;constructor(o,F,c,y=!1){this._pageIndex=o,this._pageInfo=F,this._transport=c,this._stats=y?new _display_utils.StatTimer:null,this._pdfBug=y,this.commonObjs=c.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:o,rotation:F=this.rotate,offsetX:c=0,offsetY:y=0,dontFlip:e=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:o,rotation:F,offsetX:c,offsetY:y,dontFlip:e})}getAnnotations({intent:o="display"}={}){const F=this._transport.getRenderingIntent(o);return this._transport.getAnnotations(this._pageIndex,F.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:o,viewport:F,intent:c="display",annotationMode:y=_util.AnnotationMode.ENABLE,transform:e=null,background:U=null,optionalContentConfigPromise:W=null,annotationCanvasMap:R=null,pageColors:t=null,printAnnotationStorage:n=null}){this._stats?.time("Overall");const v=this._transport.getRenderingIntent(c,y,n);this.#e=!1,this.#i(),W||(W=this._transport.getOptionalContentConfig());let a=this._intentStates.get(v.cacheKey);a||(a=Object.create(null),this._intentStates.set(v.cacheKey,a)),a.streamReaderCancelTimeout&&(clearTimeout(a.streamReaderCancelTimeout),a.streamReaderCancelTimeout=null);const u=!!(v.renderingIntent&_util.RenderingIntentFlag.PRINT);a.displayReadyCapability||(a.displayReadyCapability=new _util.PromiseCapability,a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));const i=g=>{a.renderTasks.delete(_),(this._maybeCleanupAfterRender||u)&&(this.#e=!0),this.#n(!u),g?(_.capability.reject(g),this._abortOperatorList({intentState:a,reason:g instanceof Error?g:new Error(g)})):_.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},_=new InternalRenderTask({callback:i,params:{canvasContext:o,viewport:F,transform:e,background:U},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:R,operatorList:a.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!u,pdfBug:this._pdfBug,pageColors:t});(a.renderTasks||=new Set).add(_);const m=_.task;return Promise.all([a.displayReadyCapability.promise,W]).then(([g,C])=>{if(this.destroyed){i();return}this._stats?.time("Rendering"),_.initializeGraphics({transparency:g,optionalContentConfig:C}),_.operatorListChanged()}).catch(i),m}getOperatorList({intent:o="display",annotationMode:F=_util.AnnotationMode.ENABLE,printAnnotationStorage:c=null}={}){function y(){U.operatorList.lastChunk&&(U.opListReadCapability.resolve(U.operatorList),U.renderTasks.delete(W))}const e=this._transport.getRenderingIntent(o,F,c,!0);let U=this._intentStates.get(e.cacheKey);U||(U=Object.create(null),this._intentStates.set(e.cacheKey,U));let W;return U.opListReadCapability||(W=Object.create(null),W.operatorListChanged=y,U.opListReadCapability=new _util.PromiseCapability,(U.renderTasks||=new Set).add(W),U.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(e)),U.opListReadCapability.promise}streamTextContent({includeMarkedContent:o=!1,disableNormalization:F=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:o===!0,disableNormalization:F===!0},{highWaterMark:100,size(y){return y.items.length}})}getTextContent(o={}){if(this._transport._htmlForXfa)return this.getXfa().then(c=>_xfa_text.XfaText.textContent(c));const F=this.streamTextContent(o);return new Promise(function(c,y){function e(){U.read().then(function({value:R,done:t}){if(t){c(W);return}Object.assign(W.styles,R.styles),W.items.push(...R.items),e()},y)}const U=F.getReader(),W={items:[],styles:Object.create(null)};e()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const o=[];for(const F of this._intentStates.values())if(this._abortOperatorList({intentState:F,reason:new Error("Page was destroyed."),force:!0}),!F.opListReadCapability)for(const c of F.renderTasks)o.push(c.completed),c.cancel();return this.objs.clear(),this.#e=!1,this.#i(),Promise.all(o)}cleanup(o=!1){this.#e=!0;const F=this.#n(!1);return o&&F&&(this._stats&&=new _display_utils.StatTimer),F}#n(o=!1){if(this.#i(),!this.#e||this.destroyed)return!1;if(o)return this.#t=setTimeout(()=>{this.#t=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:F,operatorList:c}of this._intentStates.values())if(F.size>0||!c.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#i(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(o,F){const c=this._intentStates.get(F);c&&(this._stats?.timeEnd("Page Request"),c.displayReadyCapability?.resolve(o))}_renderPageChunk(o,F){for(let c=0,y=o.length;c<y;c++)F.operatorList.fnArray.push(o.fnArray[c]),F.operatorList.argsArray.push(o.argsArray[c]);F.operatorList.lastChunk=o.lastChunk,F.operatorList.separateAnnots=o.separateAnnots;for(const c of F.renderTasks)c.operatorListChanged();o.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:o,cacheKey:F,annotationStorageSerializable:c}){const{map:y,transfers:e}=c,W=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:o,cacheKey:F,annotationStorage:y},e).getReader(),R=this._intentStates.get(F);R.streamReader=W;const t=()=>{W.read().then(({value:n,done:v})=>{if(v){R.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(n,R),t())},n=>{if(R.streamReader=null,!this._transport.destroyed){if(R.operatorList){R.operatorList.lastChunk=!0;for(const v of R.renderTasks)v.operatorListChanged();this.#n(!0)}if(R.displayReadyCapability)R.displayReadyCapability.reject(n);else if(R.opListReadCapability)R.opListReadCapability.reject(n);else throw n}})};t()}_abortOperatorList({intentState:o,reason:F,force:c=!1}){if(o.streamReader){if(o.streamReaderCancelTimeout&&(clearTimeout(o.streamReaderCancelTimeout),o.streamReaderCancelTimeout=null),!c){if(o.renderTasks.size>0)return;if(F instanceof _display_utils.RenderingCancelledException){let y=RENDERING_CANCELLED_TIMEOUT;F.extraDelay>0&&F.extraDelay<1e3&&(y+=F.extraDelay),o.streamReaderCancelTimeout=setTimeout(()=>{o.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:o,reason:F,force:!0})},y);return}}if(o.streamReader.cancel(new _util.AbortException(F.message)).catch(()=>{}),o.streamReader=null,!this._transport.destroyed){for(const[y,e]of this._intentStates)if(e===o){this._intentStates.delete(y);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#t=new Set;#e=Promise.resolve();postMessage(o,F){const c={data:structuredClone(o,F?{transfer:F}:null)};this.#e.then(()=>{for(const y of this.#t)y.call(this,c)})}addEventListener(o,F){this.#t.add(F)}removeEventListener(o,F){this.#t.delete(F)}terminate(){this.#t.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const h=document?.currentScript?.src;h&&(PDFWorkerUtil.fallbackWorkerSrc=h.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(h,o){let F;try{if(F=new URL(h),!F.origin||F.origin==="null")return!1}catch{return!1}const c=new URL(o,F);return F.origin===c.origin},PDFWorkerUtil.createCDNWrapper=function(h){const o=`importScripts("${h}");`;return URL.createObjectURL(new Blob([o]))}}class PDFWorker{static#workerPorts=new WeakMap;constructor({name:h=null,port:o=null,verbosity:F=(0,_util.getVerbosityLevel)()}={}){if(o&&PDFWorker.#workerPorts.has(o))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=h,this.destroyed=!1,this.verbosity=F,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,o){PDFWorker.#workerPorts.set(o,this),this._initializeFromPort(o);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(h){this._port=h,this._messageHandler=new _message_handler.MessageHandler("main","worker",h),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:h}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,h)||(h=PDFWorkerUtil.createCDNWrapper(new URL(h,window.location).href));const o=new Worker(h),F=new _message_handler.MessageHandler("main","worker",o),c=()=>{o.removeEventListener("error",y),F.destroy(),o.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},y=()=>{this._webWorker||c()};o.addEventListener("error",y),F.on("test",U=>{if(o.removeEventListener("error",y),this.destroyed){c();return}U?(this._messageHandler=F,this._port=o,this._webWorker=o,this._readyCapability.resolve(),F.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),F.destroy(),o.terminate())}),F.on("ready",U=>{if(o.removeEventListener("error",y),this.destroyed){c();return}try{e()}catch{this._setupFakeWorker()}});const e=()=>{const U=new Uint8Array;F.send("test",U,[U.buffer])};e();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(h=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const o=new LoopbackPort;this._port=o;const F=`fake${PDFWorkerUtil.fakeWorkerId++}`,c=new _message_handler.MessageHandler(F+"_worker",F,o);h.setup(c,o);const y=new _message_handler.MessageHandler(F,F+"_worker",o);this._messageHandler=y,this._readyCapability.resolve(),y.send("configure",{verbosity:this.verbosity})}).catch(h=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${h.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(h){if(!h?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.#workerPorts.has(h.port)?this.#workerPorts.get(h.port):new PDFWorker(h)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#t=new Map;#e=new Map;#n=new Map;#i=null;constructor(o,F,c,y,e){this.messageHandler=o,this.loadingTask=F,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:y.ownerDocument,styleElement:y.styleElement}),this._params=y,this.canvasFactory=e.canvasFactory,this.filterFactory=e.filterFactory,this.cMapReaderFactory=e.cMapReaderFactory,this.standardFontDataFactory=e.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=c,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#a(o,F=null){const c=this.#t.get(o);if(c)return c;const y=this.messageHandler.sendWithPromise(o,F);return this.#t.set(o,y),y}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(o,F=_util.AnnotationMode.ENABLE,c=null,y=!1){let e=_util.RenderingIntentFlag.DISPLAY,U=_annotation_storage.SerializableEmpty;switch(o){case"any":e=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":e=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${o}`)}switch(F){case _util.AnnotationMode.DISABLE:e+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:e+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:e+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,U=(e&_util.RenderingIntentFlag.PRINT&&c instanceof _annotation_storage.PrintAnnotationStorage?c:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${F}`)}return y&&(e+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:e,cacheKey:`${e}_${U.hash}`,annotationStorageSerializable:U}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const o=[];for(const c of this.#e.values())o.push(c._destroy());this.#e.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const F=this.messageHandler.sendWithPromise("Terminate",null);return o.push(F),Promise.all(o).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:o,loadingTask:F}=this;o.on("GetReader",(c,y)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},y.onPull=()=>{this._fullReader.read().then(function({value:e,done:U}){if(U){y.close();return}(0,_util.assert)(e instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),y.enqueue(new Uint8Array(e),1,[e])}).catch(e=>{y.error(e)})},y.onCancel=e=>{this._fullReader.cancel(e),y.ready.catch(U=>{if(!this.destroyed)throw U})}}),o.on("ReaderHeadersReady",c=>{const y=new _util.PromiseCapability,e=this._fullReader;return e.headersReady.then(()=>{(!e.isStreamingSupported||!e.isRangeSupported)&&(this._lastProgress&&F.onProgress?.(this._lastProgress),e.onProgress=U=>{F.onProgress?.({loaded:U.loaded,total:U.total})}),y.resolve({isStreamingSupported:e.isStreamingSupported,isRangeSupported:e.isRangeSupported,contentLength:e.contentLength})},y.reject),y.promise}),o.on("GetRangeReader",(c,y)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const e=this._networkStream.getRangeReader(c.begin,c.end);if(!e){y.close();return}y.onPull=()=>{e.read().then(function({value:U,done:W}){if(W){y.close();return}(0,_util.assert)(U instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),y.enqueue(new Uint8Array(U),1,[U])}).catch(U=>{y.error(U)})},y.onCancel=U=>{e.cancel(U),y.ready.catch(W=>{if(!this.destroyed)throw W})}}),o.on("GetDoc",({pdfInfo:c})=>{this._numPages=c.numPages,this._htmlForXfa=c.htmlForXfa,delete c.htmlForXfa,F._capability.resolve(new PDFDocumentProxy(c,this))}),o.on("DocException",function(c){let y;switch(c.name){case"PasswordException":y=new _util.PasswordException(c.message,c.code);break;case"InvalidPDFException":y=new _util.InvalidPDFException(c.message);break;case"MissingPDFException":y=new _util.MissingPDFException(c.message);break;case"UnexpectedResponseException":y=new _util.UnexpectedResponseException(c.message,c.status);break;case"UnknownErrorException":y=new _util.UnknownErrorException(c.message,c.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}F._capability.reject(y)}),o.on("PasswordRequest",c=>{if(this.#i=new _util.PromiseCapability,F.onPassword){const y=e=>{e instanceof Error?this.#i.reject(e):this.#i.resolve({password:e})};try{F.onPassword(y,c.code)}catch(e){this.#i.reject(e)}}else this.#i.reject(new _util.PasswordException(c.message,c.code));return this.#i.promise}),o.on("DataLoaded",c=>{F.onProgress?.({loaded:c.length,total:c.length}),this.downloadInfoCapability.resolve(c)}),o.on("StartRenderPage",c=>{if(this.destroyed)return;this.#e.get(c.pageIndex)._startRenderPage(c.transparency,c.cacheKey)}),o.on("commonobj",([c,y,e])=>{if(!this.destroyed&&!this.commonObjs.has(c))switch(y){case"Font":const U=this._params;if("error"in e){const t=e.error;(0,_util.warn)(`Error during font loading: ${t}`),this.commonObjs.resolve(c,t);break}const W=U.pdfBug&&globalThis.FontInspector?.enabled?(t,n)=>globalThis.FontInspector.fontAdded(t,n):null,R=new _font_loader.FontFaceObject(e,{isEvalSupported:U.isEvalSupported,disableFontFace:U.disableFontFace,ignoreErrors:U.ignoreErrors,inspectFont:W});this.fontLoader.bind(R).catch(t=>o.sendWithPromise("FontFallback",{id:c})).finally(()=>{!U.fontExtraProperties&&R.data&&(R.data=null),this.commonObjs.resolve(c,R)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(c,e);break;default:throw new Error(`Got unknown common object type ${y}`)}}),o.on("obj",([c,y,e,U])=>{if(this.destroyed)return;const W=this.#e.get(y);if(!W.objs.has(c))switch(e){case"Image":if(W.objs.resolve(c,U),U){let R;if(U.bitmap){const{width:t,height:n}=U;R=t*n*4}else R=U.data?.length||0;R>_util.MAX_IMAGE_SIZE_TO_CACHE&&(W._maybeCleanupAfterRender=!0)}break;case"Pattern":W.objs.resolve(c,U);break;default:throw new Error(`Got unknown object type ${e}`)}}),o.on("DocProgress",c=>{this.destroyed||F.onProgress?.({loaded:c.loaded,total:c.total})}),o.on("FetchBuiltInCMap",c=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(c):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),o.on("FetchStandardFontData",c=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(c):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:o,transfers:F}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:o,filename:this._fullReader?.filename??null},F).finally(()=>{this.annotationStorage.resetModified()})}getPage(o){if(!Number.isInteger(o)||o<=0||o>this._numPages)return Promise.reject(new Error("Invalid page request."));const F=o-1,c=this.#n.get(F);if(c)return c;const y=this.messageHandler.sendWithPromise("GetPage",{pageIndex:F}).then(e=>{if(this.destroyed)throw new Error("Transport destroyed");const U=new PDFPageProxy(F,e,this,this._params.pdfBug);return this.#e.set(F,U),U});return this.#n.set(F,y),y}getPageIndex(o){return typeof o!="object"||o===null||!Number.isInteger(o.num)||o.num<0||!Number.isInteger(o.gen)||o.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:o.num,gen:o.gen})}getAnnotations(o,F){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:o,intent:F})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(o){return typeof o!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:o})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(o){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:o})}getStructTree(o){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:o})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(o=>new _optional_content_config.OptionalContentConfig(o))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const o="GetMetadata",F=this.#t.get(o);if(F)return F;const c=this.messageHandler.sendWithPromise(o,null).then(y=>({info:y[0],metadata:y[1]?new _metadata.Metadata(y[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(o,c),c}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(o=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const F of this.#e.values())if(!F.cleanup())throw new Error(`startCleanup: Page ${F.pageNumber} is currently rendering.`);this.commonObjs.clear(),o||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:o,enableXfa:F}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:o,enableXfa:F})}}class PDFObjects{#t=Object.create(null);#e(o){const F=this.#t[o];return F||(this.#t[o]={capability:new _util.PromiseCapability,data:null})}get(o,F=null){if(F){const y=this.#e(o);return y.capability.promise.then(()=>F(y.data)),null}const c=this.#t[o];if(!c?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${o}.`);return c.data}has(o){return this.#t[o]?.capability.settled||!1}resolve(o,F=null){const c=this.#e(o);c.data=F,c.capability.resolve()}clear(){for(const o in this.#t){const{data:F}=this.#t[o];F?.bitmap?.close()}this.#t=Object.create(null)}}class RenderTask{#t=null;constructor(o){this.#t=o,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(o=0){this.#t.cancel(null,o)}get separateAnnots(){const{separateAnnots:o}=this.#t.operatorList;if(!o)return!1;const{annotationCanvasMap:F}=this.#t;return o.form||o.canvas&&F?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#t=new WeakSet;constructor({callback:o,params:F,objs:c,commonObjs:y,annotationCanvasMap:e,operatorList:U,pageIndex:W,canvasFactory:R,filterFactory:t,useRequestAnimationFrame:n=!1,pdfBug:v=!1,pageColors:a=null}){this.callback=o,this.params=F,this.objs=c,this.commonObjs=y,this.annotationCanvasMap=e,this.operatorListIdx=null,this.operatorList=U,this._pageIndex=W,this.canvasFactory=R,this.filterFactory=t,this._pdfBug=v,this.pageColors=a,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=n===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=F.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:o=!1,optionalContentConfig:F}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:c,viewport:y,transform:e,background:U}=this.params;this.gfx=new _canvas.CanvasGraphics(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:F},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:e,viewport:y,transparency:o,background:U}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(o=null,F=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this._canvas&&InternalRenderTask.#t.delete(this._canvas),this.callback(o||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,F))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&InternalRenderTask.#t.delete(this._canvas),this.callback())))}}const version="3.9.179";exports.version=version;const build="1ef6fbc52";exports.build=build}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SerializableEmpty=o.PrintAnnotationStorage=o.AnnotationStorage=void 0;var c=F(1),y=F(4),e=F(8);const U=Object.freeze({map:null,hash:"",transfers:void 0});o.SerializableEmpty=U;class W{#t=!1;#e=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(n,v){const a=this.#e.get(n);return a===void 0?v:Object.assign(v,a)}getRawValue(n){return this.#e.get(n)}remove(n){if(this.#e.delete(n),this.#e.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const v of this.#e.values())if(v instanceof y.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(n,v){const a=this.#e.get(n);let u=!1;if(a!==void 0)for(const[i,_]of Object.entries(v))a[i]!==_&&(u=!0,a[i]=_);else u=!0,this.#e.set(n,v);u&&this.#n(),v instanceof y.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(v.constructor._type)}has(n){return this.#e.has(n)}getAll(){return this.#e.size>0?(0,c.objectFromMap)(this.#e):null}setAll(n){for(const[v,a]of Object.entries(n))this.setValue(v,a)}get size(){return this.#e.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new R(this)}get serializable(){if(this.#e.size===0)return U;const n=new Map,v=new e.MurmurHash3_64,a=[],u=Object.create(null);let i=!1;for(const[_,m]of this.#e){const g=m instanceof y.AnnotationEditor?m.serialize(!1,u):m;g&&(n.set(_,g),v.update(`${_}:${JSON.stringify(g)}`),i||=!!g.bitmap)}if(i)for(const _ of n.values())_.bitmap&&a.push(_.bitmap);return n.size>0?{map:n,hash:v.hexdigest(),transfers:a}:U}}o.AnnotationStorage=W;class R extends W{#t;constructor(n){super();const{map:v,hash:a,transfers:u}=n.serializable,i=structuredClone(v,u?{transfer:u}:null);this.#t={map:i,hash:a,transfers:u}}get print(){(0,c.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}}o.PrintAnnotationStorage=R}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationEditor=void 0;var c=F(1),y=F(5);class e{#t=!1;#e=null;#n=null;#i=this.focusin.bind(this);#a=this.focusout.bind(this);#s=!1;#l=!1;#o=!1;_uiManager=null;#u=e._zIndex++;static _colorManager=new y.ColorManager;static _zIndex=1;constructor(R){this.constructor===e&&(0,c.unreachable)("Cannot initialize AnnotationEditor."),this.parent=R.parent,this.id=R.id,this.width=this.height=null,this.pageIndex=R.parent.pageIndex,this.name=R.name,this.div=null,this._uiManager=R.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1;const{rotation:t,rawDims:{pageWidth:n,pageHeight:v,pageX:a,pageY:u}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,v],this.pageTranslation=[a,u];const[i,_]=this.parentDimensions;this.x=R.x/i,this.y=R.y/_,this.isAttachedToDOM=!1,this.deleted=!1}static get _defaultLineColor(){return(0,c.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(R){const t=new U({id:R.parent.getNextId(),parent:R.parent,uiManager:R._uiManager});t.annotationElementId=R.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(R){}static updateDefaultParams(R,t){}static get defaultPropertiesToUpdate(){return[]}get propertiesToUpdate(){return[]}addCommands(R){this._uiManager.addCommands(R)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#u}setParent(R){R!==null&&(this.pageIndex=R.pageIndex,this.pageDimensions=R.pageDimensions),this.parent=R}focusin(R){this.#s?this.#s=!1:this.parent.setSelected(this)}focusout(R){!this.isAttachedToDOM||R.relatedTarget?.closest(`#${this.id}`)||(R.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(R){const t=this.parent.div.getBoundingClientRect();this.startX=R.clientX-t.x,this.startY=R.clientY-t.y,R.dataTransfer.setData("text/plain",this.id),R.dataTransfer.effectAllowed="move"}setAt(R,t,n,v){const[a,u]=this.parentDimensions;[n,v]=this.screenToPageTranslation(n,v),this.x=(R+n)/a,this.y=(t+v)/u,this.fixAndSetPosition()}#r([R,t],n,v){[n,v]=this.screenToPageTranslation(n,v),this.x+=n/R,this.y+=v/t,this.fixAndSetPosition()}translate(R,t){this.#r(this.parentDimensions,R,t)}translateInPage(R,t){this.#r(this.pageDimensions,R,t),this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[R,t]=this.pageDimensions;let{x:n,y:v,width:a,height:u}=this;switch(a*=R,u*=t,n*=R,v*=t,this.rotation){case 0:n=Math.max(0,Math.min(R-a,n)),v=Math.max(0,Math.min(t-u,v));break;case 90:n=Math.max(0,Math.min(R-u,n)),v=Math.min(t,Math.max(a,v));break;case 180:n=Math.min(R,Math.max(a,n)),v=Math.min(t,Math.max(u,v));break;case 270:n=Math.min(R,Math.max(u,n)),v=Math.max(0,Math.min(t-a,v));break}this.x=n/R,this.y=v/t,this.div.style.left=`${(100*this.x).toFixed(2)}%`,this.div.style.top=`${(100*this.y).toFixed(2)}%`}screenToPageTranslation(R,t){switch(this.parentRotation){case 90:return[t,-R];case 180:return[-R,-t];case 270:return[-t,R];default:return[R,t]}}pageTranslationToScreen(R,t){switch(this.parentRotation){case 90:return[-t,R];case 180:return[-R,-t];case 270:return[t,-R];default:return[R,t]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:R}=this._uiManager.viewParameters,[t,n]=this.pageDimensions;return[t*R,n*R]}setDims(R,t){const[n,v]=this.parentDimensions;this.div.style.width=`${(100*R/n).toFixed(2)}%`,this.#t||(this.div.style.height=`${(100*t/v).toFixed(2)}%`)}fixDims(){const{style:R}=this.div,{height:t,width:n}=R,v=n.endsWith("%"),a=!this.#t&&t.endsWith("%");if(v&&a)return;const[u,i]=this.parentDimensions;v||(R.width=`${(100*parseFloat(n)/u).toFixed(2)}%`),!this.#t&&!a&&(R.height=`${(100*parseFloat(t)/i).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#d(){if(this.#e)return;this.#e=document.createElement("div"),this.#e.classList.add("resizers");const R=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||R.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const t of R){const n=document.createElement("div");this.#e.append(n),n.classList.add("resizer",t),n.addEventListener("pointerdown",this.#p.bind(this,t))}this.div.prepend(this.#e)}#p(R,t){t.preventDefault(),this.#n=[t.clientX,t.clientY];const n=this.#h.bind(this,R),v=this.div.draggable;this.div.draggable=!1;const a=`resizing${R.charAt(0).toUpperCase()}${R.slice(1)}`;this.parent.div.classList.add(a);const u={passive:!0,capture:!0};window.addEventListener("pointermove",n,u);const i=()=>{this._uiManager.stopUndoAccumulation(),this.div.draggable=v,this.parent.div.classList.remove(a),window.removeEventListener("pointermove",n,u)};window.addEventListener("pointerup",i,{once:!0})}#h(R,t){const{clientX:n,clientY:v}=t,a=n-this.#n[0],u=v-this.#n[1];this.#n[0]=n,this.#n[1]=v;const[i,_]=this.parentDimensions,m=this.x,g=this.y,C=this.width,H=this.height,I=e.MIN_SIZE/i,p=e.MIN_SIZE/_;let w;const B=Q=>Math.round(Q*1e4)/1e4,K=(Q,et)=>{const[ft,dt]=this.parentDimensions;this.setDims(ft*Q,dt*et),this.fixAndSetPosition()},z=()=>{this.width=C,this.height=H,this.x=m,this.y=g,K(C,H)};switch(R){case"topLeft":{if(Math.sign(a)*Math.sign(u)<0)return;const Q=Math.hypot(a,u),et=Math.hypot(C*i,H*_),ft=B(m+C),dt=B(g+H),pt=Math.max(Math.min(1-Math.sign(a)*(Q/et),1/C,1/H),I/C,p/H),yt=B(C*pt),st=B(H*pt),D=ft-yt,S=dt-st;w=()=>{this.width=yt,this.height=st,this.x=D,this.y=S,K(yt,st)};break}case"topMiddle":{const Q=B(this.y+H),et=B(Math.max(p,Math.min(1,H-u/_))),ft=Q-et;w=()=>{this.height=et,this.y=ft,K(C,et)};break}case"topRight":{if(Math.sign(a)*Math.sign(u)>0)return;const Q=Math.hypot(a,u),et=Math.hypot(this.width*i,this.height*_),ft=B(g+this.height),dt=Math.max(Math.min(1+Math.sign(a)*(Q/et),1/C,1/H),I/C,p/H),pt=B(C*dt),yt=B(H*dt),st=ft-yt;w=()=>{this.width=pt,this.height=yt,this.y=st,K(pt,yt)};break}case"middleRight":{const Q=B(Math.max(I,Math.min(1,C+a/i)));w=()=>{this.width=Q,K(Q,H)};break}case"bottomRight":{if(Math.sign(a)*Math.sign(u)<0)return;const Q=Math.hypot(a,u),et=Math.hypot(this.width*i,this.height*_),ft=Math.max(Math.min(1+Math.sign(a)*(Q/et),1/C,1/H),I/C,p/H),dt=B(C*ft),pt=B(H*ft);w=()=>{this.width=dt,this.height=pt,K(dt,pt)};break}case"bottomMiddle":{const Q=B(Math.max(p,Math.min(1,H+u/_)));w=()=>{this.height=Q,K(C,Q)};break}case"bottomLeft":{if(Math.sign(a)*Math.sign(u)>0)return;const Q=Math.hypot(a,u),et=Math.hypot(this.width*i,this.height*_),ft=B(m+this.width),dt=Math.max(Math.min(1-Math.sign(a)*(Q/et),1/C,1/H),I/C,p/H),pt=B(C*dt),yt=B(H*dt),st=ft-pt;w=()=>{this.width=pt,this.height=yt,this.x=st,K(pt,yt)};break}case"middleLeft":{const Q=B(m+C),et=B(Math.max(I,Math.min(1,C-a/i))),ft=Q-et;w=()=>{this.width=et,this.x=ft,K(et,H)};break}}this.addCommands({cmd:w,undo:z,mustExec:!0,type:c.AnnotationEditorParamsType.RESIZE,overwriteIfSameType:!0,keepUndo:!0})}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#i),this.div.addEventListener("focusout",this.#a);const[R,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/R).toFixed(2)}%`,this.div.style.maxHeight=`${(100*R/t).toFixed(2)}%`);const[n,v]=this.getInitialTranslation();return this.translate(n,v),(0,y.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(R){const{isMac:t}=c.FeatureTest.platform;if(R.button!==0||R.ctrlKey&&t){R.preventDefault();return}R.ctrlKey&&!t||R.shiftKey||R.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this),this.#s=!0}getRect(R,t){const n=this.parentScale,[v,a]=this.pageDimensions,[u,i]=this.pageTranslation,_=R/n,m=t/n,g=this.x*v,C=this.y*a,H=this.width*v,I=this.height*a;switch(this.rotation){case 0:return[g+_+u,a-C-m-I+i,g+_+H+u,a-C-m+i];case 90:return[g+m+u,a-C+_+i,g+m+I+u,a-C+_+H+i];case 180:return[g-_-H+u,a-C+m+i,g-_+u,a-C+m+I+i];case 270:return[g-m-I+u,a-C-_-H+i,g-m+u,a-C-_+i];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(R,t){const[n,v,a,u]=R,i=a-n,_=u-v;switch(this.rotation){case 0:return[n,t-u,i,_];case 90:return[n,t-v,_,i];case 180:return[a,t-v,i,_];case 270:return[a,t-u,_,i];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#o=!0}disableEditMode(){this.#o=!1}isInEditMode(){return this.#o}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#i),this.div?.addEventListener("focusout",this.#a)}serialize(R=!1,t=null){(0,c.unreachable)("An editor must be serializable")}static deserialize(R,t,n){const v=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});v.rotation=R.rotation;const[a,u]=v.pageDimensions,[i,_,m,g]=v.getRectInCurrentCoords(R.rect,u);return v.x=i/a,v.y=_/u,v.width=m/a,v.height=g/u,v}remove(){this.div.removeEventListener("focusin",this.#i),this.div.removeEventListener("focusout",this.#a),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this)}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#d(),this.#e.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#e?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(R,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#l}set isEditing(R){this.#l=R,this.parent&&(R?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(R,t){this.#t=!0;const n=R/t,{style:v}=this.div;v.aspectRatio=n,v.height="auto"}static get MIN_SIZE(){return 16}}o.AnnotationEditor=e;class U extends e{constructor(R){super(R),this.annotationElementId=R.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.KeyboardManager=o.CommandManager=o.ColorManager=o.AnnotationEditorUIManager=void 0,o.bindEvents=e,o.opacityToHex=U;var c=F(1),y=F(6);function e(u,i,_){for(const m of _)i.addEventListener(m,u[m].bind(u))}function U(u){return Math.round(Math.min(255,Math.max(1,255*u))).toString(16).padStart(2,"0")}class W{#t=0;getId(){return`${c.AnnotationEditorPrefix}${this.#t++}`}}class R{#t=(0,c.getUuid)();#e=0;#n=null;async#i(i,_){this.#n||=new Map;let m=this.#n.get(i);if(m===null)return null;if(m?.bitmap)return m.refCounter+=1,m;try{m||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let g;if(typeof _=="string"){m.url=_;const C=await fetch(_);if(!C.ok)throw new Error(C.statusText);g=await C.blob()}else g=m.file=_;if(g.type==="image/svg+xml"){const C=new FileReader,H=new Image,I=new Promise((p,w)=>{H.onload=()=>{m.bitmap=H,m.isSvg=!0,p()},C.onload=()=>{H.src=m.svgUrl=C.result},H.onerror=C.onerror=w});C.readAsDataURL(g),await I}else m.bitmap=await createImageBitmap(g);m.refCounter=1}catch(g){console.error(g),m=null}return this.#n.set(i,m),m&&this.#n.set(m.id,m),m}async getFromFile(i){const{lastModified:_,name:m,size:g,type:C}=i;return this.#i(`${_}_${m}_${g}_${C}`,i)}async getFromUrl(i){return this.#i(i,i)}async getFromId(i){this.#n||=new Map;const _=this.#n.get(i);return _?_.bitmap?(_.refCounter+=1,_):_.file?this.getFromFile(_.file):this.getFromUrl(_.url):null}getSvgUrl(i){const _=this.#n.get(i);return _?.isSvg?_.svgUrl:null}deleteId(i){this.#n||=new Map;const _=this.#n.get(i);_&&(_.refCounter-=1,_.refCounter===0&&(_.bitmap=null))}isValidId(i){return i.startsWith(`image_${this.#t}_`)}}class t{#t=[];#e=!1;#n;#i=-1;constructor(i=128){this.#n=i}add({cmd:i,undo:_,mustExec:m,type:g=NaN,overwriteIfSameType:C=!1,keepUndo:H=!1}){if(m&&i(),this.#e)return;const I={cmd:i,undo:_,type:g};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(I);return}if(C&&this.#t[this.#i].type===g){H&&(I.undo=this.#t[this.#i].undo),this.#t[this.#i]=I;return}const p=this.#i+1;p===this.#n?this.#t.splice(0,1):(this.#i=p,p<this.#t.length&&this.#t.splice(p)),this.#t.push(I)}stopUndoAccumulation(){this.#i!==-1&&(this.#t[this.#i].type=NaN)}undo(){this.#i!==-1&&(this.#e=!0,this.#t[this.#i].undo(),this.#e=!1,this.#i-=1)}redo(){this.#i<this.#t.length-1&&(this.#i+=1,this.#e=!0,this.#t[this.#i].cmd(),this.#e=!1)}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}destroy(){this.#t=null}}o.CommandManager=t;class n{constructor(i){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:_}=c.FeatureTest.platform;for(const[m,g,C={}]of i)for(const H of m){const I=H.startsWith("mac+");_&&I?(this.callbacks.set(H.slice(4),{callback:g,options:C}),this.allKeys.add(H.split("+").at(-1))):!_&&!I&&(this.callbacks.set(H,{callback:g,options:C}),this.allKeys.add(H.split("+").at(-1)))}}#t(i){i.altKey&&this.buffer.push("alt"),i.ctrlKey&&this.buffer.push("ctrl"),i.metaKey&&this.buffer.push("meta"),i.shiftKey&&this.buffer.push("shift"),this.buffer.push(i.key);const _=this.buffer.join("+");return this.buffer.length=0,_}exec(i,_){if(!this.allKeys.has(_.key))return;const m=this.callbacks.get(this.#t(_));if(!m)return;const{callback:g,options:{bubbles:C=!1,args:H=[],checker:I=null}}=m;I&&!I(i,_)||(g.bind(i,...H)(),C||(_.stopPropagation(),_.preventDefault()))}}o.KeyboardManager=n;class v{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const i=new Map([["CanvasText",null],["Canvas",null]]);return(0,y.getColorValues)(i),(0,c.shadow)(this,"_colors",i)}convert(i){const _=(0,y.getRGB)(i);if(!window.matchMedia("(forced-colors: active)").matches)return _;for(const[m,g]of this._colors)if(g.every((C,H)=>C===_[H]))return v._colorsMapping.get(m);return _}getHexCode(i){const _=this._colors.get(i);return _?c.Util.makeHexColor(..._):i}}o.ColorManager=v;class a{#t=null;#e=new Map;#n=new Map;#i=null;#a=new t;#s=0;#l=new Set;#o=null;#u=new Set;#r=null;#d=null;#p=new W;#h=!1;#f=c.AnnotationEditorType.NONE;#c=new Set;#g=null;#v=this.copy.bind(this);#_=this.cut.bind(this);#A=this.paste.bind(this);#T=this.keydown.bind(this);#F=this.onEditingAction.bind(this);#R=this.onPageChanging.bind(this);#L=this.onScaleChanging.bind(this);#O=this.onRotationChanging.bind(this);#I={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#S=[0,0];#w=null;#b=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const i=a.prototype,_=C=>{const{activeElement:H}=document;return H&&C.#b.contains(H)&&C.hasSomethingToControl()},m=this.TRANSLATE_SMALL,g=this.TRANSLATE_BIG;return(0,c.shadow)(this,"_keyboardManager",new n([[["ctrl+a","mac+meta+a"],i.selectAll],[["ctrl+z","mac+meta+z"],i.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],i.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],i.delete],[["Escape","mac+Escape"],i.unselectAll],[["ArrowLeft","mac+ArrowLeft"],i.translateSelectedEditors,{args:[-m,0],checker:_}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],i.translateSelectedEditors,{args:[-g,0],checker:_}],[["ArrowRight","mac+ArrowRight"],i.translateSelectedEditors,{args:[m,0],checker:_}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],i.translateSelectedEditors,{args:[g,0],checker:_}],[["ArrowUp","mac+ArrowUp"],i.translateSelectedEditors,{args:[0,-m],checker:_}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],i.translateSelectedEditors,{args:[0,-g],checker:_}],[["ArrowDown","mac+ArrowDown"],i.translateSelectedEditors,{args:[0,m],checker:_}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],i.translateSelectedEditors,{args:[0,g],checker:_}]]))}constructor(i,_,m,g){this.#b=i,this.#r=_,this.#r._on("editingaction",this.#F),this.#r._on("pagechanging",this.#R),this.#r._on("scalechanging",this.#L),this.#r._on("rotationchanging",this.#O),this.#i=m.annotationStorage,this.#d=m.filterFactory,this.#g=g,this.viewParameters={realScale:y.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#C(),this.#r._off("editingaction",this.#F),this.#r._off("pagechanging",this.#R),this.#r._off("scalechanging",this.#L),this.#r._off("rotationchanging",this.#O);for(const i of this.#n.values())i.destroy();this.#n.clear(),this.#e.clear(),this.#u.clear(),this.#t=null,this.#c.clear(),this.#a.destroy()}get hcmFilter(){return(0,c.shadow)(this,"hcmFilter",this.#g?this.#d.addHCMFilter(this.#g.foreground,this.#g.background):"none")}onPageChanging({pageNumber:i}){this.#s=i-1}focusMainContainer(){this.#b.focus()}addShouldRescale(i){this.#u.add(i)}removeShouldRescale(i){this.#u.delete(i)}onScaleChanging({scale:i}){this.commitOrRemove(),this.viewParameters.realScale=i*y.PixelsPerInch.PDF_TO_CSS_UNITS;for(const _ of this.#u)_.onScaleChanging()}onRotationChanging({pagesRotation:i}){this.commitOrRemove(),this.viewParameters.rotation=i}addToAnnotationStorage(i){!i.isEmpty()&&this.#i&&!this.#i.has(i.id)&&this.#i.setValue(i.id,i)}#D(){window.addEventListener("keydown",this.#T,{capture:!0})}#C(){window.removeEventListener("keydown",this.#T,{capture:!0})}#k(){document.addEventListener("copy",this.#v),document.addEventListener("cut",this.#_),document.addEventListener("paste",this.#A)}#E(){document.removeEventListener("copy",this.#v),document.removeEventListener("cut",this.#_),document.removeEventListener("paste",this.#A)}copy(i){if(i.preventDefault(),this.#t&&this.#t.commitOrRemove(),!this.hasSelection)return;const _=[];for(const m of this.#c){const g=m.serialize(!0);g&&_.push(g)}_.length!==0&&i.clipboardData.setData("application/pdfjs",JSON.stringify(_))}cut(i){this.copy(i),this.delete()}paste(i){i.preventDefault();let _=i.clipboardData.getData("application/pdfjs");if(!_)return;try{_=JSON.parse(_)}catch(g){(0,c.warn)(`paste: "${g.message}".`);return}if(!Array.isArray(_))return;this.unselectAll();const m=this.currentLayer;try{const g=[];for(const I of _){const p=m.deserialize(I);if(!p)return;g.push(p)}const C=()=>{for(const I of g)this.#B(I);this.#M(g)},H=()=>{for(const I of g)I.remove()};this.addCommands({cmd:C,undo:H,mustExec:!0})}catch(g){(0,c.warn)(`paste: "${g.message}".`)}}keydown(i){this.getActive()?.shouldGetKeyboardEvents()||a._keyboardManager.exec(this,i)}onEditingAction(i){["undo","redo","delete","selectAll"].includes(i.name)&&this[i.name]()}#m(i){Object.entries(i).some(([m,g])=>this.#I[m]!==g)&&this.#r.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#I,i)})}#y(i){this.#r.dispatch("annotationeditorparamschanged",{source:this,details:i})}setEditingState(i){i?(this.#D(),this.#k(),this.#m({isEditing:this.#f!==c.AnnotationEditorType.NONE,isEmpty:this.#P(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#C(),this.#E(),this.#m({isEditing:!1}))}registerEditorTypes(i){if(!this.#o){this.#o=i;for(const _ of this.#o)this.#y(_.defaultPropertiesToUpdate)}}getId(){return this.#p.getId()}get currentLayer(){return this.#n.get(this.#s)}get currentPageIndex(){return this.#s}addLayer(i){this.#n.set(i.pageIndex,i),this.#h?i.enable():i.disable()}removeLayer(i){this.#n.delete(i.pageIndex)}updateMode(i,_=null){if(this.#f=i,i===c.AnnotationEditorType.NONE){this.setEditingState(!1),this.#N();return}this.setEditingState(!0),this.#j();for(const m of this.#n.values())m.updateMode(i);if(_){for(const m of this.#e.values())if(m.annotationElementId===_){this.setSelected(m),m.enterInEditMode();break}}}updateToolbar(i){i!==this.#f&&this.#r.dispatch("switchannotationeditormode",{source:this,mode:i})}updateParams(i,_){if(this.#o){for(const m of this.#c)m.updateParams(i,_);for(const m of this.#o)m.updateDefaultParams(i,_)}}#j(){if(!this.#h){this.#h=!0;for(const i of this.#n.values())i.enable()}}#N(){if(this.unselectAll(),this.#h){this.#h=!1;for(const i of this.#n.values())i.disable()}}getEditors(i){const _=[];for(const m of this.#e.values())m.pageIndex===i&&_.push(m);return _}getEditor(i){return this.#e.get(i)}addEditor(i){this.#e.set(i.id,i)}removeEditor(i){this.#e.delete(i.id),this.unselect(i),(!i.annotationElementId||!this.#l.has(i.annotationElementId))&&this.#i?.remove(i.id)}addDeletedAnnotationElement(i){this.#l.add(i.annotationElementId),i.deleted=!0}isDeletedAnnotationElement(i){return this.#l.has(i)}removeDeletedAnnotationElement(i){this.#l.delete(i.annotationElementId),i.deleted=!1}#B(i){const _=this.#n.get(i.pageIndex);_?_.addOrRebuild(i):this.addEditor(i)}setActiveEditor(i){this.#t!==i&&(this.#t=i,i&&this.#y(i.propertiesToUpdate))}toggleSelected(i){if(this.#c.has(i)){this.#c.delete(i),i.unselect(),this.#m({hasSelectedEditor:this.hasSelection});return}this.#c.add(i),i.select(),this.#y(i.propertiesToUpdate),this.#m({hasSelectedEditor:!0})}setSelected(i){for(const _ of this.#c)_!==i&&_.unselect();this.#c.clear(),this.#c.add(i),i.select(),this.#y(i.propertiesToUpdate),this.#m({hasSelectedEditor:!0})}isSelected(i){return this.#c.has(i)}unselect(i){i.unselect(),this.#c.delete(i),this.#m({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#c.size!==0}stopUndoAccumulation(){this.#a.stopUndoAccumulation()}undo(){this.#a.undo(),this.#m({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#P()})}redo(){this.#a.redo(),this.#m({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#P()})}addCommands(i){this.#a.add(i),this.#m({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#P()})}#P(){if(this.#e.size===0)return!0;if(this.#e.size===1)for(const i of this.#e.values())return i.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const i=[...this.#c],_=()=>{for(const g of i)g.remove()},m=()=>{for(const g of i)this.#B(g)};this.addCommands({cmd:_,undo:m,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#M(i){this.#c.clear();for(const _ of i)_.isEmpty()||(this.#c.add(_),_.select());this.#m({hasSelectedEditor:!0})}selectAll(){for(const i of this.#c)i.commit();this.#M(this.#e.values())}unselectAll(){if(this.#t){this.#t.commitOrRemove();return}if(this.hasSelection){for(const i of this.#c)i.unselect();this.#c.clear(),this.#m({hasSelectedEditor:!1})}}translateSelectedEditors(i,_,m=!1){if(m||this.commitOrRemove(),!this.hasSelection)return;this.#S[0]+=i,this.#S[1]+=_;const[g,C]=this.#S,H=[...this.#c],I=1e3;this.#w&&clearTimeout(this.#w),this.#w=setTimeout(()=>{this.#w=null,this.#S[0]=this.#S[1]=0,this.addCommands({cmd:()=>{for(const p of H)this.#e.has(p.id)&&p.translateInPage(g,C)},undo:()=>{for(const p of H)this.#e.has(p.id)&&p.translateInPage(-g,-C)},mustExec:!1})},I);for(const p of H)p.translateInPage(i,_)}isActive(i){return this.#t===i}getActive(){return this.#t}getMode(){return this.#f}get imageManager(){return(0,c.shadow)(this,"imageManager",new R)}}o.AnnotationEditorUIManager=a}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.StatTimer=o.RenderingCancelledException=o.PixelsPerInch=o.PageViewport=o.PDFDateString=o.DOMStandardFontDataFactory=o.DOMSVGFactory=o.DOMFilterFactory=o.DOMCanvasFactory=o.DOMCMapReaderFactory=o.AnnotationPrefix=void 0,o.deprecated=B,o.getColorValues=ft,o.getCurrentTransform=dt,o.getCurrentTransformInverse=pt,o.getFilenameFromUrl=C,o.getPdfFilenameFromUrl=H,o.getRGB=et,o.getXfaPageViewport=Q,o.isDataScheme=m,o.isPdfFile=g,o.isValidFetchUrl=p,o.loadScript=w,o.setLayerDimensions=yt;var c=F(7),y=F(1);const e="http://www.w3.org/2000/svg",U="pdfjs_internal_id_";o.AnnotationPrefix=U;class W{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}o.PixelsPerInch=W;class R extends c.BaseFilterFactory{#t;#e;#n;#i;#a;#s;#l;#o;#u;#r;#d=0;constructor({docId:D,ownerDocument:S=globalThis.document}={}){super(),this.#n=D,this.#i=S}get#p(){return this.#t||=new Map}get#h(){if(!this.#e){const D=this.#i.createElement("div"),{style:S}=D;S.visibility="hidden",S.contain="strict",S.width=S.height=0,S.position="absolute",S.top=S.left=0,S.zIndex=-1;const d=this.#i.createElementNS(e,"svg");d.setAttribute("width",0),d.setAttribute("height",0),this.#e=this.#i.createElementNS(e,"defs"),D.append(d),d.append(this.#e),this.#i.body.append(D)}return this.#e}addFilter(D){if(!D)return"none";let S=this.#p.get(D);if(S)return S;let d,r,f,T;if(D.length===1){const s=D[0],b=new Array(256);for(let E=0;E<256;E++)b[E]=s[E]/255;T=d=r=f=b.join(",")}else{const[s,b,E]=D,k=new Array(256),x=new Array(256),G=new Array(256);for(let X=0;X<256;X++)k[X]=s[X]/255,x[X]=b[X]/255,G[X]=E[X]/255;d=k.join(","),r=x.join(","),f=G.join(","),T=`${d}${r}${f}`}if(S=this.#p.get(T),S)return this.#p.set(D,S),S;const P=`g_${this.#n}_transfer_map_${this.#d++}`,L=`url(#${P})`;this.#p.set(D,L),this.#p.set(T,L);const M=this.#c(P);return this.#v(d,r,f,M),L}addHCMFilter(D,S){const d=`${D}-${S}`;if(this.#s===d)return this.#l;if(this.#s=d,this.#l="none",this.#a?.remove(),!D||!S)return this.#l;const r=this.#_(D);D=y.Util.makeHexColor(...r);const f=this.#_(S);if(S=y.Util.makeHexColor(...f),this.#h.style.color="",D==="#000000"&&S==="#ffffff"||D===S)return this.#l;const T=new Array(256);for(let b=0;b<=255;b++){const E=b/255;T[b]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const P=T.join(","),L=`g_${this.#n}_hcm_filter`,M=this.#o=this.#c(L);this.#v(P,P,P,M),this.#f(M);const s=(b,E)=>{const k=r[b]/255,x=f[b]/255,G=new Array(E+1);for(let X=0;X<=E;X++)G[X]=k+X/E*(x-k);return G.join(",")};return this.#v(s(0,5),s(1,5),s(2,5),M),this.#l=`url(#${L})`,this.#l}addHighlightHCMFilter(D,S,d,r){const f=`${D}-${S}-${d}-${r}`;if(this.#u===f)return this.#r;if(this.#u=f,this.#r="none",this.#o?.remove(),!D||!S)return this.#r;const[T,P]=[D,S].map(this.#_.bind(this));let L=Math.round(.2126*T[0]+.7152*T[1]+.0722*T[2]),M=Math.round(.2126*P[0]+.7152*P[1]+.0722*P[2]),[s,b]=[d,r].map(this.#_.bind(this));M<L&&([L,M,s,b]=[M,L,b,s]),this.#h.style.color="";const E=(G,X,it)=>{const St=new Array(256),rt=(M-L)/it,at=G/255,ut=(X-G)/(255*it);let ht=0;for(let _t=0;_t<=it;_t++){const Ct=Math.round(L+_t*rt),Lt=at+_t*ut;for(let Bt=ht;Bt<=Ct;Bt++)St[Bt]=Lt;ht=Ct+1}for(let _t=ht;_t<256;_t++)St[_t]=St[ht-1];return St.join(",")},k=`g_${this.#n}_hcm_highlight_filter`,x=this.#o=this.#c(k);return this.#f(x),this.#v(E(s[0],b[0],5),E(s[1],b[1],5),E(s[2],b[2],5),x),this.#r=`url(#${k})`,this.#r}destroy(D=!1){D&&(this.#l||this.#r)||(this.#e&&(this.#e.parentNode.parentNode.remove(),this.#e=null),this.#t&&(this.#t.clear(),this.#t=null),this.#d=0)}#f(D){const S=this.#i.createElementNS(e,"feColorMatrix");S.setAttribute("type","matrix"),S.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),D.append(S)}#c(D){const S=this.#i.createElementNS(e,"filter");return S.setAttribute("color-interpolation-filters","sRGB"),S.setAttribute("id",D),this.#h.append(S),S}#g(D,S,d){const r=this.#i.createElementNS(e,S);r.setAttribute("type","discrete"),r.setAttribute("tableValues",d),D.append(r)}#v(D,S,d,r){const f=this.#i.createElementNS(e,"feComponentTransfer");r.append(f),this.#g(f,"feFuncR",D),this.#g(f,"feFuncG",S),this.#g(f,"feFuncB",d)}#_(D){return this.#h.style.color=D,et(getComputedStyle(this.#h).getPropertyValue("color"))}}o.DOMFilterFactory=R;class t extends c.BaseCanvasFactory{constructor({ownerDocument:D=globalThis.document}={}){super(),this._document=D}_createCanvas(D,S){const d=this._document.createElement("canvas");return d.width=D,d.height=S,d}}o.DOMCanvasFactory=t;async function n(st,D=!1){if(p(st,document.baseURI)){const S=await fetch(st);if(!S.ok)throw new Error(S.statusText);return D?new Uint8Array(await S.arrayBuffer()):(0,y.stringToBytes)(await S.text())}return new Promise((S,d)=>{const r=new XMLHttpRequest;r.open("GET",st,!0),D&&(r.responseType="arraybuffer"),r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){let f;if(D&&r.response?f=new Uint8Array(r.response):!D&&r.responseText&&(f=(0,y.stringToBytes)(r.responseText)),f){S(f);return}}d(new Error(r.statusText))}},r.send(null)})}class v extends c.BaseCMapReaderFactory{_fetchData(D,S){return n(D,this.isCompressed).then(d=>({cMapData:d,compressionType:S}))}}o.DOMCMapReaderFactory=v;class a extends c.BaseStandardFontDataFactory{_fetchData(D){return n(D,!0)}}o.DOMStandardFontDataFactory=a;class u extends c.BaseSVGFactory{_createSVG(D){return document.createElementNS(e,D)}}o.DOMSVGFactory=u;class i{constructor({viewBox:D,scale:S,rotation:d,offsetX:r=0,offsetY:f=0,dontFlip:T=!1}){this.viewBox=D,this.scale=S,this.rotation=d,this.offsetX=r,this.offsetY=f;const P=(D[2]+D[0])/2,L=(D[3]+D[1])/2;let M,s,b,E;switch(d%=360,d<0&&(d+=360),d){case 180:M=-1,s=0,b=0,E=1;break;case 90:M=0,s=1,b=1,E=0;break;case 270:M=0,s=-1,b=-1,E=0;break;case 0:M=1,s=0,b=0,E=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}T&&(b=-b,E=-E);let k,x,G,X;M===0?(k=Math.abs(L-D[1])*S+r,x=Math.abs(P-D[0])*S+f,G=(D[3]-D[1])*S,X=(D[2]-D[0])*S):(k=Math.abs(P-D[0])*S+r,x=Math.abs(L-D[1])*S+f,G=(D[2]-D[0])*S,X=(D[3]-D[1])*S),this.transform=[M*S,s*S,b*S,E*S,k-M*S*P-b*S*L,x-s*S*P-E*S*L],this.width=G,this.height=X}get rawDims(){const{viewBox:D}=this;return(0,y.shadow)(this,"rawDims",{pageWidth:D[2]-D[0],pageHeight:D[3]-D[1],pageX:D[0],pageY:D[1]})}clone({scale:D=this.scale,rotation:S=this.rotation,offsetX:d=this.offsetX,offsetY:r=this.offsetY,dontFlip:f=!1}={}){return new i({viewBox:this.viewBox.slice(),scale:D,rotation:S,offsetX:d,offsetY:r,dontFlip:f})}convertToViewportPoint(D,S){return y.Util.applyTransform([D,S],this.transform)}convertToViewportRectangle(D){const S=y.Util.applyTransform([D[0],D[1]],this.transform),d=y.Util.applyTransform([D[2],D[3]],this.transform);return[S[0],S[1],d[0],d[1]]}convertToPdfPoint(D,S){return y.Util.applyInverseTransform([D,S],this.transform)}}o.PageViewport=i;class _ extends y.BaseException{constructor(D,S=0){super(D,"RenderingCancelledException"),this.extraDelay=S}}o.RenderingCancelledException=_;function m(st){const D=st.length;let S=0;for(;S<D&&st[S].trim()==="";)S++;return st.substring(S,S+5).toLowerCase()==="data:"}function g(st){return typeof st=="string"&&/\.pdf$/i.test(st)}function C(st,D=!1){return D||([st]=st.split(/[#?]/,1)),st.substring(st.lastIndexOf("/")+1)}function H(st,D="document.pdf"){if(typeof st!="string")return D;if(m(st))return(0,y.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),D;const S=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=S.exec(st);let f=d.exec(r[1])||d.exec(r[2])||d.exec(r[3]);if(f&&(f=f[0],f.includes("%")))try{f=d.exec(decodeURIComponent(f))[0]}catch{}return f||D}class I{started=Object.create(null);times=[];time(D){D in this.started&&(0,y.warn)(`Timer is already running for ${D}`),this.started[D]=Date.now()}timeEnd(D){D in this.started||(0,y.warn)(`Timer has not been started for ${D}`),this.times.push({name:D,start:this.started[D],end:Date.now()}),delete this.started[D]}toString(){const D=[];let S=0;for(const{name:d}of this.times)S=Math.max(d.length,S);for(const{name:d,start:r,end:f}of this.times)D.push(`${d.padEnd(S)} ${f-r}ms
`);return D.join("")}}o.StatTimer=I;function p(st,D){try{const{protocol:S}=D?new URL(st,D):new URL(st);return S==="http:"||S==="https:"}catch{return!1}}function w(st,D=!1){return new Promise((S,d)=>{const r=document.createElement("script");r.src=st,r.onload=function(f){D&&r.remove(),S(f)},r.onerror=function(){d(new Error(`Cannot load script at: ${r.src}`))},(document.head||document.documentElement).append(r)})}function B(st){console.log("Deprecated API usage: "+st)}let K;class z{static toDateObject(D){if(!D||typeof D!="string")return null;K||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const S=K.exec(D);if(!S)return null;const d=parseInt(S[1],10);let r=parseInt(S[2],10);r=r>=1&&r<=12?r-1:0;let f=parseInt(S[3],10);f=f>=1&&f<=31?f:1;let T=parseInt(S[4],10);T=T>=0&&T<=23?T:0;let P=parseInt(S[5],10);P=P>=0&&P<=59?P:0;let L=parseInt(S[6],10);L=L>=0&&L<=59?L:0;const M=S[7]||"Z";let s=parseInt(S[8],10);s=s>=0&&s<=23?s:0;let b=parseInt(S[9],10)||0;return b=b>=0&&b<=59?b:0,M==="-"?(T+=s,P+=b):M==="+"&&(T-=s,P-=b),new Date(Date.UTC(d,r,f,T,P,L))}}o.PDFDateString=z;function Q(st,{scale:D=1,rotation:S=0}){const{width:d,height:r}=st.attributes.style,f=[0,0,parseInt(d),parseInt(r)];return new i({viewBox:f,scale:D,rotation:S})}function et(st){if(st.startsWith("#")){const D=parseInt(st.slice(1),16);return[(D&16711680)>>16,(D&65280)>>8,D&255]}return st.startsWith("rgb(")?st.slice(4,-1).split(",").map(D=>parseInt(D)):st.startsWith("rgba(")?st.slice(5,-1).split(",").map(D=>parseInt(D)).slice(0,3):((0,y.warn)(`Not a valid color format: "${st}"`),[0,0,0])}function ft(st){const D=document.createElement("span");D.style.visibility="hidden",document.body.append(D);for(const S of st.keys()){D.style.color=S;const d=window.getComputedStyle(D).color;st.set(S,et(d))}D.remove()}function dt(st){const{a:D,b:S,c:d,d:r,e:f,f:T}=st.getTransform();return[D,S,d,r,f,T]}function pt(st){const{a:D,b:S,c:d,d:r,e:f,f:T}=st.getTransform().invertSelf();return[D,S,d,r,f,T]}function yt(st,D,S=!1,d=!0){if(D instanceof i){const{pageWidth:r,pageHeight:f}=D.rawDims,{style:T}=st,P=`calc(var(--scale-factor) * ${r}px)`,L=`calc(var(--scale-factor) * ${f}px)`;!S||D.rotation%180===0?(T.width=P,T.height=L):(T.width=L,T.height=P)}d&&st.setAttribute("data-main-rotation",D.rotation)}}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BaseStandardFontDataFactory=o.BaseSVGFactory=o.BaseFilterFactory=o.BaseCanvasFactory=o.BaseCMapReaderFactory=void 0;var c=F(1);class y{constructor(){this.constructor===y&&(0,c.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(n){return"none"}addHCMFilter(n,v){return"none"}addHighlightHCMFilter(n,v,a,u){return"none"}destroy(n=!1){}}o.BaseFilterFactory=y;class e{constructor(){this.constructor===e&&(0,c.unreachable)("Cannot initialize BaseCanvasFactory.")}create(n,v){if(n<=0||v<=0)throw new Error("Invalid canvas size");const a=this._createCanvas(n,v);return{canvas:a,context:a.getContext("2d")}}reset(n,v,a){if(!n.canvas)throw new Error("Canvas is not specified");if(v<=0||a<=0)throw new Error("Invalid canvas size");n.canvas.width=v,n.canvas.height=a}destroy(n){if(!n.canvas)throw new Error("Canvas is not specified");n.canvas.width=0,n.canvas.height=0,n.canvas=null,n.context=null}_createCanvas(n,v){(0,c.unreachable)("Abstract method `_createCanvas` called.")}}o.BaseCanvasFactory=e;class U{constructor({baseUrl:n=null,isCompressed:v=!0}){this.constructor===U&&(0,c.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=n,this.isCompressed=v}async fetch({name:n}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!n)throw new Error("CMap name must be specified.");const v=this.baseUrl+n+(this.isCompressed?".bcmap":""),a=this.isCompressed?c.CMapCompressionType.BINARY:c.CMapCompressionType.NONE;return this._fetchData(v,a).catch(u=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${v}`)})}_fetchData(n,v){(0,c.unreachable)("Abstract method `_fetchData` called.")}}o.BaseCMapReaderFactory=U;class W{constructor({baseUrl:n=null}){this.constructor===W&&(0,c.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=n}async fetch({filename:n}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!n)throw new Error("Font filename must be specified.");const v=`${this.baseUrl}${n}`;return this._fetchData(v).catch(a=>{throw new Error(`Unable to load font data at: ${v}`)})}_fetchData(n){(0,c.unreachable)("Abstract method `_fetchData` called.")}}o.BaseStandardFontDataFactory=W;class R{constructor(){this.constructor===R&&(0,c.unreachable)("Cannot initialize BaseSVGFactory.")}create(n,v,a=!1){if(n<=0||v<=0)throw new Error("Invalid SVG dimensions");const u=this._createSVG("svg:svg");return u.setAttribute("version","1.1"),a||(u.setAttribute("width",`${n}px`),u.setAttribute("height",`${v}px`)),u.setAttribute("preserveAspectRatio","none"),u.setAttribute("viewBox",`0 0 ${n} ${v}`),u}createElement(n){if(typeof n!="string")throw new Error("Invalid SVG element type");return this._createSVG(n)}_createSVG(n){(0,c.unreachable)("Abstract method `_createSVG` called.")}}o.BaseSVGFactory=R}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MurmurHash3_64=void 0;var c=F(1);const y=3285377520,e=4294901760,U=65535;class W{constructor(t){this.h1=t?t&4294967295:y,this.h2=t?t&4294967295:y}update(t){let n,v;if(typeof t=="string"){n=new Uint8Array(t.length*2),v=0;for(let B=0,K=t.length;B<K;B++){const z=t.charCodeAt(B);z<=255?n[v++]=z:(n[v++]=z>>>8,n[v++]=z&255)}}else if((0,c.isArrayBuffer)(t))n=t.slice(),v=n.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const a=v>>2,u=v-a*4,i=new Uint32Array(n.buffer,0,a);let _=0,m=0,g=this.h1,C=this.h2;const H=3432918353,I=461845907,p=H&U,w=I&U;for(let B=0;B<a;B++)B&1?(_=i[B],_=_*H&e|_*p&U,_=_<<15|_>>>17,_=_*I&e|_*w&U,g^=_,g=g<<13|g>>>19,g=g*5+3864292196):(m=i[B],m=m*H&e|m*p&U,m=m<<15|m>>>17,m=m*I&e|m*w&U,C^=m,C=C<<13|C>>>19,C=C*5+3864292196);switch(_=0,u){case 3:_^=n[a*4+2]<<16;case 2:_^=n[a*4+1]<<8;case 1:_^=n[a*4],_=_*H&e|_*p&U,_=_<<15|_>>>17,_=_*I&e|_*w&U,a&1?g^=_:C^=_}this.h1=g,this.h2=C}hexdigest(){let t=this.h1,n=this.h2;return t^=n>>>1,t=t*3981806797&e|t*36045&U,n=n*4283543511&e|((n<<16|t>>>16)*2950163797&e)>>>16,t^=n>>>1,t=t*444984403&e|t*60499&U,n=n*3301882366&e|((n<<16|t>>>16)*3120437893&e)>>>16,t^=n>>>1,(t>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}o.MurmurHash3_64=W}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FontLoader=o.FontFaceObject=void 0;var c=F(1);class y{#t=new Set;constructor({ownerDocument:W=globalThis.document,styleElement:R=null}){this._document=W,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(W){this.nativeFontFaces.add(W),this._document.fonts.add(W)}removeNativeFontFace(W){this.nativeFontFaces.delete(W),this._document.fonts.delete(W)}insertRule(W){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const R=this.styleElement.sheet;R.insertRule(W,R.cssRules.length)}clear(){for(const W of this.nativeFontFaces)this._document.fonts.delete(W);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(W){if(!(!W||this.#t.has(W.loadedName))){if((0,c.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:R,src:t,style:n}=W,v=new FontFace(R,t,n);this.addNativeFontFace(v);try{await v.load(),this.#t.add(R)}catch{(0,c.warn)(`Cannot load system font: ${W.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(v)}return}(0,c.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(W){if(W.attached||W.missingFile&&!W.systemFontInfo)return;if(W.attached=!0,W.systemFontInfo){await this.loadSystemFont(W.systemFontInfo);return}if(this.isFontLoadingAPISupported){const t=W.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw(0,c.warn)(`Failed to load font '${t.family}': '${n}'.`),W.disableFontFace=!0,n}}return}const R=W.createFontFaceRule();if(R){if(this.insertRule(R),this.isSyncFontLoadingSupported)return;await new Promise(t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(W,n)})}}get isFontLoadingAPISupported(){const W=!!this._document?.fonts;return(0,c.shadow)(this,"isFontLoadingAPISupported",W)}get isSyncFontLoadingSupported(){let W=!1;return(c.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(W=!0),(0,c.shadow)(this,"isSyncFontLoadingSupported",W)}_queueLoadingCallback(W){function R(){for((0,c.assert)(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const v=t.shift();setTimeout(v.callback,0)}}const{loadingRequests:t}=this,n={done:!1,complete:R,callback:W};return t.push(n),n}get _loadTestFont(){const W=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,c.shadow)(this,"_loadTestFont",W)}_prepareFontLoadEvent(W,R){function t(Q,et){return Q.charCodeAt(et)<<24|Q.charCodeAt(et+1)<<16|Q.charCodeAt(et+2)<<8|Q.charCodeAt(et+3)&255}function n(Q,et,ft,dt){const pt=Q.substring(0,et),yt=Q.substring(et+ft);return pt+dt+yt}let v,a;const u=this._document.createElement("canvas");u.width=1,u.height=1;const i=u.getContext("2d");let _=0;function m(Q,et){if(++_>30){(0,c.warn)("Load test font never loaded."),et();return}if(i.font="30px "+Q,i.fillText(".",0,20),i.getImageData(0,0,1,1).data[3]>0){et();return}setTimeout(m.bind(null,Q,et))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let C=this._loadTestFont;C=n(C,976,g.length,g);const I=16,p=1482184792;let w=t(C,I);for(v=0,a=g.length-3;v<a;v+=4)w=w-p+t(g,v)|0;v<g.length&&(w=w-p+t(g+"XXX",v)|0),C=n(C,I,4,(0,c.string32)(w));const B=`url(data:font/opentype;base64,${btoa(C)});`,K=`@font-face {font-family:"${g}";src:${B}}`;this.insertRule(K);const z=this._document.createElement("div");z.style.visibility="hidden",z.style.width=z.style.height="10px",z.style.position="absolute",z.style.top=z.style.left="0px";for(const Q of[W.loadedName,g]){const et=this._document.createElement("span");et.textContent="Hi",et.style.fontFamily=Q,z.append(et)}this._document.body.append(z),m(g,()=>{z.remove(),R.complete()})}}o.FontLoader=y;class e{constructor(W,{isEvalSupported:R=!0,disableFontFace:t=!1,ignoreErrors:n=!1,inspectFont:v=null}){this.compiledGlyphs=Object.create(null);for(const a in W)this[a]=W[a];this.isEvalSupported=R!==!1,this.disableFontFace=t===!0,this.ignoreErrors=n===!0,this._inspectFont=v}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let W;if(!this.cssFontInfo)W=new FontFace(this.loadedName,this.data,{});else{const R={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(R.style=`oblique ${this.cssFontInfo.italicAngle}deg`),W=new FontFace(this.cssFontInfo.fontFamily,this.data,R)}return this._inspectFont?.(this),W}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const W=(0,c.bytesToString)(this.data),R=`url(data:${this.mimetype};base64,${btoa(W)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${R}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${R}}`}return this._inspectFont?.(this,R),t}getPathGenerator(W,R){if(this.compiledGlyphs[R]!==void 0)return this.compiledGlyphs[R];let t;try{t=W.get(this.loadedName+"_path_"+R)}catch(n){if(!this.ignoreErrors)throw n;return(0,c.warn)(`getPathGenerator - ignoring character: "${n}".`),this.compiledGlyphs[R]=function(v,a){}}if(this.isEvalSupported&&c.FeatureTest.isEvalSupported){const n=[];for(const v of t){const a=v.args!==void 0?v.args.join(","):"";n.push("c.",v.cmd,"(",a,`);
`)}return this.compiledGlyphs[R]=new Function("c","size",n.join(""))}return this.compiledGlyphs[R]=function(n,v){for(const a of t)a.cmd==="scale"&&(a.args=[v,-v]),n[a.cmd].apply(n,a.args)}}}o.FontFaceObject=e}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.NodeStandardFontDataFactory=o.NodeFilterFactory=o.NodeCanvasFactory=o.NodeCMapReaderFactory=void 0;var c=F(7);F(1);const y=function(t){return new Promise((n,v)=>{require$$5.readFile(t,(u,i)=>{if(u||!i){v(new Error(u));return}n(new Uint8Array(i))})})};class e extends c.BaseFilterFactory{}o.NodeFilterFactory=e;class U extends c.BaseCanvasFactory{_createCanvas(n,v){return require$$5.createCanvas(n,v)}}o.NodeCanvasFactory=U;class W extends c.BaseCMapReaderFactory{_fetchData(n,v){return y(n).then(a=>({cMapData:a,compressionType:v}))}}o.NodeCMapReaderFactory=W;class R extends c.BaseStandardFontDataFactory{_fetchData(n){return y(n)}}o.NodeStandardFontDataFactory=R}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CanvasGraphics=void 0;var c=F(1),y=F(6),e=F(12),U=F(13);const W=16,R=100,t=4096,n=15,v=10,a=1e3,u=16;function i(S,d){if(S._removeMirroring)throw new Error("Context is already forwarding operations.");S.__originalSave=S.save,S.__originalRestore=S.restore,S.__originalRotate=S.rotate,S.__originalScale=S.scale,S.__originalTranslate=S.translate,S.__originalTransform=S.transform,S.__originalSetTransform=S.setTransform,S.__originalResetTransform=S.resetTransform,S.__originalClip=S.clip,S.__originalMoveTo=S.moveTo,S.__originalLineTo=S.lineTo,S.__originalBezierCurveTo=S.bezierCurveTo,S.__originalRect=S.rect,S.__originalClosePath=S.closePath,S.__originalBeginPath=S.beginPath,S._removeMirroring=()=>{S.save=S.__originalSave,S.restore=S.__originalRestore,S.rotate=S.__originalRotate,S.scale=S.__originalScale,S.translate=S.__originalTranslate,S.transform=S.__originalTransform,S.setTransform=S.__originalSetTransform,S.resetTransform=S.__originalResetTransform,S.clip=S.__originalClip,S.moveTo=S.__originalMoveTo,S.lineTo=S.__originalLineTo,S.bezierCurveTo=S.__originalBezierCurveTo,S.rect=S.__originalRect,S.closePath=S.__originalClosePath,S.beginPath=S.__originalBeginPath,delete S._removeMirroring},S.save=function(){d.save(),this.__originalSave()},S.restore=function(){d.restore(),this.__originalRestore()},S.translate=function(f,T){d.translate(f,T),this.__originalTranslate(f,T)},S.scale=function(f,T){d.scale(f,T),this.__originalScale(f,T)},S.transform=function(f,T,P,L,M,s){d.transform(f,T,P,L,M,s),this.__originalTransform(f,T,P,L,M,s)},S.setTransform=function(f,T,P,L,M,s){d.setTransform(f,T,P,L,M,s),this.__originalSetTransform(f,T,P,L,M,s)},S.resetTransform=function(){d.resetTransform(),this.__originalResetTransform()},S.rotate=function(f){d.rotate(f),this.__originalRotate(f)},S.clip=function(f){d.clip(f),this.__originalClip(f)},S.moveTo=function(r,f){d.moveTo(r,f),this.__originalMoveTo(r,f)},S.lineTo=function(r,f){d.lineTo(r,f),this.__originalLineTo(r,f)},S.bezierCurveTo=function(r,f,T,P,L,M){d.bezierCurveTo(r,f,T,P,L,M),this.__originalBezierCurveTo(r,f,T,P,L,M)},S.rect=function(r,f,T,P){d.rect(r,f,T,P),this.__originalRect(r,f,T,P)},S.closePath=function(){d.closePath(),this.__originalClosePath()},S.beginPath=function(){d.beginPath(),this.__originalBeginPath()}}class _{constructor(d){this.canvasFactory=d,this.cache=Object.create(null)}getCanvas(d,r,f){let T;return this.cache[d]!==void 0?(T=this.cache[d],this.canvasFactory.reset(T,r,f)):(T=this.canvasFactory.create(r,f),this.cache[d]=T),T}delete(d){delete this.cache[d]}clear(){for(const d in this.cache){const r=this.cache[d];this.canvasFactory.destroy(r),delete this.cache[d]}}}function m(S,d,r,f,T,P,L,M,s,b){const[E,k,x,G,X,it]=(0,y.getCurrentTransform)(S);if(k===0&&x===0){const at=L*E+X,ut=Math.round(at),ht=M*G+it,_t=Math.round(ht),Ct=(L+s)*E+X,Lt=Math.abs(Math.round(Ct)-ut)||1,Bt=(M+b)*G+it,$t=Math.abs(Math.round(Bt)-_t)||1;return S.setTransform(Math.sign(E),0,0,Math.sign(G),ut,_t),S.drawImage(d,r,f,T,P,0,0,Lt,$t),S.setTransform(E,k,x,G,X,it),[Lt,$t]}if(E===0&&G===0){const at=M*x+X,ut=Math.round(at),ht=L*k+it,_t=Math.round(ht),Ct=(M+b)*x+X,Lt=Math.abs(Math.round(Ct)-ut)||1,Bt=(L+s)*k+it,$t=Math.abs(Math.round(Bt)-_t)||1;return S.setTransform(0,Math.sign(k),Math.sign(x),0,ut,_t),S.drawImage(d,r,f,T,P,0,0,$t,Lt),S.setTransform(E,k,x,G,X,it),[$t,Lt]}S.drawImage(d,r,f,T,P,L,M,s,b);const St=Math.hypot(E,k),rt=Math.hypot(x,G);return[St*s,rt*b]}function g(S){const{width:d,height:r}=S;if(d>a||r>a)return null;const f=1e3,T=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),P=d+1;let L=new Uint8Array(P*(r+1)),M,s,b;const E=d+7&-8;let k=new Uint8Array(E*r),x=0;for(const rt of S.data){let at=128;for(;at>0;)k[x++]=rt&at?0:255,at>>=1}let G=0;for(x=0,k[x]!==0&&(L[0]=1,++G),s=1;s<d;s++)k[x]!==k[x+1]&&(L[s]=k[x]?2:1,++G),x++;for(k[x]!==0&&(L[s]=2,++G),M=1;M<r;M++){x=M*E,b=M*P,k[x-E]!==k[x]&&(L[b]=k[x]?1:8,++G);let rt=(k[x]?4:0)+(k[x-E]?8:0);for(s=1;s<d;s++)rt=(rt>>2)+(k[x+1]?4:0)+(k[x-E+1]?8:0),T[rt]&&(L[b+s]=T[rt],++G),x++;if(k[x-E]!==k[x]&&(L[b+s]=k[x]?2:4,++G),G>f)return null}for(x=E*(r-1),b=M*P,k[x]!==0&&(L[b]=8,++G),s=1;s<d;s++)k[x]!==k[x+1]&&(L[b+s]=k[x]?4:8,++G),x++;if(k[x]!==0&&(L[b+s]=4,++G),G>f)return null;const X=new Int32Array([0,P,-1,0,-P,0,0,0,1]),it=new Path2D;for(M=0;G&&M<=r;M++){let rt=M*P;const at=rt+d;for(;rt<at&&!L[rt];)rt++;if(rt===at)continue;it.moveTo(rt%P,M);const ut=rt;let ht=L[rt];do{const _t=X[ht];do rt+=_t;while(!L[rt]);const Ct=L[rt];Ct!==5&&Ct!==10?(ht=Ct,L[rt]=0):(ht=Ct&51*ht>>4,L[rt]&=ht>>2|ht<<2),it.lineTo(rt%P,rt/P|0),L[rt]||--G}while(ut!==rt);--M}return k=null,L=null,function(rt){rt.save(),rt.scale(1/d,-1/r),rt.translate(0,-r),rt.fill(it),rt.beginPath(),rt.restore()}}class C{constructor(d,r){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=c.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=c.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=c.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,d,r])}clone(){const d=Object.create(this);return d.clipBox=this.clipBox.slice(),d}setCurrentPoint(d,r){this.x=d,this.y=r}updatePathMinMax(d,r,f){[r,f]=c.Util.applyTransform([r,f],d),this.minX=Math.min(this.minX,r),this.minY=Math.min(this.minY,f),this.maxX=Math.max(this.maxX,r),this.maxY=Math.max(this.maxY,f)}updateRectMinMax(d,r){const f=c.Util.applyTransform(r,d),T=c.Util.applyTransform(r.slice(2),d);this.minX=Math.min(this.minX,f[0],T[0]),this.minY=Math.min(this.minY,f[1],T[1]),this.maxX=Math.max(this.maxX,f[0],T[0]),this.maxY=Math.max(this.maxY,f[1],T[1])}updateScalingPathMinMax(d,r){c.Util.scaleMinMax(d,r),this.minX=Math.min(this.minX,r[0]),this.maxX=Math.max(this.maxX,r[1]),this.minY=Math.min(this.minY,r[2]),this.maxY=Math.max(this.maxY,r[3])}updateCurvePathMinMax(d,r,f,T,P,L,M,s,b,E){const k=c.Util.bezierBoundingBox(r,f,T,P,L,M,s,b);if(E){E[0]=Math.min(E[0],k[0],k[2]),E[1]=Math.max(E[1],k[0],k[2]),E[2]=Math.min(E[2],k[1],k[3]),E[3]=Math.max(E[3],k[1],k[3]);return}this.updateRectMinMax(d,k)}getPathBoundingBox(d=e.PathType.FILL,r=null){const f=[this.minX,this.minY,this.maxX,this.maxY];if(d===e.PathType.STROKE){r||(0,c.unreachable)("Stroke bounding box must include transform.");const T=c.Util.singularValueDecompose2dScale(r),P=T[0]*this.lineWidth/2,L=T[1]*this.lineWidth/2;f[0]-=P,f[1]-=L,f[2]+=P,f[3]+=L}return f}updateClipFromPath(){const d=c.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(d||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(d){this.clipBox=d,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(d=e.PathType.FILL,r=null){return c.Util.intersect(this.clipBox,this.getPathBoundingBox(d,r))}}function H(S,d){if(typeof ImageData<"u"&&d instanceof ImageData){S.putImageData(d,0,0);return}const r=d.height,f=d.width,T=r%u,P=(r-T)/u,L=T===0?P:P+1,M=S.createImageData(f,u);let s=0,b;const E=d.data,k=M.data;let x,G,X,it;if(d.kind===c.ImageKind.GRAYSCALE_1BPP){const St=E.byteLength,rt=new Uint32Array(k.buffer,0,k.byteLength>>2),at=rt.length,ut=f+7>>3,ht=4294967295,_t=c.FeatureTest.isLittleEndian?4278190080:255;for(x=0;x<L;x++){for(X=x<P?u:T,b=0,G=0;G<X;G++){const Ct=St-s;let Lt=0;const Bt=Ct>ut?f:Ct*8-7,$t=Bt&-8;let Yt=0,ne=0;for(;Lt<$t;Lt+=8)ne=E[s++],rt[b++]=ne&128?ht:_t,rt[b++]=ne&64?ht:_t,rt[b++]=ne&32?ht:_t,rt[b++]=ne&16?ht:_t,rt[b++]=ne&8?ht:_t,rt[b++]=ne&4?ht:_t,rt[b++]=ne&2?ht:_t,rt[b++]=ne&1?ht:_t;for(;Lt<Bt;Lt++)Yt===0&&(ne=E[s++],Yt=128),rt[b++]=ne&Yt?ht:_t,Yt>>=1}for(;b<at;)rt[b++]=0;S.putImageData(M,0,x*u)}}else if(d.kind===c.ImageKind.RGBA_32BPP){for(G=0,it=f*u*4,x=0;x<P;x++)k.set(E.subarray(s,s+it)),s+=it,S.putImageData(M,0,G),G+=u;x<L&&(it=f*T*4,k.set(E.subarray(s,s+it)),S.putImageData(M,0,G))}else if(d.kind===c.ImageKind.RGB_24BPP)for(X=u,it=f*X,x=0;x<L;x++){for(x>=P&&(X=T,it=f*X),b=0,G=it;G--;)k[b++]=E[s++],k[b++]=E[s++],k[b++]=E[s++],k[b++]=255;S.putImageData(M,0,x*u)}else throw new Error(`bad image kind: ${d.kind}`)}function I(S,d){if(d.bitmap){S.drawImage(d.bitmap,0,0);return}const r=d.height,f=d.width,T=r%u,P=(r-T)/u,L=T===0?P:P+1,M=S.createImageData(f,u);let s=0;const b=d.data,E=M.data;for(let k=0;k<L;k++){const x=k<P?u:T;({srcPos:s}=(0,U.convertBlackAndWhiteToRGBA)({src:b,srcPos:s,dest:E,width:f,height:x,nonBlackColor:0})),S.putImageData(M,0,k*u)}}function p(S,d){const r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const f of r)S[f]!==void 0&&(d[f]=S[f]);S.setLineDash!==void 0&&(d.setLineDash(S.getLineDash()),d.lineDashOffset=S.lineDashOffset)}function w(S){if(S.strokeStyle=S.fillStyle="#000000",S.fillRule="nonzero",S.globalAlpha=1,S.lineWidth=1,S.lineCap="butt",S.lineJoin="miter",S.miterLimit=10,S.globalCompositeOperation="source-over",S.font="10px sans-serif",S.setLineDash!==void 0&&(S.setLineDash([]),S.lineDashOffset=0),!c.isNodeJS){const{filter:d}=S;d!=="none"&&d!==""&&(S.filter="none")}}function B(S,d,r,f){const T=S.length;for(let P=3;P<T;P+=4){const L=S[P];if(L===0)S[P-3]=d,S[P-2]=r,S[P-1]=f;else if(L<255){const M=255-L;S[P-3]=S[P-3]*L+d*M>>8,S[P-2]=S[P-2]*L+r*M>>8,S[P-1]=S[P-1]*L+f*M>>8}}}function K(S,d,r){const f=S.length,T=1/255;for(let P=3;P<f;P+=4){const L=r?r[S[P]]:S[P];d[P]=d[P]*L*T|0}}function z(S,d,r){const f=S.length;for(let T=3;T<f;T+=4){const P=S[T-3]*77+S[T-2]*152+S[T-1]*28;d[T]=r?d[T]*r[P>>8]>>8:d[T]*P>>16}}function Q(S,d,r,f,T,P,L,M,s,b,E){const k=!!P,x=k?P[0]:0,G=k?P[1]:0,X=k?P[2]:0,it=T==="Luminosity"?z:K,rt=Math.min(f,Math.ceil(1048576/r));for(let at=0;at<f;at+=rt){const ut=Math.min(rt,f-at),ht=S.getImageData(M-b,at+(s-E),r,ut),_t=d.getImageData(M,at+s,r,ut);k&&B(ht.data,x,G,X),it(ht.data,_t.data,L),d.putImageData(_t,M,at+s)}}function et(S,d,r,f){const T=f[0],P=f[1],L=f[2]-T,M=f[3]-P;L===0||M===0||(Q(d.context,r,L,M,d.subtype,d.backdrop,d.transferMap,T,P,d.offsetX,d.offsetY),S.save(),S.globalAlpha=1,S.globalCompositeOperation="source-over",S.setTransform(1,0,0,1,0,0),S.drawImage(r.canvas,0,0),S.restore())}function ft(S,d){const r=c.Util.singularValueDecompose2dScale(S);r[0]=Math.fround(r[0]),r[1]=Math.fround(r[1]);const f=Math.fround((globalThis.devicePixelRatio||1)*y.PixelsPerInch.PDF_TO_CSS_UNITS);return d!==void 0?d:r[0]<=f||r[1]<=f}const dt=["butt","round","square"],pt=["miter","round","bevel"],yt={},st={};class D{constructor(d,r,f,T,P,{optionalContentConfig:L,markedContentStack:M=null},s,b){this.ctx=d,this.current=new C(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=r,this.objs=f,this.canvasFactory=T,this.filterFactory=P,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=M||[],this.optionalContentConfig=L,this.cachedCanvases=new _(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=s,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=b,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(d,r=null){return typeof d=="string"?d.startsWith("g_")?this.commonObjs.get(d):this.objs.get(d):r}beginDrawing({transform:d,viewport:r,transparency:f=!1,background:T=null}){const P=this.ctx.canvas.width,L=this.ctx.canvas.height,M=this.ctx.fillStyle;if(this.ctx.fillStyle=T||"#ffffff",this.ctx.fillRect(0,0,P,L),this.ctx.fillStyle=M,f){const s=this.cachedCanvases.getCanvas("transparent",P,L);this.compositeCtx=this.ctx,this.transparentCanvas=s.canvas,this.ctx=s.context,this.ctx.save(),this.ctx.transform(...(0,y.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),w(this.ctx),d&&(this.ctx.transform(...d),this.outputScaleX=d[0],this.outputScaleY=d[0]),this.ctx.transform(...r.transform),this.viewportScale=r.scale,this.baseTransform=(0,y.getCurrentTransform)(this.ctx)}executeOperatorList(d,r,f,T){const P=d.argsArray,L=d.fnArray;let M=r||0;const s=P.length;if(s===M)return M;const b=s-M>v&&typeof f=="function",E=b?Date.now()+n:0;let k=0;const x=this.commonObjs,G=this.objs;let X;for(;;){if(T!==void 0&&M===T.nextBreakPoint)return T.breakIt(M,f),M;if(X=L[M],X!==c.OPS.dependency)this[X].apply(this,P[M]);else for(const it of P[M]){const St=it.startsWith("g_")?x:G;if(!St.has(it))return St.get(it,f),M}if(M++,M===s)return M;if(b&&++k>v){if(Date.now()>E)return f(),M;k=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const d of this._cachedBitmapsMap.values()){for(const r of d.values())typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&(r.width=r.height=0);d.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const d=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(d!=="none"){const r=this.ctx.filter;this.ctx.filter=d,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=r}}}_scaleImage(d,r){const f=d.width,T=d.height;let P=Math.max(Math.hypot(r[0],r[1]),1),L=Math.max(Math.hypot(r[2],r[3]),1),M=f,s=T,b="prescale1",E,k;for(;P>2&&M>1||L>2&&s>1;){let x=M,G=s;P>2&&M>1&&(x=M>=16384?Math.floor(M/2)-1||1:Math.ceil(M/2),P/=M/x),L>2&&s>1&&(G=s>=16384?Math.floor(s/2)-1||1:Math.ceil(s)/2,L/=s/G),E=this.cachedCanvases.getCanvas(b,x,G),k=E.context,k.clearRect(0,0,x,G),k.drawImage(d,0,0,M,s,0,0,x,G),d=E.canvas,M=x,s=G,b=b==="prescale1"?"prescale2":"prescale1"}return{img:d,paintWidth:M,paintHeight:s}}_createMaskCanvas(d){const r=this.ctx,{width:f,height:T}=d,P=this.current.fillColor,L=this.current.patternFill,M=(0,y.getCurrentTransform)(r);let s,b,E,k;if((d.bitmap||d.data)&&d.count>1){const Lt=d.bitmap||d.data.buffer;b=JSON.stringify(L?M:[M.slice(0,4),P]),s=this._cachedBitmapsMap.get(Lt),s||(s=new Map,this._cachedBitmapsMap.set(Lt,s));const Bt=s.get(b);if(Bt&&!L){const $t=Math.round(Math.min(M[0],M[2])+M[4]),Yt=Math.round(Math.min(M[1],M[3])+M[5]);return{canvas:Bt,offsetX:$t,offsetY:Yt}}E=Bt}E||(k=this.cachedCanvases.getCanvas("maskCanvas",f,T),I(k.context,d));let x=c.Util.transform(M,[1/f,0,0,-1/T,0,0]);x=c.Util.transform(x,[1,0,0,1,0,-T]);const G=c.Util.applyTransform([0,0],x),X=c.Util.applyTransform([f,T],x),it=c.Util.normalizeRect([G[0],G[1],X[0],X[1]]),St=Math.round(it[2]-it[0])||1,rt=Math.round(it[3]-it[1])||1,at=this.cachedCanvases.getCanvas("fillCanvas",St,rt),ut=at.context,ht=Math.min(G[0],X[0]),_t=Math.min(G[1],X[1]);ut.translate(-ht,-_t),ut.transform(...x),E||(E=this._scaleImage(k.canvas,(0,y.getCurrentTransformInverse)(ut)),E=E.img,s&&L&&s.set(b,E)),ut.imageSmoothingEnabled=ft((0,y.getCurrentTransform)(ut),d.interpolate),m(ut,E,0,0,E.width,E.height,0,0,f,T),ut.globalCompositeOperation="source-in";const Ct=c.Util.transform((0,y.getCurrentTransformInverse)(ut),[1,0,0,1,-ht,-_t]);return ut.fillStyle=L?P.getPattern(r,this,Ct,e.PathType.FILL):P,ut.fillRect(0,0,f,T),s&&!L&&(this.cachedCanvases.delete("fillCanvas"),s.set(b,at.canvas)),{canvas:at.canvas,offsetX:Math.round(ht),offsetY:Math.round(_t)}}setLineWidth(d){d!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=d,this.ctx.lineWidth=d}setLineCap(d){this.ctx.lineCap=dt[d]}setLineJoin(d){this.ctx.lineJoin=pt[d]}setMiterLimit(d){this.ctx.miterLimit=d}setDash(d,r){const f=this.ctx;f.setLineDash!==void 0&&(f.setLineDash(d),f.lineDashOffset=r)}setRenderingIntent(d){}setFlatness(d){}setGState(d){for(const[r,f]of d)switch(r){case"LW":this.setLineWidth(f);break;case"LC":this.setLineCap(f);break;case"LJ":this.setLineJoin(f);break;case"ML":this.setMiterLimit(f);break;case"D":this.setDash(f[0],f[1]);break;case"RI":this.setRenderingIntent(f);break;case"FL":this.setFlatness(f);break;case"Font":this.setFont(f[0],f[1]);break;case"CA":this.current.strokeAlpha=f;break;case"ca":this.current.fillAlpha=f,this.ctx.globalAlpha=f;break;case"BM":this.ctx.globalCompositeOperation=f;break;case"SMask":this.current.activeSMask=f?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(f);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const d=this.inSMaskMode;this.current.activeSMask&&!d?this.beginSMaskMode():!this.current.activeSMask&&d&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const d=this.ctx.canvas.width,r=this.ctx.canvas.height,f="smaskGroupAt"+this.groupLevel,T=this.cachedCanvases.getCanvas(f,d,r);this.suspendedCtx=this.ctx,this.ctx=T.context;const P=this.ctx;P.setTransform(...(0,y.getCurrentTransform)(this.suspendedCtx)),p(this.suspendedCtx,P),i(P,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),p(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(d){if(!this.current.activeSMask)return;d?(d[0]=Math.floor(d[0]),d[1]=Math.floor(d[1]),d[2]=Math.ceil(d[2]),d[3]=Math.ceil(d[3])):d=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const r=this.current.activeSMask,f=this.suspendedCtx;et(f,r,this.ctx,d),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(p(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const d=this.current;this.stateStack.push(d),this.current=d.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),p(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(d,r,f,T,P,L){this.ctx.transform(d,r,f,T,P,L),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(d,r,f){const T=this.ctx,P=this.current;let L=P.x,M=P.y,s,b;const E=(0,y.getCurrentTransform)(T),k=E[0]===0&&E[3]===0||E[1]===0&&E[2]===0,x=k?f.slice(0):null;for(let G=0,X=0,it=d.length;G<it;G++)switch(d[G]|0){case c.OPS.rectangle:L=r[X++],M=r[X++];const St=r[X++],rt=r[X++],at=L+St,ut=M+rt;T.moveTo(L,M),St===0||rt===0?T.lineTo(at,ut):(T.lineTo(at,M),T.lineTo(at,ut),T.lineTo(L,ut)),k||P.updateRectMinMax(E,[L,M,at,ut]),T.closePath();break;case c.OPS.moveTo:L=r[X++],M=r[X++],T.moveTo(L,M),k||P.updatePathMinMax(E,L,M);break;case c.OPS.lineTo:L=r[X++],M=r[X++],T.lineTo(L,M),k||P.updatePathMinMax(E,L,M);break;case c.OPS.curveTo:s=L,b=M,L=r[X+4],M=r[X+5],T.bezierCurveTo(r[X],r[X+1],r[X+2],r[X+3],L,M),P.updateCurvePathMinMax(E,s,b,r[X],r[X+1],r[X+2],r[X+3],L,M,x),X+=6;break;case c.OPS.curveTo2:s=L,b=M,T.bezierCurveTo(L,M,r[X],r[X+1],r[X+2],r[X+3]),P.updateCurvePathMinMax(E,s,b,L,M,r[X],r[X+1],r[X+2],r[X+3],x),L=r[X+2],M=r[X+3],X+=4;break;case c.OPS.curveTo3:s=L,b=M,L=r[X+2],M=r[X+3],T.bezierCurveTo(r[X],r[X+1],L,M,L,M),P.updateCurvePathMinMax(E,s,b,r[X],r[X+1],L,M,L,M,x),X+=4;break;case c.OPS.closePath:T.closePath();break}k&&P.updateScalingPathMinMax(E,x),P.setCurrentPoint(L,M)}closePath(){this.ctx.closePath()}stroke(d=!0){const r=this.ctx,f=this.current.strokeColor;r.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof f=="object"&&f?.getPattern?(r.save(),r.strokeStyle=f.getPattern(r,this,(0,y.getCurrentTransformInverse)(r),e.PathType.STROKE),this.rescaleAndStroke(!1),r.restore()):this.rescaleAndStroke(!0)),d&&this.consumePath(this.current.getClippedPathBoundingBox()),r.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(d=!0){const r=this.ctx,f=this.current.fillColor,T=this.current.patternFill;let P=!1;T&&(r.save(),r.fillStyle=f.getPattern(r,this,(0,y.getCurrentTransformInverse)(r),e.PathType.FILL),P=!0);const L=this.current.getClippedPathBoundingBox();this.contentVisible&&L!==null&&(this.pendingEOFill?(r.fill("evenodd"),this.pendingEOFill=!1):r.fill()),P&&r.restore(),d&&this.consumePath(L)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=yt}eoClip(){this.pendingClip=st}beginText(){this.current.textMatrix=c.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const d=this.pendingTextPaths,r=this.ctx;if(d===void 0){r.beginPath();return}r.save(),r.beginPath();for(const f of d)r.setTransform(...f.transform),r.translate(f.x,f.y),f.addToPath(r,f.fontSize);r.restore(),r.clip(),r.beginPath(),delete this.pendingTextPaths}setCharSpacing(d){this.current.charSpacing=d}setWordSpacing(d){this.current.wordSpacing=d}setHScale(d){this.current.textHScale=d/100}setLeading(d){this.current.leading=-d}setFont(d,r){const f=this.commonObjs.get(d),T=this.current;if(!f)throw new Error(`Can't find font for ${d}`);if(T.fontMatrix=f.fontMatrix||c.FONT_IDENTITY_MATRIX,(T.fontMatrix[0]===0||T.fontMatrix[3]===0)&&(0,c.warn)("Invalid font matrix for font "+d),r<0?(r=-r,T.fontDirection=-1):T.fontDirection=1,this.current.font=f,this.current.fontSize=r,f.isType3Font)return;const P=f.loadedName||"sans-serif",L=f.systemFontInfo?.css||`"${P}", ${f.fallbackName}`;let M="normal";f.black?M="900":f.bold&&(M="bold");const s=f.italic?"italic":"normal";let b=r;r<W?b=W:r>R&&(b=R),this.current.fontSizeScale=r/b,this.ctx.font=`${s} ${M} ${b}px ${L}`}setTextRenderingMode(d){this.current.textRenderingMode=d}setTextRise(d){this.current.textRise=d}moveText(d,r){this.current.x=this.current.lineX+=d,this.current.y=this.current.lineY+=r}setLeadingMoveText(d,r){this.setLeading(-r),this.moveText(d,r)}setTextMatrix(d,r,f,T,P,L){this.current.textMatrix=[d,r,f,T,P,L],this.current.textMatrixScale=Math.hypot(d,r),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(d,r,f,T){const P=this.ctx,L=this.current,M=L.font,s=L.textRenderingMode,b=L.fontSize/L.fontSizeScale,E=s&c.TextRenderingMode.FILL_STROKE_MASK,k=!!(s&c.TextRenderingMode.ADD_TO_PATH_FLAG),x=L.patternFill&&!M.missingFile;let G;(M.disableFontFace||k||x)&&(G=M.getPathGenerator(this.commonObjs,d)),M.disableFontFace||x?(P.save(),P.translate(r,f),P.beginPath(),G(P,b),T&&P.setTransform(...T),(E===c.TextRenderingMode.FILL||E===c.TextRenderingMode.FILL_STROKE)&&P.fill(),(E===c.TextRenderingMode.STROKE||E===c.TextRenderingMode.FILL_STROKE)&&P.stroke(),P.restore()):((E===c.TextRenderingMode.FILL||E===c.TextRenderingMode.FILL_STROKE)&&P.fillText(d,r,f),(E===c.TextRenderingMode.STROKE||E===c.TextRenderingMode.FILL_STROKE)&&P.strokeText(d,r,f)),k&&(this.pendingTextPaths||=[]).push({transform:(0,y.getCurrentTransform)(P),x:r,y:f,fontSize:b,addToPath:G})}get isFontSubpixelAAEnabled(){const{context:d}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);d.scale(1.5,1),d.fillText("I",0,10);const r=d.getImageData(0,0,10,10).data;let f=!1;for(let T=3;T<r.length;T+=4)if(r[T]>0&&r[T]<255){f=!0;break}return(0,c.shadow)(this,"isFontSubpixelAAEnabled",f)}showText(d){const r=this.current,f=r.font;if(f.isType3Font)return this.showType3Text(d);const T=r.fontSize;if(T===0)return;const P=this.ctx,L=r.fontSizeScale,M=r.charSpacing,s=r.wordSpacing,b=r.fontDirection,E=r.textHScale*b,k=d.length,x=f.vertical,G=x?1:-1,X=f.defaultVMetrics,it=T*r.fontMatrix[0],St=r.textRenderingMode===c.TextRenderingMode.FILL&&!f.disableFontFace&&!r.patternFill;P.save(),P.transform(...r.textMatrix),P.translate(r.x,r.y+r.textRise),b>0?P.scale(E,-1):P.scale(E,1);let rt;if(r.patternFill){P.save();const Ct=r.fillColor.getPattern(P,this,(0,y.getCurrentTransformInverse)(P),e.PathType.FILL);rt=(0,y.getCurrentTransform)(P),P.restore(),P.fillStyle=Ct}let at=r.lineWidth;const ut=r.textMatrixScale;if(ut===0||at===0){const Ct=r.textRenderingMode&c.TextRenderingMode.FILL_STROKE_MASK;(Ct===c.TextRenderingMode.STROKE||Ct===c.TextRenderingMode.FILL_STROKE)&&(at=this.getSinglePixelWidth())}else at/=ut;if(L!==1&&(P.scale(L,L),at/=L),P.lineWidth=at,f.isInvalidPDFjsFont){const Ct=[];let Lt=0;for(const Bt of d)Ct.push(Bt.unicode),Lt+=Bt.width;P.fillText(Ct.join(""),0,0),r.x+=Lt*it*E,P.restore(),this.compose();return}let ht=0,_t;for(_t=0;_t<k;++_t){const Ct=d[_t];if(typeof Ct=="number"){ht+=G*Ct*T/1e3;continue}let Lt=!1;const Bt=(Ct.isSpace?s:0)+M,$t=Ct.fontChar,Yt=Ct.accent;let ne,xe,Ae=Ct.width;if(x){const Te=Ct.vmetric||X,Ne=-(Ct.vmetric?Te[1]:Ae*.5)*it,Ve=Te[2]*it;Ae=Te?-Te[0]:Ae,ne=Ne/L,xe=(ht+Ve)/L}else ne=ht/L,xe=0;if(f.remeasure&&Ae>0){const Te=P.measureText($t).width*1e3/T*L;if(Ae<Te&&this.isFontSubpixelAAEnabled){const Ne=Ae/Te;Lt=!0,P.save(),P.scale(Ne,1),ne/=Ne}else Ae!==Te&&(ne+=(Ae-Te)/2e3*T/L)}if(this.contentVisible&&(Ct.isInFont||f.missingFile)){if(St&&!Yt)P.fillText($t,ne,xe);else if(this.paintChar($t,ne,xe,rt),Yt){const Te=ne+T*Yt.offset.x/L,Ne=xe-T*Yt.offset.y/L;this.paintChar(Yt.fontChar,Te,Ne,rt)}}const He=x?Ae*it-Bt*b:Ae*it+Bt*b;ht+=He,Lt&&P.restore()}x?r.y-=ht:r.x+=ht*E,P.restore(),this.compose()}showType3Text(d){const r=this.ctx,f=this.current,T=f.font,P=f.fontSize,L=f.fontDirection,M=T.vertical?1:-1,s=f.charSpacing,b=f.wordSpacing,E=f.textHScale*L,k=f.fontMatrix||c.FONT_IDENTITY_MATRIX,x=d.length,G=f.textRenderingMode===c.TextRenderingMode.INVISIBLE;let X,it,St,rt;if(!(G||P===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),r.transform(...f.textMatrix),r.translate(f.x,f.y),r.scale(E,L),X=0;X<x;++X){if(it=d[X],typeof it=="number"){rt=M*it*P/1e3,this.ctx.translate(rt,0),f.x+=rt*E;continue}const at=(it.isSpace?b:0)+s,ut=T.charProcOperatorList[it.operatorListId];if(!ut){(0,c.warn)(`Type3 character "${it.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=it,this.save(),r.scale(P,P),r.transform(...k),this.executeOperatorList(ut),this.restore()),St=c.Util.applyTransform([it.width,0],k)[0]*P+at,r.translate(St,0),f.x+=St*E}r.restore(),this.processingType3=null}}setCharWidth(d,r){}setCharWidthAndBounds(d,r,f,T,P,L){this.ctx.rect(f,T,P-f,L-T),this.ctx.clip(),this.endPath()}getColorN_Pattern(d){let r;if(d[0]==="TilingPattern"){const f=d[1],T=this.baseTransform||(0,y.getCurrentTransform)(this.ctx),P={createCanvasGraphics:L=>new D(L,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};r=new e.TilingPattern(d,f,this.ctx,P,T)}else r=this._getPattern(d[1],d[2]);return r}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(d,r,f){const T=c.Util.makeHexColor(d,r,f);this.ctx.strokeStyle=T,this.current.strokeColor=T}setFillRGBColor(d,r,f){const T=c.Util.makeHexColor(d,r,f);this.ctx.fillStyle=T,this.current.fillColor=T,this.current.patternFill=!1}_getPattern(d,r=null){let f;return this.cachedPatterns.has(d)?f=this.cachedPatterns.get(d):(f=(0,e.getShadingPattern)(this.getObject(d)),this.cachedPatterns.set(d,f)),r&&(f.matrix=r),f}shadingFill(d){if(!this.contentVisible)return;const r=this.ctx;this.save();const f=this._getPattern(d);r.fillStyle=f.getPattern(r,this,(0,y.getCurrentTransformInverse)(r),e.PathType.SHADING);const T=(0,y.getCurrentTransformInverse)(r);if(T){const{width:P,height:L}=r.canvas,[M,s,b,E]=c.Util.getAxialAlignedBoundingBox([0,0,P,L],T);this.ctx.fillRect(M,s,b-M,E-s)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,c.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,c.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(d,r){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(d)&&d.length===6&&this.transform(...d),this.baseTransform=(0,y.getCurrentTransform)(this.ctx),r)){const f=r[2]-r[0],T=r[3]-r[1];this.ctx.rect(r[0],r[1],f,T),this.current.updateRectMinMax((0,y.getCurrentTransform)(this.ctx),r),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(d){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;d.isolated||(0,c.info)("TODO: Support non-isolated groups."),d.knockout&&(0,c.warn)("Knockout groups not supported.");const f=(0,y.getCurrentTransform)(r);if(d.matrix&&r.transform(...d.matrix),!d.bbox)throw new Error("Bounding box is required.");let T=c.Util.getAxialAlignedBoundingBox(d.bbox,(0,y.getCurrentTransform)(r));const P=[0,0,r.canvas.width,r.canvas.height];T=c.Util.intersect(T,P)||[0,0,0,0];const L=Math.floor(T[0]),M=Math.floor(T[1]);let s=Math.max(Math.ceil(T[2])-L,1),b=Math.max(Math.ceil(T[3])-M,1),E=1,k=1;s>t&&(E=s/t,s=t),b>t&&(k=b/t,b=t),this.current.startNewPathAndClipBox([0,0,s,b]);let x="groupAt"+this.groupLevel;d.smask&&(x+="_smask_"+this.smaskCounter++%2);const G=this.cachedCanvases.getCanvas(x,s,b),X=G.context;X.scale(1/E,1/k),X.translate(-L,-M),X.transform(...f),d.smask?this.smaskStack.push({canvas:G.canvas,context:X,offsetX:L,offsetY:M,scaleX:E,scaleY:k,subtype:d.smask.subtype,backdrop:d.smask.backdrop,transferMap:d.smask.transferMap||null,startTransformInverse:null}):(r.setTransform(1,0,0,1,0,0),r.translate(L,M),r.scale(E,k),r.save()),p(r,X),this.ctx=X,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(d){if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,f=this.groupStack.pop();if(this.ctx=f,this.ctx.imageSmoothingEnabled=!1,d.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const T=(0,y.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...T);const P=c.Util.getAxialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],T);this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(P)}}beginAnnotation(d,r,f,T,P){if(this.#t(),w(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(r)&&r.length===4){const L=r[2]-r[0],M=r[3]-r[1];if(P&&this.annotationCanvasMap){f=f.slice(),f[4]-=r[0],f[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=L,r[3]=M;const[s,b]=c.Util.singularValueDecompose2dScale((0,y.getCurrentTransform)(this.ctx)),{viewportScale:E}=this,k=Math.ceil(L*this.outputScaleX*E),x=Math.ceil(M*this.outputScaleY*E);this.annotationCanvas=this.canvasFactory.create(k,x);const{canvas:G,context:X}=this.annotationCanvas;this.annotationCanvasMap.set(d,G),this.annotationCanvas.savedCtx=this.ctx,this.ctx=X,this.ctx.save(),this.ctx.setTransform(s,0,0,-b,0,M*b),w(this.ctx)}else w(this.ctx),this.ctx.rect(r[0],r[1],L,M),this.ctx.clip(),this.endPath()}this.current=new C(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...f),this.transform(...T)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(d){if(!this.contentVisible)return;const r=d.count;d=this.getObject(d.data,d),d.count=r;const f=this.ctx,T=this.processingType3;if(T&&(T.compiled===void 0&&(T.compiled=g(d)),T.compiled)){T.compiled(f);return}const P=this._createMaskCanvas(d),L=P.canvas;f.save(),f.setTransform(1,0,0,1,0,0),f.drawImage(L,P.offsetX,P.offsetY),f.restore(),this.compose()}paintImageMaskXObjectRepeat(d,r,f=0,T=0,P,L){if(!this.contentVisible)return;d=this.getObject(d.data,d);const M=this.ctx;M.save();const s=(0,y.getCurrentTransform)(M);M.transform(r,f,T,P,0,0);const b=this._createMaskCanvas(d);M.setTransform(1,0,0,1,b.offsetX-s[4],b.offsetY-s[5]);for(let E=0,k=L.length;E<k;E+=2){const x=c.Util.transform(s,[r,f,T,P,L[E],L[E+1]]),[G,X]=c.Util.applyTransform([0,0],x);M.drawImage(b.canvas,G,X)}M.restore(),this.compose()}paintImageMaskXObjectGroup(d){if(!this.contentVisible)return;const r=this.ctx,f=this.current.fillColor,T=this.current.patternFill;for(const P of d){const{data:L,width:M,height:s,transform:b}=P,E=this.cachedCanvases.getCanvas("maskCanvas",M,s),k=E.context;k.save();const x=this.getObject(L,P);I(k,x),k.globalCompositeOperation="source-in",k.fillStyle=T?f.getPattern(k,this,(0,y.getCurrentTransformInverse)(r),e.PathType.FILL):f,k.fillRect(0,0,M,s),k.restore(),r.save(),r.transform(...b),r.scale(1,-1),m(r,E.canvas,0,0,M,s,0,-1,1,1),r.restore()}this.compose()}paintImageXObject(d){if(!this.contentVisible)return;const r=this.getObject(d);if(!r){(0,c.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(r)}paintImageXObjectRepeat(d,r,f,T){if(!this.contentVisible)return;const P=this.getObject(d);if(!P){(0,c.warn)("Dependent image isn't ready yet");return}const L=P.width,M=P.height,s=[];for(let b=0,E=T.length;b<E;b+=2)s.push({transform:[r,0,0,f,T[b],T[b+1]],x:0,y:0,w:L,h:M});this.paintInlineImageXObjectGroup(P,s)}applyTransferMapsToCanvas(d){return this.current.transferMaps!=="none"&&(d.filter=this.current.transferMaps,d.drawImage(d.canvas,0,0),d.filter="none"),d.canvas}applyTransferMapsToBitmap(d){if(this.current.transferMaps==="none")return d.bitmap;const{bitmap:r,width:f,height:T}=d,P=this.cachedCanvases.getCanvas("inlineImage",f,T),L=P.context;return L.filter=this.current.transferMaps,L.drawImage(r,0,0),L.filter="none",P.canvas}paintInlineImageXObject(d){if(!this.contentVisible)return;const r=d.width,f=d.height,T=this.ctx;if(this.save(),!c.isNodeJS){const{filter:M}=T;M!=="none"&&M!==""&&(T.filter="none")}T.scale(1/r,-1/f);let P;if(d.bitmap)P=this.applyTransferMapsToBitmap(d);else if(typeof HTMLElement=="function"&&d instanceof HTMLElement||!d.data)P=d;else{const s=this.cachedCanvases.getCanvas("inlineImage",r,f).context;H(s,d),P=this.applyTransferMapsToCanvas(s)}const L=this._scaleImage(P,(0,y.getCurrentTransformInverse)(T));T.imageSmoothingEnabled=ft((0,y.getCurrentTransform)(T),d.interpolate),m(T,L.img,0,0,L.paintWidth,L.paintHeight,0,-f,r,f),this.compose(),this.restore()}paintInlineImageXObjectGroup(d,r){if(!this.contentVisible)return;const f=this.ctx;let T;if(d.bitmap)T=d.bitmap;else{const P=d.width,L=d.height,s=this.cachedCanvases.getCanvas("inlineImage",P,L).context;H(s,d),T=this.applyTransferMapsToCanvas(s)}for(const P of r)f.save(),f.transform(...P.transform),f.scale(1,-1),m(f,T,P.x,P.y,P.w,P.h,0,-1,1,1),f.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(d){}markPointProps(d,r){}beginMarkedContent(d){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(d,r){d==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(d){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(d);const f=this.ctx;this.pendingClip&&(r||(this.pendingClip===st?f.clip("evenodd"):f.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),f.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const d=(0,y.getCurrentTransform)(this.ctx);if(d[1]===0&&d[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(d[0]),Math.abs(d[3]));else{const r=Math.abs(d[0]*d[3]-d[2]*d[1]),f=Math.hypot(d[0],d[2]),T=Math.hypot(d[1],d[3]);this._cachedGetSinglePixelWidth=Math.max(f,T)/r}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:d}=this.current,{a:r,b:f,c:T,d:P}=this.ctx.getTransform();let L,M;if(f===0&&T===0){const s=Math.abs(r),b=Math.abs(P);if(s===b)if(d===0)L=M=1/s;else{const E=s*d;L=M=E<1?1/E:1}else if(d===0)L=1/s,M=1/b;else{const E=s*d,k=b*d;L=E<1?1/E:1,M=k<1?1/k:1}}else{const s=Math.abs(r*P-f*T),b=Math.hypot(r,f),E=Math.hypot(T,P);if(d===0)L=E/s,M=b/s;else{const k=d*s;L=E>k?E/k:1,M=b>k?b/k:1}}this._cachedScaleForStroking[0]=L,this._cachedScaleForStroking[1]=M}return this._cachedScaleForStroking}rescaleAndStroke(d){const{ctx:r}=this,{lineWidth:f}=this.current,[T,P]=this.getScaleForStroking();if(r.lineWidth=f||1,T===1&&P===1){r.stroke();return}const L=r.getLineDash();if(d&&r.save(),r.scale(T,P),L.length>0){const M=Math.max(T,P);r.setLineDash(L.map(s=>s/M)),r.lineDashOffset/=M}r.stroke(),d&&r.restore()}isContentVisible(){for(let d=this.markedContentStack.length-1;d>=0;d--)if(!this.markedContentStack[d].visible)return!1;return!0}}o.CanvasGraphics=D;for(const S in c.OPS)D.prototype[S]!==void 0&&(D.prototype[c.OPS[S]]=D.prototype[S])}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TilingPattern=o.PathType=void 0,o.getShadingPattern=u;var c=F(1),y=F(6);const e={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};o.PathType=e;function U(m,g){if(!g)return;const C=g[2]-g[0],H=g[3]-g[1],I=new Path2D;I.rect(g[0],g[1],C,H),m.clip(I)}class W{constructor(){this.constructor===W&&(0,c.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,c.unreachable)("Abstract method `getPattern` called.")}}class R extends W{constructor(g){super(),this._type=g[1],this._bbox=g[2],this._colorStops=g[3],this._p0=g[4],this._p1=g[5],this._r0=g[6],this._r1=g[7],this.matrix=null}_createGradient(g){let C;this._type==="axial"?C=g.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(C=g.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const H of this._colorStops)C.addColorStop(H[0],H[1]);return C}getPattern(g,C,H,I){let p;if(I===e.STROKE||I===e.FILL){const w=C.current.getClippedPathBoundingBox(I,(0,y.getCurrentTransform)(g))||[0,0,0,0],B=Math.ceil(w[2]-w[0])||1,K=Math.ceil(w[3]-w[1])||1,z=C.cachedCanvases.getCanvas("pattern",B,K,!0),Q=z.context;Q.clearRect(0,0,Q.canvas.width,Q.canvas.height),Q.beginPath(),Q.rect(0,0,Q.canvas.width,Q.canvas.height),Q.translate(-w[0],-w[1]),H=c.Util.transform(H,[1,0,0,1,w[0],w[1]]),Q.transform(...C.baseTransform),this.matrix&&Q.transform(...this.matrix),U(Q,this._bbox),Q.fillStyle=this._createGradient(Q),Q.fill(),p=g.createPattern(z.canvas,"no-repeat");const et=new DOMMatrix(H);p.setTransform(et)}else U(g,this._bbox),p=this._createGradient(g);return p}}function t(m,g,C,H,I,p,w,B){const K=g.coords,z=g.colors,Q=m.data,et=m.width*4;let ft;K[C+1]>K[H+1]&&(ft=C,C=H,H=ft,ft=p,p=w,w=ft),K[H+1]>K[I+1]&&(ft=H,H=I,I=ft,ft=w,w=B,B=ft),K[C+1]>K[H+1]&&(ft=C,C=H,H=ft,ft=p,p=w,w=ft);const dt=(K[C]+g.offsetX)*g.scaleX,pt=(K[C+1]+g.offsetY)*g.scaleY,yt=(K[H]+g.offsetX)*g.scaleX,st=(K[H+1]+g.offsetY)*g.scaleY,D=(K[I]+g.offsetX)*g.scaleX,S=(K[I+1]+g.offsetY)*g.scaleY;if(pt>=S)return;const d=z[p],r=z[p+1],f=z[p+2],T=z[w],P=z[w+1],L=z[w+2],M=z[B],s=z[B+1],b=z[B+2],E=Math.round(pt),k=Math.round(S);let x,G,X,it,St,rt,at,ut;for(let ht=E;ht<=k;ht++){if(ht<st){const $t=ht<pt?0:(pt-ht)/(pt-st);x=dt-(dt-yt)*$t,G=d-(d-T)*$t,X=r-(r-P)*$t,it=f-(f-L)*$t}else{let $t;ht>S?$t=1:st===S?$t=0:$t=(st-ht)/(st-S),x=yt-(yt-D)*$t,G=T-(T-M)*$t,X=P-(P-s)*$t,it=L-(L-b)*$t}let _t;ht<pt?_t=0:ht>S?_t=1:_t=(pt-ht)/(pt-S),St=dt-(dt-D)*_t,rt=d-(d-M)*_t,at=r-(r-s)*_t,ut=f-(f-b)*_t;const Ct=Math.round(Math.min(x,St)),Lt=Math.round(Math.max(x,St));let Bt=et*ht+Ct*4;for(let $t=Ct;$t<=Lt;$t++)_t=(x-$t)/(x-St),_t<0?_t=0:_t>1&&(_t=1),Q[Bt++]=G-(G-rt)*_t|0,Q[Bt++]=X-(X-at)*_t|0,Q[Bt++]=it-(it-ut)*_t|0,Q[Bt++]=255}}function n(m,g,C){const H=g.coords,I=g.colors;let p,w;switch(g.type){case"lattice":const B=g.verticesPerRow,K=Math.floor(H.length/B)-1,z=B-1;for(p=0;p<K;p++){let Q=p*B;for(let et=0;et<z;et++,Q++)t(m,C,H[Q],H[Q+1],H[Q+B],I[Q],I[Q+1],I[Q+B]),t(m,C,H[Q+B+1],H[Q+1],H[Q+B],I[Q+B+1],I[Q+1],I[Q+B])}break;case"triangles":for(p=0,w=H.length;p<w;p+=3)t(m,C,H[p],H[p+1],H[p+2],I[p],I[p+1],I[p+2]);break;default:throw new Error("illegal figure")}}class v extends W{constructor(g){super(),this._coords=g[2],this._colors=g[3],this._figures=g[4],this._bounds=g[5],this._bbox=g[7],this._background=g[8],this.matrix=null}_createMeshCanvas(g,C,H){const B=Math.floor(this._bounds[0]),K=Math.floor(this._bounds[1]),z=Math.ceil(this._bounds[2])-B,Q=Math.ceil(this._bounds[3])-K,et=Math.min(Math.ceil(Math.abs(z*g[0]*1.1)),3e3),ft=Math.min(Math.ceil(Math.abs(Q*g[1]*1.1)),3e3),dt=z/et,pt=Q/ft,yt={coords:this._coords,colors:this._colors,offsetX:-B,offsetY:-K,scaleX:1/dt,scaleY:1/pt},st=et+4,D=ft+4,S=H.getCanvas("mesh",st,D,!1),d=S.context,r=d.createImageData(et,ft);if(C){const T=r.data;for(let P=0,L=T.length;P<L;P+=4)T[P]=C[0],T[P+1]=C[1],T[P+2]=C[2],T[P+3]=255}for(const T of this._figures)n(r,T,yt);return d.putImageData(r,2,2),{canvas:S.canvas,offsetX:B-2*dt,offsetY:K-2*pt,scaleX:dt,scaleY:pt}}getPattern(g,C,H,I){U(g,this._bbox);let p;if(I===e.SHADING)p=c.Util.singularValueDecompose2dScale((0,y.getCurrentTransform)(g));else if(p=c.Util.singularValueDecompose2dScale(C.baseTransform),this.matrix){const B=c.Util.singularValueDecompose2dScale(this.matrix);p=[p[0]*B[0],p[1]*B[1]]}const w=this._createMeshCanvas(p,I===e.SHADING?null:this._background,C.cachedCanvases);return I!==e.SHADING&&(g.setTransform(...C.baseTransform),this.matrix&&g.transform(...this.matrix)),g.translate(w.offsetX,w.offsetY),g.scale(w.scaleX,w.scaleY),g.createPattern(w.canvas,"no-repeat")}}class a extends W{getPattern(){return"hotpink"}}function u(m){switch(m[0]){case"RadialAxial":return new R(m);case"Mesh":return new v(m);case"Dummy":return new a}throw new Error(`Unknown IR type: ${m[0]}`)}const i={COLORED:1,UNCOLORED:2};class _{static MAX_PATTERN_SIZE=3e3;constructor(g,C,H,I,p){this.operatorList=g[2],this.matrix=g[3]||[1,0,0,1,0,0],this.bbox=g[4],this.xstep=g[5],this.ystep=g[6],this.paintType=g[7],this.tilingType=g[8],this.color=C,this.ctx=H,this.canvasGraphicsFactory=I,this.baseTransform=p}createPatternCanvas(g){const C=this.operatorList,H=this.bbox,I=this.xstep,p=this.ystep,w=this.paintType,B=this.tilingType,K=this.color,z=this.canvasGraphicsFactory;(0,c.info)("TilingType: "+B);const Q=H[0],et=H[1],ft=H[2],dt=H[3],pt=c.Util.singularValueDecompose2dScale(this.matrix),yt=c.Util.singularValueDecompose2dScale(this.baseTransform),st=[pt[0]*yt[0],pt[1]*yt[1]],D=this.getSizeAndScale(I,this.ctx.canvas.width,st[0]),S=this.getSizeAndScale(p,this.ctx.canvas.height,st[1]),d=g.cachedCanvases.getCanvas("pattern",D.size,S.size,!0),r=d.context,f=z.createCanvasGraphics(r);f.groupLevel=g.groupLevel,this.setFillAndStrokeStyleToContext(f,w,K);let T=Q,P=et,L=ft,M=dt;return Q<0&&(T=0,L+=Math.abs(Q)),et<0&&(P=0,M+=Math.abs(et)),r.translate(-(D.scale*T),-(S.scale*P)),f.transform(D.scale,0,0,S.scale,0,0),r.save(),this.clipBbox(f,T,P,L,M),f.baseTransform=(0,y.getCurrentTransform)(f.ctx),f.executeOperatorList(C),f.endDrawing(),{canvas:d.canvas,scaleX:D.scale,scaleY:S.scale,offsetX:T,offsetY:P}}getSizeAndScale(g,C,H){g=Math.abs(g);const I=Math.max(_.MAX_PATTERN_SIZE,C);let p=Math.ceil(g*H);return p>=I?p=I:H=p/g,{scale:H,size:p}}clipBbox(g,C,H,I,p){const w=I-C,B=p-H;g.ctx.rect(C,H,w,B),g.current.updateRectMinMax((0,y.getCurrentTransform)(g.ctx),[C,H,I,p]),g.clip(),g.endPath()}setFillAndStrokeStyleToContext(g,C,H){const I=g.ctx,p=g.current;switch(C){case i.COLORED:const w=this.ctx;I.fillStyle=w.fillStyle,I.strokeStyle=w.strokeStyle,p.fillColor=w.fillStyle,p.strokeColor=w.strokeStyle;break;case i.UNCOLORED:const B=c.Util.makeHexColor(H[0],H[1],H[2]);I.fillStyle=B,I.strokeStyle=B,p.fillColor=B,p.strokeColor=B;break;default:throw new c.FormatError(`Unsupported paint type: ${C}`)}}getPattern(g,C,H,I){let p=H;I!==e.SHADING&&(p=c.Util.transform(p,C.baseTransform),this.matrix&&(p=c.Util.transform(p,this.matrix)));const w=this.createPatternCanvas(C);let B=new DOMMatrix(p);B=B.translate(w.offsetX,w.offsetY),B=B.scale(1/w.scaleX,1/w.scaleY);const K=g.createPattern(w.canvas,"repeat");return K.setTransform(B),K}}o.TilingPattern=_}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.convertBlackAndWhiteToRGBA=e,o.convertToRGBA=y,o.grayToRGBA=W;var c=F(1);function y(R){switch(R.kind){case c.ImageKind.GRAYSCALE_1BPP:return e(R);case c.ImageKind.RGB_24BPP:return U(R)}return null}function e({src:R,srcPos:t=0,dest:n,width:v,height:a,nonBlackColor:u=4294967295,inverseDecode:i=!1}){const _=c.FeatureTest.isLittleEndian?4278190080:255,[m,g]=i?[u,_]:[_,u],C=v>>3,H=v&7,I=R.length;n=new Uint32Array(n.buffer);let p=0;for(let w=0;w<a;w++){for(const K=t+C;t<K;t++){const z=t<I?R[t]:255;n[p++]=z&128?g:m,n[p++]=z&64?g:m,n[p++]=z&32?g:m,n[p++]=z&16?g:m,n[p++]=z&8?g:m,n[p++]=z&4?g:m,n[p++]=z&2?g:m,n[p++]=z&1?g:m}if(H===0)continue;const B=t<I?R[t++]:255;for(let K=0;K<H;K++)n[p++]=B&1<<7-K?g:m}return{srcPos:t,destPos:p}}function U({src:R,srcPos:t=0,dest:n,destPos:v=0,width:a,height:u}){let i=0;const _=R.length>>2,m=new Uint32Array(R.buffer,t,_);if(c.FeatureTest.isLittleEndian){for(;i<_-2;i+=3,v+=4){const g=m[i],C=m[i+1],H=m[i+2];n[v]=g|4278190080,n[v+1]=g>>>24|C<<8|4278190080,n[v+2]=C>>>16|H<<16|4278190080,n[v+3]=H>>>8|4278190080}for(let g=i*4,C=R.length;g<C;g+=3)n[v++]=R[g]|R[g+1]<<8|R[g+2]<<16|4278190080}else{for(;i<_-2;i+=3,v+=4){const g=m[i],C=m[i+1],H=m[i+2];n[v]=g|255,n[v+1]=g<<24|C>>>8|255,n[v+2]=C<<16|H>>>16|255,n[v+3]=H<<8|255}for(let g=i*4,C=R.length;g<C;g+=3)n[v++]=R[g]<<24|R[g+1]<<16|R[g+2]<<8|255}return{srcPos:t,destPos:v}}function W(R,t){if(c.FeatureTest.isLittleEndian)for(let n=0,v=R.length;n<v;n++)t[n]=R[n]*65793|4278190080;else for(let n=0,v=R.length;n<v;n++)t[n]=R[n]*16843008|255}}),((h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GlobalWorkerOptions=void 0;const F=Object.create(null);o.GlobalWorkerOptions=F,F.workerPort=null,F.workerSrc=""}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MessageHandler=void 0;var c=F(1);const y={DATA:1,ERROR:2},e={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function U(R){switch(R instanceof Error||typeof R=="object"&&R!==null||(0,c.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),R.name){case"AbortException":return new c.AbortException(R.message);case"MissingPDFException":return new c.MissingPDFException(R.message);case"PasswordException":return new c.PasswordException(R.message,R.code);case"UnexpectedResponseException":return new c.UnexpectedResponseException(R.message,R.status);case"UnknownErrorException":return new c.UnknownErrorException(R.message,R.details);default:return new c.UnknownErrorException(R.message,R.toString())}}class W{constructor(t,n,v){this.sourceName=t,this.targetName=n,this.comObj=v,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=a=>{const u=a.data;if(u.targetName!==this.sourceName)return;if(u.stream){this.#e(u);return}if(u.callback){const _=u.callbackId,m=this.callbackCapabilities[_];if(!m)throw new Error(`Cannot resolve callback ${_}`);if(delete this.callbackCapabilities[_],u.callback===y.DATA)m.resolve(u.data);else if(u.callback===y.ERROR)m.reject(U(u.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[u.action];if(!i)throw new Error(`Unknown action from worker: ${u.action}`);if(u.callbackId){const _=this.sourceName,m=u.sourceName;new Promise(function(g){g(i(u.data))}).then(function(g){v.postMessage({sourceName:_,targetName:m,callback:y.DATA,callbackId:u.callbackId,data:g})},function(g){v.postMessage({sourceName:_,targetName:m,callback:y.ERROR,callbackId:u.callbackId,reason:U(g)})});return}if(u.streamId){this.#t(u);return}i(u.data)},v.addEventListener("message",this._onComObjOnMessage)}on(t,n){const v=this.actionHandler;if(v[t])throw new Error(`There is already an actionName called "${t}"`);v[t]=n}send(t,n,v){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:n},v)}sendWithPromise(t,n,v){const a=this.callbackId++,u=new c.PromiseCapability;this.callbackCapabilities[a]=u;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:n},v)}catch(i){u.reject(i)}return u.promise}sendWithStream(t,n,v,a){const u=this.streamId++,i=this.sourceName,_=this.targetName,m=this.comObj;return new ReadableStream({start:g=>{const C=new c.PromiseCapability;return this.streamControllers[u]={controller:g,startCall:C,pullCall:null,cancelCall:null,isClosed:!1},m.postMessage({sourceName:i,targetName:_,action:t,streamId:u,data:n,desiredSize:g.desiredSize},a),C.promise},pull:g=>{const C=new c.PromiseCapability;return this.streamControllers[u].pullCall=C,m.postMessage({sourceName:i,targetName:_,stream:e.PULL,streamId:u,desiredSize:g.desiredSize}),C.promise},cancel:g=>{(0,c.assert)(g instanceof Error,"cancel must have a valid reason");const C=new c.PromiseCapability;return this.streamControllers[u].cancelCall=C,this.streamControllers[u].isClosed=!0,m.postMessage({sourceName:i,targetName:_,stream:e.CANCEL,streamId:u,reason:U(g)}),C.promise}},v)}#t(t){const n=t.streamId,v=this.sourceName,a=t.sourceName,u=this.comObj,i=this,_=this.actionHandler[t.action],m={enqueue(g,C=1,H){if(this.isCancelled)return;const I=this.desiredSize;this.desiredSize-=C,I>0&&this.desiredSize<=0&&(this.sinkCapability=new c.PromiseCapability,this.ready=this.sinkCapability.promise),u.postMessage({sourceName:v,targetName:a,stream:e.ENQUEUE,streamId:n,chunk:g},H)},close(){this.isCancelled||(this.isCancelled=!0,u.postMessage({sourceName:v,targetName:a,stream:e.CLOSE,streamId:n}),delete i.streamSinks[n])},error(g){(0,c.assert)(g instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,u.postMessage({sourceName:v,targetName:a,stream:e.ERROR,streamId:n,reason:U(g)}))},sinkCapability:new c.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};m.sinkCapability.resolve(),m.ready=m.sinkCapability.promise,this.streamSinks[n]=m,new Promise(function(g){g(_(t.data,m))}).then(function(){u.postMessage({sourceName:v,targetName:a,stream:e.START_COMPLETE,streamId:n,success:!0})},function(g){u.postMessage({sourceName:v,targetName:a,stream:e.START_COMPLETE,streamId:n,reason:U(g)})})}#e(t){const n=t.streamId,v=this.sourceName,a=t.sourceName,u=this.comObj,i=this.streamControllers[n],_=this.streamSinks[n];switch(t.stream){case e.START_COMPLETE:t.success?i.startCall.resolve():i.startCall.reject(U(t.reason));break;case e.PULL_COMPLETE:t.success?i.pullCall.resolve():i.pullCall.reject(U(t.reason));break;case e.PULL:if(!_){u.postMessage({sourceName:v,targetName:a,stream:e.PULL_COMPLETE,streamId:n,success:!0});break}_.desiredSize<=0&&t.desiredSize>0&&_.sinkCapability.resolve(),_.desiredSize=t.desiredSize,new Promise(function(m){m(_.onPull?.())}).then(function(){u.postMessage({sourceName:v,targetName:a,stream:e.PULL_COMPLETE,streamId:n,success:!0})},function(m){u.postMessage({sourceName:v,targetName:a,stream:e.PULL_COMPLETE,streamId:n,reason:U(m)})});break;case e.ENQUEUE:if((0,c.assert)(i,"enqueue should have stream controller"),i.isClosed)break;i.controller.enqueue(t.chunk);break;case e.CLOSE:if((0,c.assert)(i,"close should have stream controller"),i.isClosed)break;i.isClosed=!0,i.controller.close(),this.#n(i,n);break;case e.ERROR:(0,c.assert)(i,"error should have stream controller"),i.controller.error(U(t.reason)),this.#n(i,n);break;case e.CANCEL_COMPLETE:t.success?i.cancelCall.resolve():i.cancelCall.reject(U(t.reason)),this.#n(i,n);break;case e.CANCEL:if(!_)break;new Promise(function(m){m(_.onCancel?.(U(t.reason)))}).then(function(){u.postMessage({sourceName:v,targetName:a,stream:e.CANCEL_COMPLETE,streamId:n,success:!0})},function(m){u.postMessage({sourceName:v,targetName:a,stream:e.CANCEL_COMPLETE,streamId:n,reason:U(m)})}),_.sinkCapability.reject(U(t.reason)),_.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}}async#n(t,n){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[n]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}o.MessageHandler=W}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Metadata=void 0;var c=F(1);class y{#t;#e;constructor({parsedData:U,rawData:W}){this.#t=U,this.#e=W}getRaw(){return this.#e}get(U){return this.#t.get(U)??null}getAll(){return(0,c.objectFromMap)(this.#t)}has(U){return this.#t.has(U)}}o.Metadata=y}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionalContentConfig=void 0;var c=F(1),y=F(8);const e=Symbol("INTERNAL");class U{#t=!0;constructor(t,n){this.name=t,this.intent=n}get visible(){return this.#t}_setVisible(t,n){t!==e&&(0,c.unreachable)("Internal method `_setVisible` called."),this.#t=n}}class W{#t=null;#e=new Map;#n=null;#i=null;constructor(t){if(this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const n of t.groups)this.#e.set(n.id,new U(n.name,n.intent));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(e,!1);for(const n of t.on)this.#e.get(n)._setVisible(e,!0);for(const n of t.off)this.#e.get(n)._setVisible(e,!1);this.#n=this.getHash()}}#a(t){const n=t.length;if(n<2)return!0;const v=t[0];for(let a=1;a<n;a++){const u=t[a];let i;if(Array.isArray(u))i=this.#a(u);else if(this.#e.has(u))i=this.#e.get(u).visible;else return(0,c.warn)(`Optional content group not found: ${u}`),!0;switch(v){case"And":if(!i)return!1;break;case"Or":if(i)return!0;break;case"Not":return!i;default:return!0}}return v==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return(0,c.warn)("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:((0,c.warn)(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#a(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const n of t.ids){if(!this.#e.has(n))return(0,c.warn)(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const n of t.ids){if(!this.#e.has(n))return(0,c.warn)(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const n of t.ids){if(!this.#e.has(n))return(0,c.warn)(`Optional content group not found: ${n}`),!0;if(!this.#e.get(n).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const n of t.ids){if(!this.#e.has(n))return(0,c.warn)(`Optional content group not found: ${n}`),!0;if(this.#e.get(n).visible)return!1}return!0}return(0,c.warn)(`Unknown optional content policy ${t.policy}.`),!0}return(0,c.warn)(`Unknown group type ${t.type}.`),!0}setVisibility(t,n=!0){if(!this.#e.has(t)){(0,c.warn)(`Optional content group not found: ${t}`);return}this.#e.get(t)._setVisible(e,!!n),this.#t=null}get hasInitialVisibility(){return this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?(0,c.objectFromMap)(this.#e):null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new y.MurmurHash3_64;for(const[n,v]of this.#e)t.update(`${n}:${v.visible}`);return this.#t=t.hexdigest()}}o.OptionalContentConfig=W}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFDataTransportStream=void 0;var c=F(1),y=F(6);class e{constructor({length:t,initialData:n,progressiveDone:v=!1,contentDispositionFilename:a=null,disableRange:u=!1,disableStream:i=!1},_){if((0,c.assert)(_,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=v,this._contentDispositionFilename=a,n?.length>0){const m=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;this._queuedChunks.push(m)}this._pdfDataRangeTransport=_,this._isStreamingSupported=!i,this._isRangeSupported=!u,this._contentLength=t,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((m,g)=>{this._onReceiveData({begin:m,chunk:g})}),this._pdfDataRangeTransport.addProgressListener((m,g)=>{this._onProgress({loaded:m,total:g})}),this._pdfDataRangeTransport.addProgressiveReadListener(m=>{this._onReceiveData({chunk:m})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:t,chunk:n}){const v=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(v):this._queuedChunks.push(v);else{const a=this._rangeReaders.some(function(u){return u._begin!==t?!1:(u._enqueue(v),!0)});(0,c.assert)(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const n=this._rangeReaders.indexOf(t);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){(0,c.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new U(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,n){if(n<=this._progressiveDataLength)return null;const v=new W(this,t,n);return this._pdfDataRangeTransport.requestDataRange(t,n),this._rangeReaders.push(v),v}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}o.PDFDataTransportStream=e;class U{constructor(t,n,v=!1,a=null){this._stream=t,this._done=v||!1,this._filename=(0,y.isPdfFile)(a)?a:null,this._queuedChunks=n||[],this._loaded=0;for(const u of this._queuedChunks)this._loaded+=u.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=new c.PromiseCapability;return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class W{constructor(t,n,v){this._stream=t,this._begin=n,this._end=v,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const t=new c.PromiseCapability;return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFFetchStream=void 0;var c=F(1),y=F(20);function e(v,a,u){return{method:"GET",headers:v,signal:u.signal,mode:"cors",credentials:a?"include":"same-origin",redirect:"follow"}}function U(v){const a=new Headers;for(const u in v){const i=v[u];i!==void 0&&a.append(u,i)}return a}function W(v){return v instanceof Uint8Array?v.buffer:v instanceof ArrayBuffer?v:((0,c.warn)(`getArrayBuffer - unexpected data format: ${v}`),new Uint8Array(v).buffer)}class R{constructor(a){this.source=a,this.isHttp=/^https?:/i.test(a.url),this.httpHeaders=this.isHttp&&a.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new t(this),this._fullRequestReader}getRangeReader(a,u){if(u<=this._progressiveDataLength)return null;const i=new n(this,a,u);return this._rangeRequestReaders.push(i),i}cancelAllRequests(a){this._fullRequestReader?.cancel(a);for(const u of this._rangeRequestReaders.slice(0))u.cancel(a)}}o.PDFFetchStream=R;class t{constructor(a){this._stream=a,this._reader=null,this._loaded=0,this._filename=null;const u=a.source;this._withCredentials=u.withCredentials||!1,this._contentLength=u.length,this._headersCapability=new c.PromiseCapability,this._disableRange=u.disableRange||!1,this._rangeChunkSize=u.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!u.disableStream,this._isRangeSupported=!u.disableRange,this._headers=U(this._stream.httpHeaders);const i=u.url;fetch(i,e(this._headers,this._withCredentials,this._abortController)).then(_=>{if(!(0,y.validateResponseStatus)(_.status))throw(0,y.createResponseStatusError)(_.status,i);this._reader=_.body.getReader(),this._headersCapability.resolve();const m=H=>_.headers.get(H),{allowRangeRequests:g,suggestedLength:C}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:m,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=g,this._contentLength=C||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(m),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new c.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:a,done:u}=await this._reader.read();return u?{value:a,done:u}:(this._loaded+=a.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:W(a),done:!1})}cancel(a){this._reader?.cancel(a),this._abortController.abort()}}class n{constructor(a,u,i){this._stream=a,this._reader=null,this._loaded=0;const _=a.source;this._withCredentials=_.withCredentials||!1,this._readCapability=new c.PromiseCapability,this._isStreamingSupported=!_.disableStream,this._abortController=new AbortController,this._headers=U(this._stream.httpHeaders),this._headers.append("Range",`bytes=${u}-${i-1}`);const m=_.url;fetch(m,e(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,y.validateResponseStatus)(g.status))throw(0,y.createResponseStatusError)(g.status,m);this._readCapability.resolve(),this._reader=g.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:a,done:u}=await this._reader.read();return u?{value:a,done:u}:(this._loaded+=a.byteLength,this.onProgress?.({loaded:this._loaded}),{value:W(a),done:!1})}cancel(a){this._reader?.cancel(a),this._abortController.abort()}}}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createResponseStatusError=R,o.extractFilenameFromHeader=W,o.validateRangeRequestCapabilities=U,o.validateResponseStatus=t;var c=F(1),y=F(21),e=F(6);function U({getResponseHeader:n,isHttp:v,rangeChunkSize:a,disableRange:u}){const i={allowRangeRequests:!1,suggestedLength:void 0},_=parseInt(n("Content-Length"),10);return!Number.isInteger(_)||(i.suggestedLength=_,_<=2*a)||u||!v||n("Accept-Ranges")!=="bytes"||(n("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function W(n){const v=n("Content-Disposition");if(v){let a=(0,y.getFilenameFromContentDispositionHeader)(v);if(a.includes("%"))try{a=decodeURIComponent(a)}catch{}if((0,e.isPdfFile)(a))return a}return null}function R(n,v){return n===404||n===0&&v.startsWith("file:")?new c.MissingPDFException('Missing PDF "'+v+'".'):new c.UnexpectedResponseException(`Unexpected server response (${n}) while retrieving PDF "${v}".`,n)}function t(n){return n===200||n===206}}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getFilenameFromContentDispositionHeader=y;var c=F(1);function y(e){let U=!0,W=R("filename\\*","i").exec(e);if(W){W=W[1];let _=a(W);return _=unescape(_),_=u(_),_=i(_),n(_)}if(W=v(e),W){const _=i(W);return n(_)}if(W=R("filename","i").exec(e),W){W=W[1];let _=a(W);return _=i(_),n(_)}function R(_,m){return new RegExp("(?:^|;)\\s*"+_+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function t(_,m){if(_){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const g=new TextDecoder(_,{fatal:!0}),C=(0,c.stringToBytes)(m);m=g.decode(C),U=!1}catch{}}return m}function n(_){return U&&/[\x80-\xff]/.test(_)&&(_=t("utf-8",_),U&&(_=t("iso-8859-1",_))),_}function v(_){const m=[];let g;const C=R("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=C.exec(_))!==null;){let[,I,p,w]=g;if(I=parseInt(I,10),I in m){if(I===0)break;continue}m[I]=[p,w]}const H=[];for(let I=0;I<m.length&&I in m;++I){let[p,w]=m[I];w=a(w),p&&(w=unescape(w),I===0&&(w=u(w))),H.push(w)}return H.join("")}function a(_){if(_.startsWith('"')){const m=_.slice(1).split('\\"');for(let g=0;g<m.length;++g){const C=m[g].indexOf('"');C!==-1&&(m[g]=m[g].slice(0,C),m.length=g+1),m[g]=m[g].replaceAll(/\\(.)/g,"$1")}_=m.join('"')}return _}function u(_){const m=_.indexOf("'");if(m===-1)return _;const g=_.slice(0,m),H=_.slice(m+1).replace(/^[^']*'/,"");return t(g,H)}function i(_){return!_.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(_)?_:_.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,g,C,H){if(C==="q"||C==="Q")return H=H.replaceAll("_"," "),H=H.replaceAll(/=([0-9a-fA-F]{2})/g,function(I,p){return String.fromCharCode(parseInt(p,16))}),t(g,H);try{H=atob(H)}catch{}return t(g,H)})}return""}}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNetworkStream=void 0;var c=F(1),y=F(20);const e=200,U=206;function W(a){const u=a.response;return typeof u!="string"?u:(0,c.stringToBytes)(u).buffer}class R{constructor(u,i={}){this.url=u,this.isHttp=/^https?:/i.test(u),this.httpHeaders=this.isHttp&&i.httpHeaders||Object.create(null),this.withCredentials=i.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(u,i,_){const m={begin:u,end:i};for(const g in _)m[g]=_[g];return this.request(m)}requestFull(u){return this.request(u)}request(u){const i=new XMLHttpRequest,_=this.currXhrId++,m=this.pendingRequests[_]={xhr:i};i.open("GET",this.url),i.withCredentials=this.withCredentials;for(const g in this.httpHeaders){const C=this.httpHeaders[g];C!==void 0&&i.setRequestHeader(g,C)}return this.isHttp&&"begin"in u&&"end"in u?(i.setRequestHeader("Range",`bytes=${u.begin}-${u.end-1}`),m.expectedStatus=U):m.expectedStatus=e,i.responseType="arraybuffer",u.onError&&(i.onerror=function(g){u.onError(i.status)}),i.onreadystatechange=this.onStateChange.bind(this,_),i.onprogress=this.onProgress.bind(this,_),m.onHeadersReceived=u.onHeadersReceived,m.onDone=u.onDone,m.onError=u.onError,m.onProgress=u.onProgress,i.send(null),_}onProgress(u,i){const _=this.pendingRequests[u];_&&_.onProgress?.(i)}onStateChange(u,i){const _=this.pendingRequests[u];if(!_)return;const m=_.xhr;if(m.readyState>=2&&_.onHeadersReceived&&(_.onHeadersReceived(),delete _.onHeadersReceived),m.readyState!==4||!(u in this.pendingRequests))return;if(delete this.pendingRequests[u],m.status===0&&this.isHttp){_.onError?.(m.status);return}const g=m.status||e;if(!(g===e&&_.expectedStatus===U)&&g!==_.expectedStatus){_.onError?.(m.status);return}const H=W(m);if(g===U){const I=m.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(I);_.onDone({begin:parseInt(p[1],10),chunk:H})}else H?_.onDone({begin:0,chunk:H}):_.onError?.(m.status)}getRequestXhr(u){return this.pendingRequests[u].xhr}isPendingRequest(u){return u in this.pendingRequests}abortRequest(u){const i=this.pendingRequests[u].xhr;delete this.pendingRequests[u],i.abort()}}class t{constructor(u){this._source=u,this._manager=new R(u.url,{httpHeaders:u.httpHeaders,withCredentials:u.withCredentials}),this._rangeChunkSize=u.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(u){const i=this._rangeRequestReaders.indexOf(u);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new n(this._manager,this._source),this._fullRequestReader}getRangeReader(u,i){const _=new v(this._manager,u,i);return _.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(_),_}cancelAllRequests(u){this._fullRequestReader?.cancel(u);for(const i of this._rangeRequestReaders.slice(0))i.cancel(u)}}o.PDFNetworkStream=t;class n{constructor(u,i){this._manager=u;const _={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=i.url,this._fullRequestId=u.requestFull(_),this._headersReceivedCapability=new c.PromiseCapability,this._disableRange=i.disableRange||!1,this._contentLength=i.length,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const u=this._fullRequestId,i=this._manager.getRequestXhr(u),_=C=>i.getResponseHeader(C),{allowRangeRequests:m,suggestedLength:g}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});m&&(this._isRangeSupported=!0),this._contentLength=g||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(_),this._isRangeSupported&&this._manager.abortRequest(u),this._headersReceivedCapability.resolve()}_onDone(u){if(u&&(this._requests.length>0?this._requests.shift().resolve({value:u.chunk,done:!1}):this._cachedChunks.push(u.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(u){this._storedError=(0,y.createResponseStatusError)(u,this._url),this._headersReceivedCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(u){this.onProgress?.({loaded:u.loaded,total:u.lengthComputable?u.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const u=new c.PromiseCapability;return this._requests.push(u),u.promise}cancel(u){this._done=!0,this._headersReceivedCapability.reject(u);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class v{constructor(u,i,_){this._manager=u;const m={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=u.url,this._requestId=u.requestRange(i,_,m),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(u){const i=u.chunk;this._requests.length>0?this._requests.shift().resolve({value:i,done:!1}):this._queuedChunk=i,this._done=!0;for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(u){this._storedError=(0,y.createResponseStatusError)(u,this._url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(u){this.isStreamingSupported||this.onProgress?.({loaded:u.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const u=new c.PromiseCapability;return this._requests.push(u),u.promise}cancel(u){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNodeStream=void 0;var c=F(1),y=F(20);const e=/^file:\/\/\/[a-zA-Z]:\//;function U(_){const m=require$$5,g=m.parse(_);return g.protocol==="file:"||g.host?g:/^[a-z]:[/\\]/i.test(_)?m.parse(`file:///${_}`):(g.host||(g.protocol="file:"),g)}class W{constructor(m){this.source=m,this.url=U(m.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&m.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,c.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new u(this):new v(this),this._fullRequestReader}getRangeReader(m,g){if(g<=this._progressiveDataLength)return null;const C=this.isFsUrl?new i(this,m,g):new a(this,m,g);return this._rangeRequestReaders.push(C),C}cancelAllRequests(m){this._fullRequestReader?.cancel(m);for(const g of this._rangeRequestReaders.slice(0))g.cancel(m)}}o.PDFNodeStream=W;class R{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null;const g=m.source;this._contentLength=g.length,this._loaded=0,this._filename=null,this._disableRange=g.disableRange||!1,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!g.disableStream,this._isRangeSupported=!g.disableRange,this._readableStream=null,this._readCapability=new c.PromiseCapability,this._headersCapability=new c.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=new c.PromiseCapability,this.read()):(this._loaded+=m.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",g=>{this._error(g)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new c.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class t{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new c.PromiseCapability;const g=m.source;this._isStreamingSupported=!g.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=new c.PromiseCapability,this.read()):(this._loaded+=m.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",g=>{this._error(g)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function n(_,m){return{protocol:_.protocol,auth:_.auth,host:_.hostname,port:_.port,path:_.path,method:"GET",headers:m}}class v extends R{constructor(m){super(m);const g=C=>{if(C.statusCode===404){const w=new c.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=w,this._headersCapability.reject(w);return}this._headersCapability.resolve(),this._setReadableStream(C);const H=w=>this._readableStream.headers[w.toLowerCase()],{allowRangeRequests:I,suggestedLength:p}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:H,isHttp:m.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=I,this._contentLength=p||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(H)};if(this._request=null,this._url.protocol==="http:"){const C=require$$5;this._request=C.request(n(this._url,m.httpHeaders),g)}else{const C=require$$5;this._request=C.request(n(this._url,m.httpHeaders),g)}this._request.on("error",C=>{this._storedError=C,this._headersCapability.reject(C)}),this._request.end()}}class a extends t{constructor(m,g,C){super(m),this._httpHeaders={};for(const I in m.httpHeaders){const p=m.httpHeaders[I];p!==void 0&&(this._httpHeaders[I]=p)}this._httpHeaders.Range=`bytes=${g}-${C-1}`;const H=I=>{if(I.statusCode===404){const p=new c.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=p;return}this._setReadableStream(I)};if(this._request=null,this._url.protocol==="http:"){const I=require$$5;this._request=I.request(n(this._url,this._httpHeaders),H)}else{const I=require$$5;this._request=I.request(n(this._url,this._httpHeaders),H)}this._request.on("error",I=>{this._storedError=I}),this._request.end()}}class u extends R{constructor(m){super(m);let g=decodeURIComponent(this._url.path);e.test(this._url.href)&&(g=g.replace(/^\//,""));const C=require$$5;C.lstat(g,(H,I)=>{if(H){H.code==="ENOENT"&&(H=new c.MissingPDFException(`Missing PDF "${g}".`)),this._storedError=H,this._headersCapability.reject(H);return}this._contentLength=I.size,this._setReadableStream(C.createReadStream(g)),this._headersCapability.resolve()})}}class i extends t{constructor(m,g,C){super(m);let H=decodeURIComponent(this._url.path);e.test(this._url.href)&&(H=H.replace(/^\//,""));const I=require$$5;this._setReadableStream(I.createReadStream(H,{start:g,end:C-1}))}}}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SVGGraphics=void 0;var c=F(6),y=F(1);const e={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},U="http://www.w3.org/XML/1998/namespace",W="http://www.w3.org/1999/xlink",R=["butt","round","square"],t=["miter","round","bevel"],n=function(I,p="",w=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!w)return URL.createObjectURL(new Blob([I],{type:p}));const B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let K=`data:${p};base64,`;for(let z=0,Q=I.length;z<Q;z+=3){const et=I[z]&255,ft=I[z+1]&255,dt=I[z+2]&255,pt=et>>2,yt=(et&3)<<4|ft>>4,st=z+1<Q?(ft&15)<<2|dt>>6:64,D=z+2<Q?dt&63:64;K+=B[pt]+B[yt]+B[st]+B[D]}return K},v=(function(){const I=new Uint8Array([137,80,78,71,13,10,26,10]),p=12,w=new Int32Array(256);for(let dt=0;dt<256;dt++){let pt=dt;for(let yt=0;yt<8;yt++)pt=pt&1?3988292384^pt>>1&2147483647:pt>>1&2147483647;w[dt]=pt}function B(dt,pt,yt){let st=-1;for(let D=pt;D<yt;D++){const S=(st^dt[D])&255,d=w[S];st=st>>>8^d}return st^-1}function K(dt,pt,yt,st){let D=st;const S=pt.length;yt[D]=S>>24&255,yt[D+1]=S>>16&255,yt[D+2]=S>>8&255,yt[D+3]=S&255,D+=4,yt[D]=dt.charCodeAt(0)&255,yt[D+1]=dt.charCodeAt(1)&255,yt[D+2]=dt.charCodeAt(2)&255,yt[D+3]=dt.charCodeAt(3)&255,D+=4,yt.set(pt,D),D+=pt.length;const d=B(yt,st+4,D);yt[D]=d>>24&255,yt[D+1]=d>>16&255,yt[D+2]=d>>8&255,yt[D+3]=d&255}function z(dt,pt,yt){let st=1,D=0;for(let S=pt;S<yt;++S)st=(st+(dt[S]&255))%65521,D=(D+st)%65521;return D<<16|st}function Q(dt){if(!y.isNodeJS)return et(dt);try{const pt=parseInt(process.versions.node)>=8?dt:Buffer.from(dt),yt=require$$5.deflateSync(pt,{level:9});return yt instanceof Uint8Array?yt:new Uint8Array(yt)}catch(pt){(0,y.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+pt)}return et(dt)}function et(dt){let pt=dt.length;const yt=65535,st=Math.ceil(pt/yt),D=new Uint8Array(2+pt+st*5+4);let S=0;D[S++]=120,D[S++]=156;let d=0;for(;pt>yt;)D[S++]=0,D[S++]=255,D[S++]=255,D[S++]=0,D[S++]=0,D.set(dt.subarray(d,d+yt),S),S+=yt,d+=yt,pt-=yt;D[S++]=1,D[S++]=pt&255,D[S++]=pt>>8&255,D[S++]=~pt&65535&255,D[S++]=(~pt&65535)>>8&255,D.set(dt.subarray(d),S),S+=dt.length-d;const r=z(dt,0,dt.length);return D[S++]=r>>24&255,D[S++]=r>>16&255,D[S++]=r>>8&255,D[S++]=r&255,D}function ft(dt,pt,yt,st){const D=dt.width,S=dt.height;let d,r,f;const T=dt.data;switch(pt){case y.ImageKind.GRAYSCALE_1BPP:r=0,d=1,f=D+7>>3;break;case y.ImageKind.RGB_24BPP:r=2,d=8,f=D*3;break;case y.ImageKind.RGBA_32BPP:r=6,d=8,f=D*4;break;default:throw new Error("invalid format")}const P=new Uint8Array((1+f)*S);let L=0,M=0;for(let G=0;G<S;++G)P[L++]=0,P.set(T.subarray(M,M+f),L),M+=f,L+=f;if(pt===y.ImageKind.GRAYSCALE_1BPP&&st){L=0;for(let G=0;G<S;G++){L++;for(let X=0;X<f;X++)P[L++]^=255}}const s=new Uint8Array([D>>24&255,D>>16&255,D>>8&255,D&255,S>>24&255,S>>16&255,S>>8&255,S&255,d,r,0,0,0]),b=Q(P),E=I.length+p*3+s.length+b.length,k=new Uint8Array(E);let x=0;return k.set(I,x),x+=I.length,K("IHDR",s,k,x),x+=p+s.length,K("IDATA",b,k,x),x+=p+b.length,K("IEND",new Uint8Array(0),k,x),n(k,"image/png",yt)}return function(pt,yt,st){const D=pt.kind===void 0?y.ImageKind.GRAYSCALE_1BPP:pt.kind;return ft(pt,D,yt,st)}})();class a{constructor(){this.fontSizeScale=1,this.fontWeight=e.fontWeight,this.fontSize=0,this.textMatrix=y.IDENTITY_MATRIX,this.fontMatrix=y.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=y.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=e.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(p,w){this.x=p,this.y=w}}function u(I){let p=[];const w=[];for(const B of I){if(B.fn==="save"){p.push({fnId:92,fn:"group",items:[]}),w.push(p),p=p.at(-1).items;continue}B.fn==="restore"?p=w.pop():p.push(B)}return p}function i(I){if(Number.isInteger(I))return I.toString();const p=I.toFixed(10);let w=p.length-1;if(p[w]!=="0")return p;do w--;while(p[w]==="0");return p.substring(0,p[w]==="."?w:w+1)}function _(I){if(I[4]===0&&I[5]===0){if(I[1]===0&&I[2]===0)return I[0]===1&&I[3]===1?"":`scale(${i(I[0])} ${i(I[3])})`;if(I[0]===I[3]&&I[1]===-I[2]){const p=Math.acos(I[0])*180/Math.PI;return`rotate(${i(p)})`}}else if(I[0]===1&&I[1]===0&&I[2]===0&&I[3]===1)return`translate(${i(I[4])} ${i(I[5])})`;return`matrix(${i(I[0])} ${i(I[1])} ${i(I[2])} ${i(I[3])} ${i(I[4])} ${i(I[5])})`}let m=0,g=0,C=0;class H{constructor(p,w,B=!1){(0,c.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new c.DOMSVGFactory,this.current=new a,this.transformMatrix=y.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=p,this.objs=w,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!B,this._operatorIdMapping=[];for(const K in y.OPS)this._operatorIdMapping[y.OPS[K]]=K}getObject(p,w=null){return typeof p=="string"?p.startsWith("g_")?this.commonObjs.get(p):this.objs.get(p):w}save(){this.transformStack.push(this.transformMatrix);const p=this.current;this.extraStack.push(p),this.current=p.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(p){this.save(),this.executeOpTree(p),this.restore()}loadDependencies(p){const w=p.fnArray,B=p.argsArray;for(let K=0,z=w.length;K<z;K++)if(w[K]===y.OPS.dependency)for(const Q of B[K]){const et=Q.startsWith("g_")?this.commonObjs:this.objs,ft=new Promise(dt=>{et.get(Q,dt)});this.current.dependencies.push(ft)}return Promise.all(this.current.dependencies)}transform(p,w,B,K,z,Q){const et=[p,w,B,K,z,Q];this.transformMatrix=y.Util.transform(this.transformMatrix,et),this.tgrp=null}getSVG(p,w){this.viewport=w;const B=this._initialize(w);return this.loadDependencies(p).then(()=>(this.transformMatrix=y.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(p)),B))}convertOpList(p){const w=this._operatorIdMapping,B=p.argsArray,K=p.fnArray,z=[];for(let Q=0,et=K.length;Q<et;Q++){const ft=K[Q];z.push({fnId:ft,fn:w[ft],args:B[Q]})}return u(z)}executeOpTree(p){for(const w of p){const B=w.fn,K=w.fnId,z=w.args;switch(K|0){case y.OPS.beginText:this.beginText();break;case y.OPS.dependency:break;case y.OPS.setLeading:this.setLeading(z);break;case y.OPS.setLeadingMoveText:this.setLeadingMoveText(z[0],z[1]);break;case y.OPS.setFont:this.setFont(z);break;case y.OPS.showText:this.showText(z[0]);break;case y.OPS.showSpacedText:this.showText(z[0]);break;case y.OPS.endText:this.endText();break;case y.OPS.moveText:this.moveText(z[0],z[1]);break;case y.OPS.setCharSpacing:this.setCharSpacing(z[0]);break;case y.OPS.setWordSpacing:this.setWordSpacing(z[0]);break;case y.OPS.setHScale:this.setHScale(z[0]);break;case y.OPS.setTextMatrix:this.setTextMatrix(z[0],z[1],z[2],z[3],z[4],z[5]);break;case y.OPS.setTextRise:this.setTextRise(z[0]);break;case y.OPS.setTextRenderingMode:this.setTextRenderingMode(z[0]);break;case y.OPS.setLineWidth:this.setLineWidth(z[0]);break;case y.OPS.setLineJoin:this.setLineJoin(z[0]);break;case y.OPS.setLineCap:this.setLineCap(z[0]);break;case y.OPS.setMiterLimit:this.setMiterLimit(z[0]);break;case y.OPS.setFillRGBColor:this.setFillRGBColor(z[0],z[1],z[2]);break;case y.OPS.setStrokeRGBColor:this.setStrokeRGBColor(z[0],z[1],z[2]);break;case y.OPS.setStrokeColorN:this.setStrokeColorN(z);break;case y.OPS.setFillColorN:this.setFillColorN(z);break;case y.OPS.shadingFill:this.shadingFill(z[0]);break;case y.OPS.setDash:this.setDash(z[0],z[1]);break;case y.OPS.setRenderingIntent:this.setRenderingIntent(z[0]);break;case y.OPS.setFlatness:this.setFlatness(z[0]);break;case y.OPS.setGState:this.setGState(z[0]);break;case y.OPS.fill:this.fill();break;case y.OPS.eoFill:this.eoFill();break;case y.OPS.stroke:this.stroke();break;case y.OPS.fillStroke:this.fillStroke();break;case y.OPS.eoFillStroke:this.eoFillStroke();break;case y.OPS.clip:this.clip("nonzero");break;case y.OPS.eoClip:this.clip("evenodd");break;case y.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case y.OPS.paintImageXObject:this.paintImageXObject(z[0]);break;case y.OPS.paintInlineImageXObject:this.paintInlineImageXObject(z[0]);break;case y.OPS.paintImageMaskXObject:this.paintImageMaskXObject(z[0]);break;case y.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(z[0],z[1]);break;case y.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case y.OPS.closePath:this.closePath();break;case y.OPS.closeStroke:this.closeStroke();break;case y.OPS.closeFillStroke:this.closeFillStroke();break;case y.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case y.OPS.nextLine:this.nextLine();break;case y.OPS.transform:this.transform(z[0],z[1],z[2],z[3],z[4],z[5]);break;case y.OPS.constructPath:this.constructPath(z[0],z[1]);break;case y.OPS.endPath:this.endPath();break;case 92:this.group(w.items);break;default:(0,y.warn)(`Unimplemented operator ${B}`);break}}}setWordSpacing(p){this.current.wordSpacing=p}setCharSpacing(p){this.current.charSpacing=p}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(p,w,B,K,z,Q){const et=this.current;et.textMatrix=et.lineMatrix=[p,w,B,K,z,Q],et.textMatrixScale=Math.hypot(p,w),et.x=et.lineX=0,et.y=et.lineY=0,et.xcoords=[],et.ycoords=[],et.tspan=this.svgFactory.createElement("svg:tspan"),et.tspan.setAttributeNS(null,"font-family",et.fontFamily),et.tspan.setAttributeNS(null,"font-size",`${i(et.fontSize)}px`),et.tspan.setAttributeNS(null,"y",i(-et.y)),et.txtElement=this.svgFactory.createElement("svg:text"),et.txtElement.append(et.tspan)}beginText(){const p=this.current;p.x=p.lineX=0,p.y=p.lineY=0,p.textMatrix=y.IDENTITY_MATRIX,p.lineMatrix=y.IDENTITY_MATRIX,p.textMatrixScale=1,p.tspan=this.svgFactory.createElement("svg:tspan"),p.txtElement=this.svgFactory.createElement("svg:text"),p.txtgrp=this.svgFactory.createElement("svg:g"),p.xcoords=[],p.ycoords=[]}moveText(p,w){const B=this.current;B.x=B.lineX+=p,B.y=B.lineY+=w,B.xcoords=[],B.ycoords=[],B.tspan=this.svgFactory.createElement("svg:tspan"),B.tspan.setAttributeNS(null,"font-family",B.fontFamily),B.tspan.setAttributeNS(null,"font-size",`${i(B.fontSize)}px`),B.tspan.setAttributeNS(null,"y",i(-B.y))}showText(p){const w=this.current,B=w.font,K=w.fontSize;if(K===0)return;const z=w.fontSizeScale,Q=w.charSpacing,et=w.wordSpacing,ft=w.fontDirection,dt=w.textHScale*ft,pt=B.vertical,yt=pt?1:-1,st=B.defaultVMetrics,D=K*w.fontMatrix[0];let S=0;for(const f of p){if(f===null){S+=ft*et;continue}else if(typeof f=="number"){S+=yt*f*K/1e3;continue}const T=(f.isSpace?et:0)+Q,P=f.fontChar;let L,M,s=f.width;if(pt){let E;const k=f.vmetric||st;E=f.vmetric?k[1]:s*.5,E=-E*D;const x=k[2]*D;s=k?-k[0]:s,L=E/z,M=(S+x)/z}else L=S/z,M=0;(f.isInFont||B.missingFile)&&(w.xcoords.push(w.x+L),pt&&w.ycoords.push(-w.y+M),w.tspan.textContent+=P);const b=pt?s*D-T*ft:s*D+T*ft;S+=b}w.tspan.setAttributeNS(null,"x",w.xcoords.map(i).join(" ")),pt?w.tspan.setAttributeNS(null,"y",w.ycoords.map(i).join(" ")):w.tspan.setAttributeNS(null,"y",i(-w.y)),pt?w.y-=S:w.x+=S*dt,w.tspan.setAttributeNS(null,"font-family",w.fontFamily),w.tspan.setAttributeNS(null,"font-size",`${i(w.fontSize)}px`),w.fontStyle!==e.fontStyle&&w.tspan.setAttributeNS(null,"font-style",w.fontStyle),w.fontWeight!==e.fontWeight&&w.tspan.setAttributeNS(null,"font-weight",w.fontWeight);const d=w.textRenderingMode&y.TextRenderingMode.FILL_STROKE_MASK;if(d===y.TextRenderingMode.FILL||d===y.TextRenderingMode.FILL_STROKE?(w.fillColor!==e.fillColor&&w.tspan.setAttributeNS(null,"fill",w.fillColor),w.fillAlpha<1&&w.tspan.setAttributeNS(null,"fill-opacity",w.fillAlpha)):w.textRenderingMode===y.TextRenderingMode.ADD_TO_PATH?w.tspan.setAttributeNS(null,"fill","transparent"):w.tspan.setAttributeNS(null,"fill","none"),d===y.TextRenderingMode.STROKE||d===y.TextRenderingMode.FILL_STROKE){const f=1/(w.textMatrixScale||1);this._setStrokeAttributes(w.tspan,f)}let r=w.textMatrix;w.textRise!==0&&(r=r.slice(),r[5]+=w.textRise),w.txtElement.setAttributeNS(null,"transform",`${_(r)} scale(${i(dt)}, -1)`),w.txtElement.setAttributeNS(U,"xml:space","preserve"),w.txtElement.append(w.tspan),w.txtgrp.append(w.txtElement),this._ensureTransformGroup().append(w.txtElement)}setLeadingMoveText(p,w){this.setLeading(-w),this.moveText(p,w)}addFontStyle(p){if(!p.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const w=n(p.data,p.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${p.loadedName}"; src: url(${w}); }
`}setFont(p){const w=this.current,B=this.commonObjs.get(p[0]);let K=p[1];w.font=B,this.embedFonts&&!B.missingFile&&!this.embeddedFonts[B.loadedName]&&(this.addFontStyle(B),this.embeddedFonts[B.loadedName]=B),w.fontMatrix=B.fontMatrix||y.FONT_IDENTITY_MATRIX;let z="normal";B.black?z="900":B.bold&&(z="bold");const Q=B.italic?"italic":"normal";K<0?(K=-K,w.fontDirection=-1):w.fontDirection=1,w.fontSize=K,w.fontFamily=B.loadedName,w.fontWeight=z,w.fontStyle=Q,w.tspan=this.svgFactory.createElement("svg:tspan"),w.tspan.setAttributeNS(null,"y",i(-w.y)),w.xcoords=[],w.ycoords=[]}endText(){const p=this.current;p.textRenderingMode&y.TextRenderingMode.ADD_TO_PATH_FLAG&&p.txtElement?.hasChildNodes()&&(p.element=p.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(p){p>0&&(this.current.lineWidth=p)}setLineCap(p){this.current.lineCap=R[p]}setLineJoin(p){this.current.lineJoin=t[p]}setMiterLimit(p){this.current.miterLimit=p}setStrokeAlpha(p){this.current.strokeAlpha=p}setStrokeRGBColor(p,w,B){this.current.strokeColor=y.Util.makeHexColor(p,w,B)}setFillAlpha(p){this.current.fillAlpha=p}setFillRGBColor(p,w,B){this.current.fillColor=y.Util.makeHexColor(p,w,B),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(p){this.current.strokeColor=this._makeColorN_Pattern(p)}setFillColorN(p){this.current.fillColor=this._makeColorN_Pattern(p)}shadingFill(p){const{width:w,height:B}=this.viewport,K=y.Util.inverseTransform(this.transformMatrix),[z,Q,et,ft]=y.Util.getAxialAlignedBoundingBox([0,0,w,B],K),dt=this.svgFactory.createElement("svg:rect");dt.setAttributeNS(null,"x",z),dt.setAttributeNS(null,"y",Q),dt.setAttributeNS(null,"width",et-z),dt.setAttributeNS(null,"height",ft-Q),dt.setAttributeNS(null,"fill",this._makeShadingPattern(p)),this.current.fillAlpha<1&&dt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(dt)}_makeColorN_Pattern(p){return p[0]==="TilingPattern"?this._makeTilingPattern(p):this._makeShadingPattern(p)}_makeTilingPattern(p){const w=p[1],B=p[2],K=p[3]||y.IDENTITY_MATRIX,[z,Q,et,ft]=p[4],dt=p[5],pt=p[6],yt=p[7],st=`shading${C++}`,[D,S,d,r]=y.Util.normalizeRect([...y.Util.applyTransform([z,Q],K),...y.Util.applyTransform([et,ft],K)]),[f,T]=y.Util.singularValueDecompose2dScale(K),P=dt*f,L=pt*T,M=this.svgFactory.createElement("svg:pattern");M.setAttributeNS(null,"id",st),M.setAttributeNS(null,"patternUnits","userSpaceOnUse"),M.setAttributeNS(null,"width",P),M.setAttributeNS(null,"height",L),M.setAttributeNS(null,"x",`${D}`),M.setAttributeNS(null,"y",`${S}`);const s=this.svg,b=this.transformMatrix,E=this.current.fillColor,k=this.current.strokeColor,x=this.svgFactory.create(d-D,r-S);if(this.svg=x,this.transformMatrix=K,yt===2){const G=y.Util.makeHexColor(...w);this.current.fillColor=G,this.current.strokeColor=G}return this.executeOpTree(this.convertOpList(B)),this.svg=s,this.transformMatrix=b,this.current.fillColor=E,this.current.strokeColor=k,M.append(x.childNodes[0]),this.defs.append(M),`url(#${st})`}_makeShadingPattern(p){switch(typeof p=="string"&&(p=this.objs.get(p)),p[0]){case"RadialAxial":const w=`shading${C++}`,B=p[3];let K;switch(p[1]){case"axial":const z=p[4],Q=p[5];K=this.svgFactory.createElement("svg:linearGradient"),K.setAttributeNS(null,"id",w),K.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),K.setAttributeNS(null,"x1",z[0]),K.setAttributeNS(null,"y1",z[1]),K.setAttributeNS(null,"x2",Q[0]),K.setAttributeNS(null,"y2",Q[1]);break;case"radial":const et=p[4],ft=p[5],dt=p[6],pt=p[7];K=this.svgFactory.createElement("svg:radialGradient"),K.setAttributeNS(null,"id",w),K.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),K.setAttributeNS(null,"cx",ft[0]),K.setAttributeNS(null,"cy",ft[1]),K.setAttributeNS(null,"r",pt),K.setAttributeNS(null,"fx",et[0]),K.setAttributeNS(null,"fy",et[1]),K.setAttributeNS(null,"fr",dt);break;default:throw new Error(`Unknown RadialAxial type: ${p[1]}`)}for(const z of B){const Q=this.svgFactory.createElement("svg:stop");Q.setAttributeNS(null,"offset",z[0]),Q.setAttributeNS(null,"stop-color",z[1]),K.append(Q)}return this.defs.append(K),`url(#${w})`;case"Mesh":return(0,y.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${p[0]}`)}}setDash(p,w){this.current.dashArray=p,this.current.dashPhase=w}constructPath(p,w){const B=this.current;let K=B.x,z=B.y,Q=[],et=0;for(const ft of p)switch(ft|0){case y.OPS.rectangle:K=w[et++],z=w[et++];const dt=w[et++],pt=w[et++],yt=K+dt,st=z+pt;Q.push("M",i(K),i(z),"L",i(yt),i(z),"L",i(yt),i(st),"L",i(K),i(st),"Z");break;case y.OPS.moveTo:K=w[et++],z=w[et++],Q.push("M",i(K),i(z));break;case y.OPS.lineTo:K=w[et++],z=w[et++],Q.push("L",i(K),i(z));break;case y.OPS.curveTo:K=w[et+4],z=w[et+5],Q.push("C",i(w[et]),i(w[et+1]),i(w[et+2]),i(w[et+3]),i(K),i(z)),et+=6;break;case y.OPS.curveTo2:Q.push("C",i(K),i(z),i(w[et]),i(w[et+1]),i(w[et+2]),i(w[et+3])),K=w[et+2],z=w[et+3],et+=4;break;case y.OPS.curveTo3:K=w[et+2],z=w[et+3],Q.push("C",i(w[et]),i(w[et+1]),i(K),i(z),i(K),i(z)),et+=4;break;case y.OPS.closePath:Q.push("Z");break}Q=Q.join(" "),B.path&&p.length>0&&p[0]!==y.OPS.rectangle&&p[0]!==y.OPS.moveTo?Q=B.path.getAttributeNS(null,"d")+Q:(B.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(B.path)),B.path.setAttributeNS(null,"d",Q),B.path.setAttributeNS(null,"fill","none"),B.element=B.path,B.setCurrentPoint(K,z)}endPath(){const p=this.current;if(p.path=null,!this.pendingClip)return;if(!p.element){this.pendingClip=null;return}const w=`clippath${m++}`,B=this.svgFactory.createElement("svg:clipPath");B.setAttributeNS(null,"id",w),B.setAttributeNS(null,"transform",_(this.transformMatrix));const K=p.element.cloneNode(!0);if(this.pendingClip==="evenodd"?K.setAttributeNS(null,"clip-rule","evenodd"):K.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,B.append(K),this.defs.append(B),p.activeClipUrl){p.clipGroup=null;for(const z of this.extraStack)z.clipGroup=null;B.setAttributeNS(null,"clip-path",p.activeClipUrl)}p.activeClipUrl=`url(#${w})`,this.tgrp=null}clip(p){this.pendingClip=p}closePath(){const p=this.current;if(p.path){const w=`${p.path.getAttributeNS(null,"d")}Z`;p.path.setAttributeNS(null,"d",w)}}setLeading(p){this.current.leading=-p}setTextRise(p){this.current.textRise=p}setTextRenderingMode(p){this.current.textRenderingMode=p}setHScale(p){this.current.textHScale=p/100}setRenderingIntent(p){}setFlatness(p){}setGState(p){for(const[w,B]of p)switch(w){case"LW":this.setLineWidth(B);break;case"LC":this.setLineCap(B);break;case"LJ":this.setLineJoin(B);break;case"ML":this.setMiterLimit(B);break;case"D":this.setDash(B[0],B[1]);break;case"RI":this.setRenderingIntent(B);break;case"FL":this.setFlatness(B);break;case"Font":this.setFont(B);break;case"CA":this.setStrokeAlpha(B);break;case"ca":this.setFillAlpha(B);break;default:(0,y.warn)(`Unimplemented graphic state operator ${w}`);break}}fill(){const p=this.current;p.element&&(p.element.setAttributeNS(null,"fill",p.fillColor),p.element.setAttributeNS(null,"fill-opacity",p.fillAlpha),this.endPath())}stroke(){const p=this.current;p.element&&(this._setStrokeAttributes(p.element),p.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(p,w=1){const B=this.current;let K=B.dashArray;w!==1&&K.length>0&&(K=K.map(function(z){return w*z})),p.setAttributeNS(null,"stroke",B.strokeColor),p.setAttributeNS(null,"stroke-opacity",B.strokeAlpha),p.setAttributeNS(null,"stroke-miterlimit",i(B.miterLimit)),p.setAttributeNS(null,"stroke-linecap",B.lineCap),p.setAttributeNS(null,"stroke-linejoin",B.lineJoin),p.setAttributeNS(null,"stroke-width",i(w*B.lineWidth)+"px"),p.setAttributeNS(null,"stroke-dasharray",K.map(i).join(" ")),p.setAttributeNS(null,"stroke-dashoffset",i(w*B.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const p=this.svgFactory.createElement("svg:rect");p.setAttributeNS(null,"x","0"),p.setAttributeNS(null,"y","0"),p.setAttributeNS(null,"width","1px"),p.setAttributeNS(null,"height","1px"),p.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(p)}paintImageXObject(p){const w=this.getObject(p);if(!w){(0,y.warn)(`Dependent image with object ID ${p} is not ready yet`);return}this.paintInlineImageXObject(w)}paintInlineImageXObject(p,w){const B=p.width,K=p.height,z=v(p,this.forceDataSchema,!!w),Q=this.svgFactory.createElement("svg:rect");Q.setAttributeNS(null,"x","0"),Q.setAttributeNS(null,"y","0"),Q.setAttributeNS(null,"width",i(B)),Q.setAttributeNS(null,"height",i(K)),this.current.element=Q,this.clip("nonzero");const et=this.svgFactory.createElement("svg:image");et.setAttributeNS(W,"xlink:href",z),et.setAttributeNS(null,"x","0"),et.setAttributeNS(null,"y",i(-K)),et.setAttributeNS(null,"width",i(B)+"px"),et.setAttributeNS(null,"height",i(K)+"px"),et.setAttributeNS(null,"transform",`scale(${i(1/B)} ${i(-1/K)})`),w?w.append(et):this._ensureTransformGroup().append(et)}paintImageMaskXObject(p){const w=this.getObject(p.data,p);if(w.bitmap){(0,y.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const B=this.current,K=w.width,z=w.height,Q=B.fillColor;B.maskId=`mask${g++}`;const et=this.svgFactory.createElement("svg:mask");et.setAttributeNS(null,"id",B.maskId);const ft=this.svgFactory.createElement("svg:rect");ft.setAttributeNS(null,"x","0"),ft.setAttributeNS(null,"y","0"),ft.setAttributeNS(null,"width",i(K)),ft.setAttributeNS(null,"height",i(z)),ft.setAttributeNS(null,"fill",Q),ft.setAttributeNS(null,"mask",`url(#${B.maskId})`),this.defs.append(et),this._ensureTransformGroup().append(ft),this.paintInlineImageXObject(w,et)}paintFormXObjectBegin(p,w){if(Array.isArray(p)&&p.length===6&&this.transform(p[0],p[1],p[2],p[3],p[4],p[5]),w){const B=w[2]-w[0],K=w[3]-w[1],z=this.svgFactory.createElement("svg:rect");z.setAttributeNS(null,"x",w[0]),z.setAttributeNS(null,"y",w[1]),z.setAttributeNS(null,"width",i(B)),z.setAttributeNS(null,"height",i(K)),this.current.element=z,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(p){const w=this.svgFactory.create(p.width,p.height),B=this.svgFactory.createElement("svg:defs");w.append(B),this.defs=B;const K=this.svgFactory.createElement("svg:g");return K.setAttributeNS(null,"transform",_(p.transform)),w.append(K),this.svg=K,w}_ensureClipGroup(){if(!this.current.clipGroup){const p=this.svgFactory.createElement("svg:g");p.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(p),this.current.clipGroup=p}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",_(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}o.SVGGraphics=H}),((h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaText=void 0;class F{static textContent(y){const e=[],U={items:e,styles:Object.create(null)};function W(R){if(!R)return;let t=null;const n=R.name;if(n==="#text")t=R.value;else if(F.shouldBuildText(n))R?.attributes?.textContent?t=R.attributes.textContent:R.value&&(t=R.value);else return;if(t!==null&&e.push({str:t}),!!R.children)for(const v of R.children)W(v)}return W(y),U}static shouldBuildText(y){return!(y==="textarea"||y==="input"||y==="option"||y==="select")}}o.XfaText=F}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TextLayerRenderTask=void 0,o.renderTextLayer=_,o.updateTextLayer=m;var c=F(1),y=F(6);const e=1e5,U=30,W=.8,R=new Map;function t(g,C){let H;if(C&&c.FeatureTest.isOffscreenCanvasSupported)H=new OffscreenCanvas(g,g).getContext("2d",{alpha:!1});else{const I=document.createElement("canvas");I.width=I.height=g,H=I.getContext("2d",{alpha:!1})}return H}function n(g,C){const H=R.get(g);if(H)return H;const I=t(U,C);I.font=`${U}px ${g}`;const p=I.measureText("");let w=p.fontBoundingBoxAscent,B=Math.abs(p.fontBoundingBoxDescent);if(w){const z=w/(w+B);return R.set(g,z),I.canvas.width=I.canvas.height=0,z}I.strokeStyle="red",I.clearRect(0,0,U,U),I.strokeText("g",0,0);let K=I.getImageData(0,0,U,U).data;B=0;for(let z=K.length-1-3;z>=0;z-=4)if(K[z]>0){B=Math.ceil(z/4/U);break}I.clearRect(0,0,U,U),I.strokeText("A",0,U),K=I.getImageData(0,0,U,U).data,w=0;for(let z=0,Q=K.length;z<Q;z+=4)if(K[z]>0){w=U-Math.floor(z/4/U);break}if(I.canvas.width=I.canvas.height=0,w){const z=w/(w+B);return R.set(g,z),z}return R.set(g,W),W}function v(g,C,H){const I=document.createElement("span"),p={angle:0,canvasWidth:0,hasText:C.str!=="",hasEOL:C.hasEOL,fontSize:0};g._textDivs.push(I);const w=c.Util.transform(g._transform,C.transform);let B=Math.atan2(w[1],w[0]);const K=H[C.fontName];K.vertical&&(B+=Math.PI/2);const z=Math.hypot(w[2],w[3]),Q=z*n(K.fontFamily,g._isOffscreenCanvasSupported);let et,ft;B===0?(et=w[4],ft=w[5]-Q):(et=w[4]+Q*Math.sin(B),ft=w[5]-Q*Math.cos(B));const dt="calc(var(--scale-factor)*",pt=I.style;g._container===g._rootContainer?(pt.left=`${(100*et/g._pageWidth).toFixed(2)}%`,pt.top=`${(100*ft/g._pageHeight).toFixed(2)}%`):(pt.left=`${dt}${et.toFixed(2)}px)`,pt.top=`${dt}${ft.toFixed(2)}px)`),pt.fontSize=`${dt}${z.toFixed(2)}px)`,pt.fontFamily=K.fontFamily,p.fontSize=z,I.setAttribute("role","presentation"),I.textContent=C.str,I.dir=C.dir,g._fontInspectorEnabled&&(I.dataset.fontName=C.fontName),B!==0&&(p.angle=B*(180/Math.PI));let yt=!1;if(C.str.length>1)yt=!0;else if(C.str!==" "&&C.transform[0]!==C.transform[3]){const st=Math.abs(C.transform[0]),D=Math.abs(C.transform[3]);st!==D&&Math.max(st,D)/Math.min(st,D)>1.5&&(yt=!0)}yt&&(p.canvasWidth=K.vertical?C.height:C.width),g._textDivProperties.set(I,p),g._isReadableStream&&g._layoutText(I)}function a(g){const{div:C,scale:H,properties:I,ctx:p,prevFontSize:w,prevFontFamily:B}=g,{style:K}=C;let z="";if(I.canvasWidth!==0&&I.hasText){const{fontFamily:Q}=K,{canvasWidth:et,fontSize:ft}=I;(w!==ft||B!==Q)&&(p.font=`${ft*H}px ${Q}`,g.prevFontSize=ft,g.prevFontFamily=Q);const{width:dt}=p.measureText(C.textContent);dt>0&&(z=`scaleX(${et*H/dt})`)}I.angle!==0&&(z=`rotate(${I.angle}deg) ${z}`),z.length>0&&(K.transform=z)}function u(g){if(g._canceled)return;const C=g._textDivs,H=g._capability;if(C.length>e){H.resolve();return}if(!g._isReadableStream)for(const p of C)g._layoutText(p);H.resolve()}class i{constructor({textContentSource:C,container:H,viewport:I,textDivs:p,textDivProperties:w,textContentItemsStr:B,isOffscreenCanvasSupported:K}){this._textContentSource=C,this._isReadableStream=C instanceof ReadableStream,this._container=this._rootContainer=H,this._textDivs=p||[],this._textContentItemsStr=B||[],this._isOffscreenCanvasSupported=K,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=w||new WeakMap,this._canceled=!1,this._capability=new c.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:I.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:t(0,K)};const{pageWidth:z,pageHeight:Q,pageX:et,pageY:ft}=I.rawDims;this._transform=[1,0,0,-1,-et,ft+Q],this._pageWidth=z,this._pageHeight=Q,(0,y.setLayerDimensions)(H,I),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new c.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new c.AbortException("TextLayer task cancelled."))}_processItems(C,H){for(const I of C){if(I.str===void 0){if(I.type==="beginMarkedContentProps"||I.type==="beginMarkedContent"){const p=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),I.id!==null&&this._container.setAttribute("id",`${I.id}`),p.append(this._container)}else I.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(I.str),v(this,I,H)}}_layoutText(C){const H=this._layoutTextParams.properties=this._textDivProperties.get(C);if(this._layoutTextParams.div=C,a(this._layoutTextParams),H.hasText&&this._container.append(C),H.hasEOL){const I=document.createElement("br");I.setAttribute("role","presentation"),this._container.append(I)}}_render(){const C=new c.PromiseCapability;let H=Object.create(null);if(this._isReadableStream){const I=()=>{this._reader.read().then(({value:p,done:w})=>{if(w){C.resolve();return}Object.assign(H,p.styles),this._processItems(p.items,H),I()},C.reject)};this._reader=this._textContentSource.getReader(),I()}else if(this._textContentSource){const{items:I,styles:p}=this._textContentSource;this._processItems(I,p),C.resolve()}else throw new Error('No "textContentSource" parameter specified.');C.promise.then(()=>{H=null,u(this)},this._capability.reject)}}o.TextLayerRenderTask=i;function _(g){!g.textContentSource&&(g.textContent||g.textContentStream)&&((0,y.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),g.textContentSource=g.textContent||g.textContentStream);const{container:C,viewport:H}=g,I=getComputedStyle(C),p=I.getPropertyValue("visibility"),w=parseFloat(I.getPropertyValue("--scale-factor"));p==="visible"&&(!w||Math.abs(w-H.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const B=new i(g);return B._render(),B}function m({container:g,viewport:C,textDivs:H,textDivProperties:I,isOffscreenCanvasSupported:p,mustRotate:w=!0,mustRescale:B=!0}){if(w&&(0,y.setLayerDimensions)(g,{rotation:C.rotation}),B){const K=t(0,p),Q={prevFontSize:null,prevFontFamily:null,div:null,scale:C.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:K};for(const et of H)Q.properties=I.get(et),Q.div=et,a(Q)}}}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationEditorLayer=void 0;var c=F(1),y=F(4),e=F(5),U=F(28),W=F(33),R=F(6),t=F(34);class n{#t;#e=!1;#n=null;#i=this.pointerup.bind(this);#a=this.pointerdown.bind(this);#s=new Map;#l=!1;#o=!1;#u=!1;#r;static _initialized=!1;constructor({uiManager:a,pageIndex:u,div:i,accessibilityManager:_,annotationLayer:m,viewport:g,l10n:C}){const H=[U.FreeTextEditor,W.InkEditor,t.StampEditor];if(!n._initialized){n._initialized=!0;for(const I of H)I.initialize(C)}a.registerEditorTypes(H),this.#r=a,this.pageIndex=u,this.div=i,this.#t=_,this.#n=m,this.viewport=g,this.#r.addLayer(this)}get isEmpty(){return this.#s.size===0}updateToolbar(a){this.#r.updateToolbar(a)}updateMode(a=this.#r.getMode()){this.#f(),a===c.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),this.#r.unselectAll(),a!==c.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",a===c.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",a===c.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",a===c.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(a){if(!a&&this.#r.getMode()!==c.AnnotationEditorType.INK)return;if(!a){for(const i of this.#s.values())if(i.isEmpty()){i.setInBackground();return}}this.#h({offsetX:0,offsetY:0}).setInBackground()}setEditingState(a){this.#r.setEditingState(a)}addCommands(a){this.#r.addCommands(a)}enable(){this.div.style.pointerEvents="auto";const a=new Set;for(const i of this.#s.values())i.enableEditing(),i.annotationElementId&&a.add(i.annotationElementId);if(!this.#n)return;const u=this.#n.getEditableAnnotations();for(const i of u){if(i.hide(),this.#r.isDeletedAnnotationElement(i.data.id)||a.has(i.data.id))continue;const _=this.deserialize(i);_&&(this.addOrRebuild(_),_.enableEditing())}}disable(){this.#u=!0,this.div.style.pointerEvents="none";const a=new Set;for(const u of this.#s.values()){if(u.disableEditing(),!u.annotationElementId||u.serialize()!==null){a.add(u.annotationElementId);continue}this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}if(this.#n){const u=this.#n.getEditableAnnotations();for(const i of u){const{id:_}=i.data;a.has(_)||this.#r.isDeletedAnnotationElement(_)||i.show()}}this.#f(),this.isEmpty&&(this.div.hidden=!0),this.#u=!1}getEditableAnnotation(a){return this.#n?.getEditableAnnotation(a)||null}setActiveEditor(a){this.#r.getActive()!==a&&this.#r.setActiveEditor(a)}enableClick(){this.div.addEventListener("pointerdown",this.#a),this.div.addEventListener("pointerup",this.#i)}disableClick(){this.div.removeEventListener("pointerdown",this.#a),this.div.removeEventListener("pointerup",this.#i)}attach(a){this.#s.set(a.id,a);const{annotationElementId:u}=a;u&&this.#r.isDeletedAnnotationElement(u)&&this.#r.removeDeletedAnnotationElement(a)}detach(a){this.#s.delete(a.id),this.#t?.removePointerInTextLayer(a.contentDiv),!this.#u&&a.annotationElementId&&this.#r.addDeletedAnnotationElement(a)}remove(a){this.detach(a),this.#r.removeEditor(a),a.div.style.display="none",setTimeout(()=>{a.div.style.display="",a.div.remove(),a.isAttachedToDOM=!1,document.activeElement===document.body&&this.#r.focusMainContainer()},0),this.#o||this.addInkEditorIfNeeded(!1)}#d(a){a.parent!==this&&(a.annotationElementId&&(this.#r.addDeletedAnnotationElement(a.annotationElementId),y.AnnotationEditor.deleteAnnotationElement(a),a.annotationElementId=null),this.attach(a),a.parent?.detach(a),a.setParent(this),a.div&&a.isAttachedToDOM&&(a.div.remove(),this.div.append(a.div)))}add(a){if(this.#d(a),this.#r.addEditor(a),this.attach(a),!a.isAttachedToDOM){const u=a.render();this.div.append(u),a.isAttachedToDOM=!0}this.moveEditorInDOM(a),a.onceAdded(),this.#r.addToAnnotationStorage(a)}moveEditorInDOM(a){this.#t?.moveElementInDOM(this.div,a.div,a.contentDiv,!0)}addOrRebuild(a){a.needsToBeRebuilt()?a.rebuild():this.add(a)}addUndoableEditor(a){const u=()=>{this.addOrRebuild(a)},i=()=>{a.remove()};this.addCommands({cmd:u,undo:i,mustExec:!1})}getNextId(){return this.#r.getId()}#p(a){switch(this.#r.getMode()){case c.AnnotationEditorType.FREETEXT:return new U.FreeTextEditor(a);case c.AnnotationEditorType.INK:return new W.InkEditor(a);case c.AnnotationEditorType.STAMP:return new t.StampEditor(a)}return null}deserialize(a){switch(a.annotationType??a.annotationEditorType){case c.AnnotationEditorType.FREETEXT:return U.FreeTextEditor.deserialize(a,this,this.#r);case c.AnnotationEditorType.INK:return W.InkEditor.deserialize(a,this,this.#r);case c.AnnotationEditorType.STAMP:return t.StampEditor.deserialize(a,this,this.#r)}return null}#h(a){const u=this.getNextId(),i=this.#p({parent:this,id:u,x:a.offsetX,y:a.offsetY,uiManager:this.#r});return i&&this.add(i),i}setSelected(a){this.#r.setSelected(a)}toggleSelected(a){this.#r.toggleSelected(a)}isSelected(a){return this.#r.isSelected(a)}unselect(a){this.#r.unselect(a)}pointerup(a){const{isMac:u}=c.FeatureTest.platform;if(!(a.button!==0||a.ctrlKey&&u)&&a.target===this.div&&this.#l){if(this.#l=!1,!this.#e){this.#e=!0;return}this.#h(a)}}pointerdown(a){if(this.#l){this.#l=!1;return}const{isMac:u}=c.FeatureTest.platform;if(a.button!==0||a.ctrlKey&&u||a.target!==this.div)return;this.#l=!0;const i=this.#r.getActive();this.#e=!i||i.isEmpty()}drop(a){const u=a.dataTransfer.getData("text/plain"),i=this.#r.getEditor(u);if(!i)return;a.preventDefault(),a.dataTransfer.dropEffect="move",this.#d(i);const _=this.div.getBoundingClientRect(),m=a.clientX-_.x,g=a.clientY-_.y;i.translate(m-i.startX,g-i.startY),this.moveEditorInDOM(i),i.div.focus()}dragover(a){a.preventDefault()}destroy(){this.#r.getActive()?.parent===this&&this.#r.setActiveEditor(null);for(const a of this.#s.values())this.#t?.removePointerInTextLayer(a.contentDiv),a.setParent(null),a.isAttachedToDOM=!1,a.div.remove();this.div=null,this.#s.clear(),this.#r.removeLayer(this)}#f(){this.#o=!0;for(const a of this.#s.values())a.isEmpty()&&a.remove();this.#o=!1}render({viewport:a}){this.viewport=a,(0,R.setLayerDimensions)(this.div,a),(0,e.bindEvents)(this,this.div,["dragover","drop"]);for(const u of this.#r.getEditors(this.pageIndex))this.add(u);this.updateMode()}update({viewport:a}){this.#r.commitOrRemove(),this.viewport=a,(0,R.setLayerDimensions)(this.div,{rotation:a.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:a,pageHeight:u}=this.viewport.rawDims;return[a,u]}}o.AnnotationEditorLayer=n}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FreeTextEditor=void 0;var c=F(1),y=F(5),e=F(4),U=F(29);class W extends e.AnnotationEditor{#t=this.editorDivBlur.bind(this);#e=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#i=this.editorDivKeydown.bind(this);#a;#s="";#l=`${this.id}-editor`;#o;#u=null;static _freeTextDefaultContent="";static _l10nPromise;static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=W.prototype,n=u=>u.isEmpty(),v=y.AnnotationEditorUIManager.TRANSLATE_SMALL,a=y.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,c.shadow)(this,"_keyboardManager",new y.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-v,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[v,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-v],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,v],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:n}]]))}static _type="freetext";constructor(t){super({...t,name:"freeTextEditor"}),this.#a=t.color||W._defaultColor||e.AnnotationEditor._defaultLineColor,this.#o=t.fontSize||W._defaultFontSize}static initialize(t){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(v=>[v,t.get(v)]));const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case c.AnnotationEditorParamsType.FREETEXT_SIZE:W._defaultFontSize=n;break;case c.AnnotationEditorParamsType.FREETEXT_COLOR:W._defaultColor=n;break}}updateParams(t,n){switch(t){case c.AnnotationEditorParamsType.FREETEXT_SIZE:this.#r(n);break;case c.AnnotationEditorParamsType.FREETEXT_COLOR:this.#d(n);break}}static get defaultPropertiesToUpdate(){return[[c.AnnotationEditorParamsType.FREETEXT_SIZE,W._defaultFontSize],[c.AnnotationEditorParamsType.FREETEXT_COLOR,W._defaultColor||e.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[c.AnnotationEditorParamsType.FREETEXT_SIZE,this.#o],[c.AnnotationEditorParamsType.FREETEXT_COLOR,this.#a]]}#r(t){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-this.#o)*this.parentScale),this.#o=a,this.#h()},v=this.#o;this.addCommands({cmd:()=>{n(t)},undo:()=>{n(v)},mustExec:!0,type:c.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#d(t){const n=this.#a;this.addCommands({cmd:()=>{this.#a=this.editorDiv.style.color=t},undo:()=>{this.#a=this.editorDiv.style.color=n},mustExec:!0,type:c.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-W._internalPadding*t,-(W._internalPadding+this.#o)*t]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(c.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#i),this.editorDiv.addEventListener("focus",this.#e),this.editorDiv.addEventListener("blur",this.#t),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#l),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",this.#i),this.editorDiv.removeEventListener("focus",this.#e),this.editorDiv.removeEventListener("blur",this.#t),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(t){super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){if(this.width){this.#g();return}this.enableEditMode(),this.editorDiv.focus()}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#p(){const t=this.editorDiv.getElementsByTagName("div");if(t.length===0)return this.editorDiv.innerText;const n=[];for(const v of t)n.push(v.innerText.replace(/\r\n?|\n/,""));return n.join(`
`)}#h(){const[t,n]=this.parentDimensions;let v;if(this.isAttachedToDOM)v=this.div.getBoundingClientRect();else{const{currentLayer:a,div:u}=this,i=u.style.display;u.style.display="hidden",a.div.append(this.div),v=u.getBoundingClientRect(),u.remove(),u.style.display=i}this.rotation%180===this.parentRotation%180?(this.width=v.width/t,this.height=v.height/n):(this.width=v.height/t,this.height=v.width/n),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#s,n=this.#s=this.#p().trimEnd();if(t===n)return;const v=a=>{if(this.#s=a,!a){this.remove();return}this.#f(),this.rebuild(),this.#h()};this.addCommands({cmd:()=>{v(n)},undo:()=>{v(t)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&this.enterInEditMode()}editorDivKeydown(t){W._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#l),this.enableEditing(),W._l10nPromise.get("editor_free_text2_aria_label").then(a=>this.editorDiv?.setAttribute("aria-label",a)),W._l10nPromise.get("free_text2_default_content").then(a=>this.editorDiv?.setAttribute("default-content",a)),this.editorDiv.contentEditable=!0;const{style:v}=this.editorDiv;if(v.fontSize=`calc(${this.#o}px * var(--scale-factor))`,v.color=this.#a,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,y.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[a,u]=this.parentDimensions;if(this.annotationElementId){const{position:i}=this.#u;let[_,m]=this.getInitialTranslation();[_,m]=this.pageTranslationToScreen(_,m);const[g,C]=this.pageDimensions,[H,I]=this.pageTranslation;let p,w;switch(this.rotation){case 0:p=t+(i[0]-H)/g,w=n+this.height-(i[1]-I)/C;break;case 90:p=t+(i[0]-H)/g,w=n-(i[1]-I)/C,[_,m]=[m,-_];break;case 180:p=t-this.width+(i[0]-H)/g,w=n-(i[1]-I)/C,[_,m]=[-_,-m];break;case 270:p=t+(i[0]-H-this.height*C)/g,w=n+(i[1]-I-this.width*g)/C,[_,m]=[-m,_];break}this.setAt(p*a,w*u,_,m)}else this.setAt(t*a,n*u,this.width*a,this.height*u);this.#f(),this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}#f(){if(this.editorDiv.replaceChildren(),!!this.#s)for(const t of this.#s.split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}}get contentDiv(){return this.editorDiv}static deserialize(t,n,v){let a=null;if(t instanceof U.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:i,fontColor:_},rect:m,rotation:g,id:C},textContent:H,textPosition:I,parent:{page:{pageNumber:p}}}=t;if(!H||H.length===0)return null;a=t={annotationType:c.AnnotationEditorType.FREETEXT,color:Array.from(_),fontSize:i,value:H.join(`
`),position:I,pageIndex:p-1,rect:m,rotation:g,id:C,deleted:!1}}const u=super.deserialize(t,n,v);return u.#o=t.fontSize,u.#a=c.Util.makeHexColor(...t.color),u.#s=t.value,u.annotationElementId=t.id||null,u.#u=a,u}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const n=W._internalPadding*this.parentScale,v=this.getRect(n,n),a=e.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#a),u={annotationType:c.AnnotationEditorType.FREETEXT,color:a,fontSize:this.#o,value:this.#s,pageIndex:this.pageIndex,rect:v,rotation:this.rotation};return t?u:this.annotationElementId&&!this.#c(u)?null:(u.id=this.annotationElementId,u)}#c(t){const{value:n,fontSize:v,color:a,rect:u,pageIndex:i}=this.#u;return t.value!==n||t.fontSize!==v||t.rect.some((_,m)=>Math.abs(_-u[m])>=1)||t.color.some((_,m)=>_!==a[m])||t.pageIndex!==i}#g(t=!1){if(!this.annotationElementId)return;if(this.#h(),!t&&(this.width===0||this.height===0)){setTimeout(()=>this.#g(!0),0);return}const n=W._internalPadding*this.parentScale;this.#u.rect=this.getRect(n,n)}}o.FreeTextEditor=W}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.StampAnnotationElement=o.InkAnnotationElement=o.FreeTextAnnotationElement=o.AnnotationLayer=void 0;var c=F(1),y=F(6),e=F(3),U=F(30),W=F(31),R=F(32);const t=1e3,n=9,v=new WeakSet;function a(M){return{width:M[2]-M[0],height:M[3]-M[1]}}class u{static create(s){switch(s.data.annotationType){case c.AnnotationType.LINK:return new _(s);case c.AnnotationType.TEXT:return new m(s);case c.AnnotationType.WIDGET:switch(s.data.fieldType){case"Tx":return new C(s);case"Btn":return s.data.radioButton?new p(s):s.data.checkBox?new I(s):new w(s);case"Ch":return new B(s);case"Sig":return new H(s)}return new g(s);case c.AnnotationType.POPUP:return new K(s);case c.AnnotationType.FREETEXT:return new Q(s);case c.AnnotationType.LINE:return new et(s);case c.AnnotationType.SQUARE:return new ft(s);case c.AnnotationType.CIRCLE:return new dt(s);case c.AnnotationType.POLYLINE:return new pt(s);case c.AnnotationType.CARET:return new st(s);case c.AnnotationType.INK:return new D(s);case c.AnnotationType.POLYGON:return new yt(s);case c.AnnotationType.HIGHLIGHT:return new S(s);case c.AnnotationType.UNDERLINE:return new d(s);case c.AnnotationType.SQUIGGLY:return new r(s);case c.AnnotationType.STRIKEOUT:return new f(s);case c.AnnotationType.STAMP:return new T(s);case c.AnnotationType.FILEATTACHMENT:return new P(s);default:return new i(s)}}}class i{#t=!1;constructor(s,{isRenderable:b=!1,ignoreBorder:E=!1,createQuadrilaterals:k=!1}={}){this.isRenderable=b,this.data=s.data,this.layer=s.layer,this.linkService=s.linkService,this.downloadManager=s.downloadManager,this.imageResourcesPath=s.imageResourcesPath,this.renderForms=s.renderForms,this.svgFactory=s.svgFactory,this.annotationStorage=s.annotationStorage,this.enableScripting=s.enableScripting,this.hasJSActions=s.hasJSActions,this._fieldObjects=s.fieldObjects,this.parent=s.parent,b&&(this.container=this._createContainer(E)),k&&this._createQuadrilaterals()}_createContainer(s){const{data:b,parent:{page:E,viewport:k}}=this,x=document.createElement("section");x.setAttribute("data-annotation-id",b.id),x.style.zIndex=this.parent.zIndex++,this.data.popupRef&&x.setAttribute("aria-haspopup","dialog"),b.noRotate&&x.classList.add("norotate");const{pageWidth:G,pageHeight:X,pageX:it,pageY:St}=k.rawDims;if(!b.rect||this instanceof K){const{rotation:_t}=b;return!b.hasOwnCanvas&&_t!==0&&this.setRotation(_t,x),x}const{width:rt,height:at}=a(b.rect),ut=c.Util.normalizeRect([b.rect[0],E.view[3]-b.rect[1]+E.view[1],b.rect[2],E.view[3]-b.rect[3]+E.view[1]]);if(!s&&b.borderStyle.width>0){x.style.borderWidth=`${b.borderStyle.width}px`;const _t=b.borderStyle.horizontalCornerRadius,Ct=b.borderStyle.verticalCornerRadius;if(_t>0||Ct>0){const Bt=`calc(${_t}px * var(--scale-factor)) / calc(${Ct}px * var(--scale-factor))`;x.style.borderRadius=Bt}else if(this instanceof p){const Bt=`calc(${rt}px * var(--scale-factor)) / calc(${at}px * var(--scale-factor))`;x.style.borderRadius=Bt}switch(b.borderStyle.style){case c.AnnotationBorderStyleType.SOLID:x.style.borderStyle="solid";break;case c.AnnotationBorderStyleType.DASHED:x.style.borderStyle="dashed";break;case c.AnnotationBorderStyleType.BEVELED:(0,c.warn)("Unimplemented border style: beveled");break;case c.AnnotationBorderStyleType.INSET:(0,c.warn)("Unimplemented border style: inset");break;case c.AnnotationBorderStyleType.UNDERLINE:x.style.borderBottomStyle="solid";break}const Lt=b.borderColor||null;Lt?(this.#t=!0,x.style.borderColor=c.Util.makeHexColor(Lt[0]|0,Lt[1]|0,Lt[2]|0)):x.style.borderWidth=0}x.style.left=`${100*(ut[0]-it)/G}%`,x.style.top=`${100*(ut[1]-St)/X}%`;const{rotation:ht}=b;return b.hasOwnCanvas||ht===0?(x.style.width=`${100*rt/G}%`,x.style.height=`${100*at/X}%`):this.setRotation(ht,x),x}setRotation(s,b=this.container){if(!this.data.rect)return;const{pageWidth:E,pageHeight:k}=this.parent.viewport.rawDims,{width:x,height:G}=a(this.data.rect);let X,it;s%180===0?(X=100*x/E,it=100*G/k):(X=100*G/E,it=100*x/k),b.style.width=`${X}%`,b.style.height=`${it}%`,b.setAttribute("data-main-rotation",(360-s)%360)}get _commonActions(){const s=(b,E,k)=>{const x=k.detail[b];k.target.style[E]=U.ColorConverters[`${x[0]}_HTML`](x.slice(1))};return(0,c.shadow)(this,"_commonActions",{display:b=>{const E=b.detail.display%2===1;this.container.style.visibility=E?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:E,print:b.detail.display===0||b.detail.display===3})},print:b=>{this.annotationStorage.setValue(this.data.id,{print:b.detail.print})},hidden:b=>{this.container.style.visibility=b.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:b.detail.hidden})},focus:b=>{setTimeout(()=>b.target.focus({preventScroll:!1}),0)},userName:b=>{b.target.title=b.detail.userName},readonly:b=>{b.detail.readonly?b.target.setAttribute("readonly",""):b.target.removeAttribute("readonly")},required:b=>{this._setRequired(b.target,b.detail.required)},bgColor:b=>{s("bgColor","backgroundColor",b)},fillColor:b=>{s("fillColor","backgroundColor",b)},fgColor:b=>{s("fgColor","color",b)},textColor:b=>{s("textColor","color",b)},borderColor:b=>{s("borderColor","borderColor",b)},strokeColor:b=>{s("strokeColor","borderColor",b)},rotation:b=>{const E=b.detail.rotation;this.setRotation(E),this.annotationStorage.setValue(this.data.id,{rotation:E})}})}_dispatchEventFromSandbox(s,b){const E=this._commonActions;for(const k of Object.keys(b.detail))(s[k]||E[k])?.(b)}_setDefaultPropertiesFromJS(s){if(!this.enableScripting)return;const b=this.annotationStorage.getRawValue(this.data.id);if(!b)return;const E=this._commonActions;for(const[k,x]of Object.entries(b)){const G=E[k];if(G){const X={detail:{[k]:x},target:s};G(X),delete b[k]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:s}=this.data;if(!s)return;const[b,E,k,x]=this.data.rect;if(s.length===1){const[,{x:Ct,y:Lt},{x:Bt,y:$t}]=s[0];if(k===Ct&&x===Lt&&b===Bt&&E===$t)return}const{style:G}=this.container;let X;if(this.#t){const{borderColor:Ct,borderWidth:Lt}=G;G.borderWidth=0,X=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ct}" stroke-width="${Lt}">`],this.container.classList.add("hasBorder")}const it=k-b,St=x-E,{svgFactory:rt}=this,at=rt.createElement("svg");at.classList.add("quadrilateralsContainer"),at.setAttribute("width",0),at.setAttribute("height",0);const ut=rt.createElement("defs");at.append(ut);const ht=rt.createElement("clipPath"),_t=`clippath_${this.data.id}`;ht.setAttribute("id",_t),ht.setAttribute("clipPathUnits","objectBoundingBox"),ut.append(ht);for(const[,{x:Ct,y:Lt},{x:Bt,y:$t}]of s){const Yt=rt.createElement("rect"),ne=(Bt-b)/it,xe=(x-Lt)/St,Ae=(Ct-Bt)/it,He=(Lt-$t)/St;Yt.setAttribute("x",ne),Yt.setAttribute("y",xe),Yt.setAttribute("width",Ae),Yt.setAttribute("height",He),ht.append(Yt),X?.push(`<rect vector-effect="non-scaling-stroke" x="${ne}" y="${xe}" width="${Ae}" height="${He}"/>`)}this.#t&&(X.push("</g></svg>')"),G.backgroundImage=X.join("")),this.container.append(at),this.container.style.clipPath=`url(#${_t})`}_createPopup(){const{container:s,data:b}=this;s.setAttribute("aria-haspopup","dialog");const E=new K({data:{color:b.color,titleObj:b.titleObj,modificationDate:b.modificationDate,contentsObj:b.contentsObj,richText:b.richText,parentRect:b.rect,borderStyle:0,id:`popup_${b.id}`,rotation:b.rotation},parent:this.parent,elements:[this]});this.parent.div.append(E.render())}render(){(0,c.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(s,b=null){const E=[];if(this._fieldObjects){const k=this._fieldObjects[s];if(k)for(const{page:x,id:G,exportValues:X}of k){if(x===-1||G===b)continue;const it=typeof X=="string"?X:null,St=document.querySelector(`[data-element-id="${G}"]`);if(St&&!v.has(St)){(0,c.warn)(`_getElementsByName - element not allowed: ${G}`);continue}E.push({id:G,exportValue:it,domElement:St})}return E}for(const k of document.getElementsByName(s)){const{exportValue:x}=k,G=k.getAttribute("data-element-id");G!==b&&v.has(k)&&E.push({id:G,exportValue:x,domElement:k})}return E}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const s=this.getElementsToTriggerPopup();if(Array.isArray(s))for(const b of s)b.classList.add("highlightArea");else s.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:s,data:{id:b}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:s,editId:b})})}}class _ extends i{constructor(s,b=null){super(s,{isRenderable:!0,ignoreBorder:!!b?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=s.data.isTooltipOnly}render(){const{data:s,linkService:b}=this,E=document.createElement("a");E.setAttribute("data-element-id",s.id);let k=!1;return s.url?(b.addLinkAttributes(E,s.url,s.newWindow),k=!0):s.action?(this._bindNamedAction(E,s.action),k=!0):s.attachment?(this._bindAttachment(E,s.attachment),k=!0):s.setOCGState?(this.#e(E,s.setOCGState),k=!0):s.dest?(this._bindLink(E,s.dest),k=!0):(s.actions&&(s.actions.Action||s.actions["Mouse Up"]||s.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(E,s),k=!0),s.resetForm?(this._bindResetFormAction(E,s.resetForm),k=!0):this.isTooltipOnly&&!k&&(this._bindLink(E,""),k=!0)),this.container.classList.add("linkAnnotation"),k&&this.container.append(E),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(s,b){s.href=this.linkService.getDestinationHash(b),s.onclick=()=>(b&&this.linkService.goToDestination(b),!1),(b||b==="")&&this.#t()}_bindNamedAction(s,b){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeNamedAction(b),!1),this.#t()}_bindAttachment(s,b){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,b.content,b.filename),!1),this.#t()}#e(s,b){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeSetOCGState(b),!1),this.#t()}_bindJSAction(s,b){s.href=this.linkService.getAnchorUrl("");const E=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const k of Object.keys(b.actions)){const x=E.get(k);x&&(s[x]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b.id,name:k}}),!1))}s.onclick||(s.onclick=()=>!1),this.#t()}_bindResetFormAction(s,b){const E=s.onclick;if(E||(s.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){(0,c.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),E||(s.onclick=()=>!1);return}s.onclick=()=>{E?.();const{fields:k,refs:x,include:G}=b,X=[];if(k.length!==0||x.length!==0){const rt=new Set(x);for(const at of k){const ut=this._fieldObjects[at]||[];for(const{id:ht}of ut)rt.add(ht)}for(const at of Object.values(this._fieldObjects))for(const ut of at)rt.has(ut.id)===G&&X.push(ut)}else for(const rt of Object.values(this._fieldObjects))X.push(...rt);const it=this.annotationStorage,St=[];for(const rt of X){const{id:at}=rt;switch(St.push(at),rt.type){case"text":{const ht=rt.defaultValue||"";it.setValue(at,{value:ht});break}case"checkbox":case"radiobutton":{const ht=rt.defaultValue===rt.exportValues;it.setValue(at,{value:ht});break}case"combobox":case"listbox":{const ht=rt.defaultValue||"";it.setValue(at,{value:ht});break}default:continue}const ut=document.querySelector(`[data-element-id="${at}"]`);if(ut){if(!v.has(ut)){(0,c.warn)(`_bindResetFormAction - element not allowed: ${at}`);continue}}else continue;ut.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:St,name:"ResetForm"}}),!1}}}class m extends i{constructor(s){const b=!!(s.data.popupRef||s.data.titleObj?.str||s.data.contentsObj?.str||s.data.richText?.str);super(s,{isRenderable:b})}render(){this.container.classList.add("textAnnotation");const s=document.createElement("img");return s.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",s.alt="[{{type}} Annotation]",s.dataset.l10nId="text_annotation_type",s.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.popupRef||this._createPopup(),this.container.append(s),this.container}}class g extends i{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(s){this.data.hasOwnCanvas&&(s.previousSibling?.nodeName==="CANVAS"&&(s.previousSibling.hidden=!0),s.hidden=!1)}_getKeyModifier(s){const{isWin:b,isMac:E}=c.FeatureTest.platform;return b&&s.ctrlKey||E&&s.metaKey}_setEventListener(s,b,E,k){b.includes("mouse")?s.addEventListener(b,x=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:E,value:k(x),shift:x.shiftKey,modifier:this._getKeyModifier(x)}})}):s.addEventListener(b,x=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:E,value:k(x)}})})}_setEventListeners(s,b,E){for(const[k,x]of b)(x==="Action"||this.data.actions?.[x])&&this._setEventListener(s,k,x,E)}_setBackgroundColor(s){const b=this.data.backgroundColor||null;s.style.backgroundColor=b===null?"transparent":c.Util.makeHexColor(b[0],b[1],b[2])}_setTextStyle(s){const b=["left","center","right"],{fontColor:E}=this.data.defaultAppearanceData,k=this.data.defaultAppearanceData.fontSize||n,x=s.style;let G;const X=2,it=St=>Math.round(10*St)/10;if(this.data.multiLine){const St=Math.abs(this.data.rect[3]-this.data.rect[1]-X),rt=Math.round(St/(c.LINE_FACTOR*k))||1,at=St/rt;G=Math.min(k,it(at/c.LINE_FACTOR))}else{const St=Math.abs(this.data.rect[3]-this.data.rect[1]-X);G=Math.min(k,it(St/c.LINE_FACTOR))}x.fontSize=`calc(${G}px * var(--scale-factor))`,x.color=c.Util.makeHexColor(E[0],E[1],E[2]),this.data.textAlignment!==null&&(x.textAlign=b[this.data.textAlignment])}_setRequired(s,b){b?s.setAttribute("required",!0):s.removeAttribute("required"),s.setAttribute("aria-required",b)}}class C extends g{constructor(s){const b=s.renderForms||!s.data.hasAppearance&&!!s.data.fieldValue;super(s,{isRenderable:b})}setPropertyOnSiblings(s,b,E,k){const x=this.annotationStorage;for(const G of this._getElementsByName(s.name,s.id))G.domElement&&(G.domElement[b]=E),x.setValue(G.id,{[k]:E})}render(){const s=this.annotationStorage,b=this.data.id;this.container.classList.add("textWidgetAnnotation");let E=null;if(this.renderForms){const k=s.getValue(b,{value:this.data.fieldValue});let x=k.value||"";const G=s.getValue(b,{charLimit:this.data.maxLen}).charLimit;G&&x.length>G&&(x=x.slice(0,G));let X=k.formattedValue||this.data.textContent?.join(`
`)||null;X&&this.data.comb&&(X=X.replaceAll(/\s+/g,""));const it={userValue:x,formattedValue:X,lastCommittedValue:null,commitKey:1};this.data.multiLine?(E=document.createElement("textarea"),E.textContent=X??x,this.data.doNotScroll&&(E.style.overflowY="hidden")):(E=document.createElement("input"),E.type="text",E.setAttribute("value",X??x),this.data.doNotScroll&&(E.style.overflowX="hidden")),this.data.hasOwnCanvas&&(E.hidden=!0),v.add(E),E.setAttribute("data-element-id",b),E.disabled=this.data.readOnly,E.name=this.data.baseFieldName||this.data.fieldName,E.tabIndex=t,this._setRequired(E,this.data.required),G&&(E.maxLength=G),E.addEventListener("input",rt=>{s.setValue(b,{value:rt.target.value}),this.setPropertyOnSiblings(E,"value",rt.target.value,"value"),it.formattedValue=null}),E.addEventListener("resetform",rt=>{const at=this.data.defaultFieldValue??"";E.value=it.userValue=at,it.formattedValue=null});let St=rt=>{const{formattedValue:at}=it;at!=null&&(rt.target.value=at),rt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){E.addEventListener("focus",at=>{const{target:ut}=at;it.userValue&&(ut.value=it.userValue),it.lastCommittedValue=ut.value,it.commitKey=1}),E.addEventListener("updatefromsandbox",at=>{this.showElementAndHideCanvas(at.target);const ut={value(ht){it.userValue=ht.detail.value??"",s.setValue(b,{value:it.userValue.toString()}),ht.target.value=it.userValue},formattedValue(ht){const{formattedValue:_t}=ht.detail;it.formattedValue=_t,_t!=null&&ht.target!==document.activeElement&&(ht.target.value=_t),s.setValue(b,{formattedValue:_t})},selRange(ht){ht.target.setSelectionRange(...ht.detail.selRange)},charLimit:ht=>{const{charLimit:_t}=ht.detail,{target:Ct}=ht;if(_t===0){Ct.removeAttribute("maxLength");return}Ct.setAttribute("maxLength",_t);let Lt=it.userValue;!Lt||Lt.length<=_t||(Lt=Lt.slice(0,_t),Ct.value=it.userValue=Lt,s.setValue(b,{value:Lt}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:Lt,willCommit:!0,commitKey:1,selStart:Ct.selectionStart,selEnd:Ct.selectionEnd}}))}};this._dispatchEventFromSandbox(ut,at)}),E.addEventListener("keydown",at=>{it.commitKey=1;let ut=-1;if(at.key==="Escape"?ut=0:at.key==="Enter"&&!this.data.multiLine?ut=2:at.key==="Tab"&&(it.commitKey=3),ut===-1)return;const{value:ht}=at.target;it.lastCommittedValue!==ht&&(it.lastCommittedValue=ht,it.userValue=ht,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:ht,willCommit:!0,commitKey:ut,selStart:at.target.selectionStart,selEnd:at.target.selectionEnd}}))});const rt=St;St=null,E.addEventListener("blur",at=>{if(!at.relatedTarget)return;const{value:ut}=at.target;it.userValue=ut,it.lastCommittedValue!==ut&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:ut,willCommit:!0,commitKey:it.commitKey,selStart:at.target.selectionStart,selEnd:at.target.selectionEnd}}),rt(at)}),this.data.actions?.Keystroke&&E.addEventListener("beforeinput",at=>{it.lastCommittedValue=null;const{data:ut,target:ht}=at,{value:_t,selectionStart:Ct,selectionEnd:Lt}=ht;let Bt=Ct,$t=Lt;switch(at.inputType){case"deleteWordBackward":{const Yt=_t.substring(0,Ct).match(/\w*[^\w]*$/);Yt&&(Bt-=Yt[0].length);break}case"deleteWordForward":{const Yt=_t.substring(Ct).match(/^[^\w]*\w*/);Yt&&($t+=Yt[0].length);break}case"deleteContentBackward":Ct===Lt&&(Bt-=1);break;case"deleteContentForward":Ct===Lt&&($t+=1);break}at.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:_t,change:ut||"",willCommit:!1,selStart:Bt,selEnd:$t}})}),this._setEventListeners(E,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],at=>at.target.value)}if(St&&E.addEventListener("blur",St),this.data.comb){const at=(this.data.rect[2]-this.data.rect[0])/G;E.classList.add("comb"),E.style.letterSpacing=`calc(${at}px * var(--scale-factor) - 1ch)`}}else E=document.createElement("div"),E.textContent=this.data.fieldValue,E.style.verticalAlign="middle",E.style.display="table-cell";return this._setTextStyle(E),this._setBackgroundColor(E),this._setDefaultPropertiesFromJS(E),this.container.append(E),this.container}}class H extends g{constructor(s){super(s,{isRenderable:!!s.data.hasOwnCanvas})}}class I extends g{constructor(s){super(s,{isRenderable:s.renderForms})}render(){const s=this.annotationStorage,b=this.data,E=b.id;let k=s.getValue(E,{value:b.exportValue===b.fieldValue}).value;typeof k=="string"&&(k=k!=="Off",s.setValue(E,{value:k})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const x=document.createElement("input");return v.add(x),x.setAttribute("data-element-id",E),x.disabled=b.readOnly,this._setRequired(x,this.data.required),x.type="checkbox",x.name=b.baseFieldName||b.fieldName,k&&x.setAttribute("checked",!0),x.setAttribute("exportValue",b.exportValue),x.tabIndex=t,x.addEventListener("change",G=>{const{name:X,checked:it}=G.target;for(const St of this._getElementsByName(X,E)){const rt=it&&St.exportValue===b.exportValue;St.domElement&&(St.domElement.checked=rt),s.setValue(St.id,{value:rt})}s.setValue(E,{value:it})}),x.addEventListener("resetform",G=>{const X=b.defaultFieldValue||"Off";G.target.checked=X===b.exportValue}),this.enableScripting&&this.hasJSActions&&(x.addEventListener("updatefromsandbox",G=>{const X={value(it){it.target.checked=it.detail.value!=="Off",s.setValue(E,{value:it.target.checked})}};this._dispatchEventFromSandbox(X,G)}),this._setEventListeners(x,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],G=>G.target.checked)),this._setBackgroundColor(x),this._setDefaultPropertiesFromJS(x),this.container.append(x),this.container}}class p extends g{constructor(s){super(s,{isRenderable:s.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const s=this.annotationStorage,b=this.data,E=b.id;let k=s.getValue(E,{value:b.fieldValue===b.buttonValue}).value;typeof k=="string"&&(k=k!==b.buttonValue,s.setValue(E,{value:k}));const x=document.createElement("input");if(v.add(x),x.setAttribute("data-element-id",E),x.disabled=b.readOnly,this._setRequired(x,this.data.required),x.type="radio",x.name=b.baseFieldName||b.fieldName,k&&x.setAttribute("checked",!0),x.tabIndex=t,x.addEventListener("change",G=>{const{name:X,checked:it}=G.target;for(const St of this._getElementsByName(X,E))s.setValue(St.id,{value:!1});s.setValue(E,{value:it})}),x.addEventListener("resetform",G=>{const X=b.defaultFieldValue;G.target.checked=X!=null&&X===b.buttonValue}),this.enableScripting&&this.hasJSActions){const G=b.buttonValue;x.addEventListener("updatefromsandbox",X=>{const it={value:St=>{const rt=G===St.detail.value;for(const at of this._getElementsByName(St.target.name)){const ut=rt&&at.id===E;at.domElement&&(at.domElement.checked=ut),s.setValue(at.id,{value:ut})}}};this._dispatchEventFromSandbox(it,X)}),this._setEventListeners(x,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],X=>X.target.checked)}return this._setBackgroundColor(x),this._setDefaultPropertiesFromJS(x),this.container.append(x),this.container}}class w extends _{constructor(s){super(s,{ignoreBorder:s.data.hasAppearance})}render(){const s=super.render();s.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(s.title=this.data.alternativeText);const b=s.lastChild;return this.enableScripting&&this.hasJSActions&&b&&(this._setDefaultPropertiesFromJS(b),b.addEventListener("updatefromsandbox",E=>{this._dispatchEventFromSandbox({},E)})),s}}class B extends g{constructor(s){super(s,{isRenderable:s.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const s=this.annotationStorage,b=this.data.id,E=s.getValue(b,{value:this.data.fieldValue}),k=document.createElement("select");v.add(k),k.setAttribute("data-element-id",b),k.disabled=this.data.readOnly,this._setRequired(k,this.data.required),k.name=this.data.baseFieldName||this.data.fieldName,k.tabIndex=t;let x=this.data.combo&&this.data.options.length>0;this.data.combo||(k.size=this.data.options.length,this.data.multiSelect&&(k.multiple=!0)),k.addEventListener("resetform",rt=>{const at=this.data.defaultFieldValue;for(const ut of k.options)ut.selected=ut.value===at});for(const rt of this.data.options){const at=document.createElement("option");at.textContent=rt.displayValue,at.value=rt.exportValue,E.value.includes(rt.exportValue)&&(at.setAttribute("selected",!0),x=!1),k.append(at)}let G=null;if(x){const rt=document.createElement("option");rt.value=" ",rt.setAttribute("hidden",!0),rt.setAttribute("selected",!0),k.prepend(rt),G=()=>{rt.remove(),k.removeEventListener("input",G),G=null},k.addEventListener("input",G)}const X=rt=>{const at=rt?"value":"textContent",{options:ut,multiple:ht}=k;return ht?Array.prototype.filter.call(ut,_t=>_t.selected).map(_t=>_t[at]):ut.selectedIndex===-1?null:ut[ut.selectedIndex][at]};let it=X(!1);const St=rt=>{const at=rt.target.options;return Array.prototype.map.call(at,ut=>({displayValue:ut.textContent,exportValue:ut.value}))};return this.enableScripting&&this.hasJSActions?(k.addEventListener("updatefromsandbox",rt=>{const at={value(ut){G?.();const ht=ut.detail.value,_t=new Set(Array.isArray(ht)?ht:[ht]);for(const Ct of k.options)Ct.selected=_t.has(Ct.value);s.setValue(b,{value:X(!0)}),it=X(!1)},multipleSelection(ut){k.multiple=!0},remove(ut){const ht=k.options,_t=ut.detail.remove;ht[_t].selected=!1,k.remove(_t),ht.length>0&&Array.prototype.findIndex.call(ht,Lt=>Lt.selected)===-1&&(ht[0].selected=!0),s.setValue(b,{value:X(!0),items:St(ut)}),it=X(!1)},clear(ut){for(;k.length!==0;)k.remove(0);s.setValue(b,{value:null,items:[]}),it=X(!1)},insert(ut){const{index:ht,displayValue:_t,exportValue:Ct}=ut.detail.insert,Lt=k.children[ht],Bt=document.createElement("option");Bt.textContent=_t,Bt.value=Ct,Lt?Lt.before(Bt):k.append(Bt),s.setValue(b,{value:X(!0),items:St(ut)}),it=X(!1)},items(ut){const{items:ht}=ut.detail;for(;k.length!==0;)k.remove(0);for(const _t of ht){const{displayValue:Ct,exportValue:Lt}=_t,Bt=document.createElement("option");Bt.textContent=Ct,Bt.value=Lt,k.append(Bt)}k.options.length>0&&(k.options[0].selected=!0),s.setValue(b,{value:X(!0),items:St(ut)}),it=X(!1)},indices(ut){const ht=new Set(ut.detail.indices);for(const _t of ut.target.options)_t.selected=ht.has(_t.index);s.setValue(b,{value:X(!0)}),it=X(!1)},editable(ut){ut.target.disabled=!ut.detail.editable}};this._dispatchEventFromSandbox(at,rt)}),k.addEventListener("input",rt=>{const at=X(!0);s.setValue(b,{value:at}),rt.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:it,changeEx:at,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(k,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],rt=>rt.target.value)):k.addEventListener("input",function(rt){s.setValue(b,{value:X(!0)})}),this.data.combo&&this._setTextStyle(k),this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.append(k),this.container}}class K extends i{constructor(s){const{data:b,elements:E}=s,k=!!(b.titleObj?.str||b.contentsObj?.str||b.richText?.str);super(s,{isRenderable:k}),this.elements=E}render(){this.container.classList.add("popupAnnotation");const s=new z({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),b=[];for(const E of this.elements)E.popup=s,b.push(E.data.id),E.addHighlightArea();return this.container.setAttribute("aria-controls",b.join(",")),this.container}}class z{#t=null;#e=this.#A.bind(this);#n=this.#_.bind(this);#i=this.#v.bind(this);#a=null;#s=null;#l=null;#o=null;#u=null;#r=null;#d=!1;#p=null;#h=null;#f=null;#c=null;#g=!1;constructor({container:s,color:b,elements:E,titleObj:k,modificationDate:x,contentsObj:G,richText:X,parent:it,rect:St,parentRect:rt,open:at}){this.#s=s,this.#c=k,this.#l=G,this.#f=X,this.#u=it,this.#a=b,this.#h=St,this.#r=rt,this.#o=E;const ut=y.PDFDateString.toDateObject(x);ut&&(this.#t=it.l10n.get("annotation_date_string",{date:ut.toLocaleDateString(),time:ut.toLocaleTimeString()})),this.trigger=E.flatMap(ht=>ht.getElementsToTriggerPopup());for(const ht of this.trigger)ht.addEventListener("click",this.#i),ht.addEventListener("mouseenter",this.#n),ht.addEventListener("mouseleave",this.#e);this.#s.hidden=!0,at&&this.#v()}render(){if(this.#p)return;const{page:{view:s},viewport:{rawDims:{pageWidth:b,pageHeight:E,pageX:k,pageY:x}}}=this.#u,G=this.#p=document.createElement("div");if(G.className="popup",this.#a){const Yt=G.style.outlineColor=c.Util.makeHexColor(...this.#a);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?G.style.backgroundColor=`color-mix(in srgb, ${Yt} 30%, white)`:G.style.backgroundColor=c.Util.makeHexColor(...this.#a.map(xe=>Math.floor(.7*(255-xe)+xe)))}const X=document.createElement("span");X.className="header";const it=document.createElement("h1");if(X.append(it),{dir:it.dir,str:it.textContent}=this.#c,G.append(X),this.#t){const Yt=document.createElement("span");Yt.classList.add("popupDate"),this.#t.then(ne=>{Yt.textContent=ne}),X.append(Yt)}const St=this.#l,rt=this.#f;if(rt?.str&&(!St?.str||St.str===rt.str))R.XfaLayer.render({xfaHtml:rt.html,intent:"richText",div:G}),G.lastChild.classList.add("richText","popupContent");else{const Yt=this._formatContents(St);G.append(Yt)}let at=!!this.#r,ut=at?this.#r:this.#h;for(const Yt of this.#o)if(!ut||c.Util.intersect(Yt.data.rect,ut)!==null){ut=Yt.data.rect,at=!0;break}const ht=c.Util.normalizeRect([ut[0],s[3]-ut[1]+s[1],ut[2],s[3]-ut[3]+s[1]]),Ct=at?ut[2]-ut[0]+5:0,Lt=ht[0]+Ct,Bt=ht[1],{style:$t}=this.#s;$t.left=`${100*(Lt-k)/b}%`,$t.top=`${100*(Bt-x)/E}%`,this.#s.append(G)}_formatContents({str:s,dir:b}){const E=document.createElement("p");E.classList.add("popupContent"),E.dir=b;const k=s.split(/(?:\r\n?|\n)/);for(let x=0,G=k.length;x<G;++x){const X=k[x];E.append(document.createTextNode(X)),x<G-1&&E.append(document.createElement("br"))}return E}#v(){this.#d=!this.#d,this.#d?(this.#_(),this.#s.addEventListener("click",this.#i)):(this.#A(),this.#s.removeEventListener("click",this.#i))}#_(){this.#p||this.render(),this.isVisible?this.#d&&this.#s.classList.add("focused"):(this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#A(){this.#s.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#g=this.isVisible,this.#g&&(this.#s.hidden=!0)}maybeShow(){this.#g&&(this.#g=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class Q extends i{constructor(s){const b=!!(s.data.popupRef||s.data.titleObj?.str||s.data.contentsObj?.str||s.data.richText?.str);super(s,{isRenderable:b,ignoreBorder:!0}),this.textContent=s.data.textContent,this.textPosition=s.data.textPosition,this.annotationEditorType=c.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const s=document.createElement("div");s.classList.add("annotationTextContent"),s.setAttribute("role","comment");for(const b of this.textContent){const E=document.createElement("span");E.textContent=b,s.append(E)}this.container.append(s)}return this.data.popupRef||this._createPopup(),this._editOnDoubleClick(),this.container}}o.FreeTextAnnotationElement=Q;class et extends i{#t=null;constructor(s){const b=!!(s.data.popupRef||s.data.titleObj?.str||s.data.contentsObj?.str||s.data.richText?.str);super(s,{isRenderable:b,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const s=this.data,{width:b,height:E}=a(s.rect),k=this.svgFactory.create(b,E,!0),x=this.#t=this.svgFactory.createElement("svg:line");return x.setAttribute("x1",s.rect[2]-s.lineCoordinates[0]),x.setAttribute("y1",s.rect[3]-s.lineCoordinates[1]),x.setAttribute("x2",s.rect[2]-s.lineCoordinates[2]),x.setAttribute("y2",s.rect[3]-s.lineCoordinates[3]),x.setAttribute("stroke-width",s.borderStyle.width||1),x.setAttribute("stroke","transparent"),x.setAttribute("fill","transparent"),k.append(x),this.container.append(k),s.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ft extends i{#t=null;constructor(s){const b=!!(s.data.popupRef||s.data.titleObj?.str||s.data.contentsObj?.str||s.data.richText?.str);super(s,{isRenderable:b,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const s=this.data,{width:b,height:E}=a(s.rect),k=this.svgFactory.create(b,E,!0),x=s.borderStyle.width,G=this.#t=this.svgFactory.createElement("svg:rect");return G.setAttribute("x",x/2),G.setAttribute("y",x/2),G.setAttribute("width",b-x),G.setAttribute("height",E-x),G.setAttribute("stroke-width",x||1),G.setAttribute("stroke","transparent"),G.setAttribute("fill","transparent"),k.append(G),this.container.append(k),s.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class dt extends i{#t=null;constructor(s){const b=!!(s.data.popupRef||s.data.titleObj?.str||s.data.contentsObj?.str||s.data.richText?.str);super(s,{isRenderable:b,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const s=this.data,{width:b,height:E}=a(s.rect),k=this.svgFactory.create(b,E,!0),x=s.borderStyle.width,G=this.#t=this.svgFactory.createElement("svg:ellipse");return G.setAttribute("cx",b/2),G.setAttribute("cy",E/2),G.setAttribute("rx",b/2-x/2),G.setAttribute("ry",E/2-x/2),G.setAttribute("stroke-width",x||1),G.setAttribute("stroke","transparent"),G.setAttribute("fill","transparent"),k.append(G),this.container.append(k),s.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class pt extends i{#t=null;constructor(s){const b=!!(s.data.popupRef||s.data.titleObj?.str||s.data.contentsObj?.str||s.data.richText?.str);super(s,{isRenderable:b,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const s=this.data,{width:b,height:E}=a(s.rect),k=this.svgFactory.create(b,E,!0);let x=[];for(const X of s.vertices){const it=X.x-s.rect[0],St=s.rect[3]-X.y;x.push(it+","+St)}x=x.join(" ");const G=this.#t=this.svgFactory.createElement(this.svgElementName);return G.setAttribute("points",x),G.setAttribute("stroke-width",s.borderStyle.width||1),G.setAttribute("stroke","transparent"),G.setAttribute("fill","transparent"),k.append(G),this.container.append(k),s.popupRef||this._createPopup(G,s),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class yt extends pt{constructor(s){super(s),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class st extends i{constructor(s){const b=!!(s.data.popupRef||s.data.titleObj?.str||s.data.contentsObj?.str||s.data.richText?.str);super(s,{isRenderable:b,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.popupRef||this._createPopup(),this.container}}class D extends i{#t=[];constructor(s){const b=!!(s.data.popupRef||s.data.titleObj?.str||s.data.contentsObj?.str||s.data.richText?.str);super(s,{isRenderable:b,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=c.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const s=this.data,{width:b,height:E}=a(s.rect),k=this.svgFactory.create(b,E,!0);for(const x of s.inkLists){let G=[];for(const it of x){const St=it.x-s.rect[0],rt=s.rect[3]-it.y;G.push(`${St},${rt}`)}G=G.join(" ");const X=this.svgFactory.createElement(this.svgElementName);this.#t.push(X),X.setAttribute("points",G),X.setAttribute("stroke-width",s.borderStyle.width||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),s.popupRef||this._createPopup(X,s),k.append(X)}return this.container.append(k),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}o.InkAnnotationElement=D;class S extends i{constructor(s){const b=!!(s.data.popupRef||s.data.titleObj?.str||s.data.contentsObj?.str||s.data.richText?.str);super(s,{isRenderable:b,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class d extends i{constructor(s){const b=!!(s.data.popupRef||s.data.titleObj?.str||s.data.contentsObj?.str||s.data.richText?.str);super(s,{isRenderable:b,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class r extends i{constructor(s){const b=!!(s.data.popupRef||s.data.titleObj?.str||s.data.contentsObj?.str||s.data.richText?.str);super(s,{isRenderable:b,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class f extends i{constructor(s){const b=!!(s.data.popupRef||s.data.titleObj?.str||s.data.contentsObj?.str||s.data.richText?.str);super(s,{isRenderable:b,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class T extends i{constructor(s){const b=!!(s.data.popupRef||s.data.titleObj?.str||s.data.contentsObj?.str||s.data.richText?.str);super(s,{isRenderable:b,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.popupRef||this._createPopup(),this.container}}o.StampAnnotationElement=T;class P extends i{#t=null;constructor(s){super(s,{isRenderable:!0});const{filename:b,content:E}=this.data.file;this.filename=(0,y.getFilenameFromUrl)(b,!0),this.content=E,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:b,content:E})}render(){this.container.classList.add("fileAttachmentAnnotation");let s;return this.data.hasAppearance?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),s.classList.add("popupTriggerArea"),s.addEventListener("dblclick",this._download.bind(this)),this.#t=s,!this.data.popupRef&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(),this.container.append(s),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class L{#t=null;#e=null;#n=new Map;constructor({div:s,accessibilityManager:b,annotationCanvasMap:E,l10n:k,page:x,viewport:G}){this.div=s,this.#t=b,this.#e=E,this.l10n=k,this.page=x,this.viewport=G,this.zIndex=0,this.l10n||=W.NullL10n}#i(s,b){const E=s.firstChild||s;E.id=`${y.AnnotationPrefix}${b}`,this.div.append(s),this.#t?.moveElementInDOM(this.div,s,E,!1)}async render(s){const{annotations:b}=s,E=this.div;(0,y.setLayerDimensions)(E,this.viewport);const k=new Map,x={data:null,layer:E,linkService:s.linkService,downloadManager:s.downloadManager,imageResourcesPath:s.imageResourcesPath||"",renderForms:s.renderForms!==!1,svgFactory:new y.DOMSVGFactory,annotationStorage:s.annotationStorage||new e.AnnotationStorage,enableScripting:s.enableScripting===!0,hasJSActions:s.hasJSActions,fieldObjects:s.fieldObjects,parent:this,elements:null};for(const G of b){if(G.noHTML)continue;const X=G.annotationType===c.AnnotationType.POPUP;if(X){const rt=k.get(G.id);if(!rt)continue;x.elements=rt}else{const{width:rt,height:at}=a(G.rect);if(rt<=0||at<=0)continue}x.data=G;const it=u.create(x);if(!it.isRenderable)continue;if(!X&&G.popupRef){const rt=k.get(G.popupRef);rt?rt.push(it):k.set(G.popupRef,[it])}it.annotationEditorType>0&&this.#n.set(it.data.id,it);const St=it.render();G.hidden&&(St.style.visibility="hidden"),this.#i(St,G.id)}this.#a(),await this.l10n.translate(E)}update({viewport:s}){const b=this.div;this.viewport=s,(0,y.setLayerDimensions)(b,{rotation:s.rotation}),this.#a(),b.hidden=!1}#a(){if(!this.#e)return;const s=this.div;for(const[b,E]of this.#e){const k=s.querySelector(`[data-annotation-id="${b}"]`);if(!k)continue;const{firstChild:x}=k;x?x.nodeName==="CANVAS"?x.replaceWith(E):x.before(E):k.append(E)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(s){return this.#n.get(s)}}o.AnnotationLayer=L}),((h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorConverters=void 0;function F(y){return Math.floor(Math.max(0,Math.min(1,y))*255).toString(16).padStart(2,"0")}class c{static CMYK_G([e,U,W,R]){return["G",1-Math.min(1,.3*e+.59*W+.11*U+R)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_HTML([e]){const U=F(e);return`#${U}${U}${U}`}static RGB_G([e,U,W]){return["G",.3*e+.59*U+.11*W]}static RGB_HTML([e,U,W]){const R=F(e),t=F(U),n=F(W);return`#${R}${t}${n}`}static T_HTML(){return"#00000000"}static CMYK_RGB([e,U,W,R]){return["RGB",1-Math.min(1,e+R),1-Math.min(1,W+R),1-Math.min(1,U+R)]}static CMYK_HTML(e){const U=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(U)}static RGB_CMYK([e,U,W]){const R=1-e,t=1-U,n=1-W,v=Math.min(R,t,n);return["CMYK",R,t,n,v]}}o.ColorConverters=c}),((h,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.NullL10n=void 0,o.getL10nFallback=c;const F={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image"};F.print_progress_percent="{{progress}}%";function c(U,W){switch(U){case"find_match_count":U=`find_match_count[${W.total===1?"one":"other"}]`;break;case"find_match_count_limit":U=`find_match_count_limit[${W.limit===1?"one":"other"}]`;break}return F[U]||""}function y(U,W){return W?U.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(R,t)=>t in W?W[t]:"{{"+t+"}}"):U}const e={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(U,W=null,R=c(U,W)){return y(R,W)},async translate(U){}};o.NullL10n=e}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaLayer=void 0;var c=F(25);class y{static setupStorage(U,W,R,t,n){const v=t.getValue(W,{value:null});switch(R.name){case"textarea":if(v.value!==null&&(U.textContent=v.value),n==="print")break;U.addEventListener("input",a=>{t.setValue(W,{value:a.target.value})});break;case"input":if(R.attributes.type==="radio"||R.attributes.type==="checkbox"){if(v.value===R.attributes.xfaOn?U.setAttribute("checked",!0):v.value===R.attributes.xfaOff&&U.removeAttribute("checked"),n==="print")break;U.addEventListener("change",a=>{t.setValue(W,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(v.value!==null&&U.setAttribute("value",v.value),n==="print")break;U.addEventListener("input",a=>{t.setValue(W,{value:a.target.value})})}break;case"select":if(v.value!==null){U.setAttribute("value",v.value);for(const a of R.children)a.attributes.value===v.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}U.addEventListener("input",a=>{const u=a.target.options,i=u.selectedIndex===-1?"":u[u.selectedIndex].value;t.setValue(W,{value:i})});break}}static setAttributes({html:U,element:W,storage:R=null,intent:t,linkService:n}){const{attributes:v}=W,a=U instanceof HTMLAnchorElement;v.type==="radio"&&(v.name=`${v.name}-${t}`);for(const[u,i]of Object.entries(v))if(i!=null)switch(u){case"class":i.length&&U.setAttribute(u,i.join(" "));break;case"dataId":break;case"id":U.setAttribute("data-element-id",i);break;case"style":Object.assign(U.style,i);break;case"textContent":U.textContent=i;break;default:(!a||u!=="href"&&u!=="newWindow")&&U.setAttribute(u,i)}a&&n.addLinkAttributes(U,v.href,v.newWindow),R&&v.dataId&&this.setupStorage(U,v.dataId,W,R)}static render(U){const W=U.annotationStorage,R=U.linkService,t=U.xfaHtml,n=U.intent||"display",v=document.createElement(t.name);t.attributes&&this.setAttributes({html:v,element:t,intent:n,linkService:R});const a=[[t,-1,v]],u=U.div;if(u.append(v),U.viewport){const _=`matrix(${U.viewport.transform.join(",")})`;u.style.transform=_}n!=="richText"&&u.setAttribute("class","xfaLayer xfaFont");const i=[];for(;a.length>0;){const[_,m,g]=a.at(-1);if(m+1===_.children.length){a.pop();continue}const C=_.children[++a.at(-1)[1]];if(C===null)continue;const{name:H}=C;if(H==="#text"){const p=document.createTextNode(C.value);i.push(p),g.append(p);continue}const I=C?.attributes?.xmlns?document.createElementNS(C.attributes.xmlns,H):document.createElement(H);if(g.append(I),C.attributes&&this.setAttributes({html:I,element:C,storage:W,intent:n,linkService:R}),C.children&&C.children.length>0)a.push([C,-1,I]);else if(C.value){const p=document.createTextNode(C.value);c.XfaText.shouldBuildText(H)&&i.push(p),I.append(p)}}for(const _ of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))_.setAttribute("readOnly",!0);return{textDivs:i}}static update(U){const W=`matrix(${U.viewport.transform.join(",")})`;U.div.style.transform=W,U.div.hidden=!1}}o.XfaLayer=y}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.InkEditor=void 0;var c=F(1),y=F(4),e=F(29),U=F(5);class W extends y.AnnotationEditor{#t=0;#e=0;#n=this.canvasContextMenu.bind(this);#i=this.canvasPointermove.bind(this);#a=this.canvasPointerleave.bind(this);#s=this.canvasPointerup.bind(this);#l=this.canvasPointerdown.bind(this);#o=new Path2D;#u=!1;#r=!1;#d=!1;#p=null;#h=0;#f=0;#c=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _l10nPromise;static _type="ink";constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(n=>[n,t.get(n)]))}static updateDefaultParams(t,n){switch(t){case c.AnnotationEditorParamsType.INK_THICKNESS:W._defaultThickness=n;break;case c.AnnotationEditorParamsType.INK_COLOR:W._defaultColor=n;break;case c.AnnotationEditorParamsType.INK_OPACITY:W._defaultOpacity=n/100;break}}updateParams(t,n){switch(t){case c.AnnotationEditorParamsType.INK_THICKNESS:this.#g(n);break;case c.AnnotationEditorParamsType.INK_COLOR:this.#v(n);break;case c.AnnotationEditorParamsType.INK_OPACITY:this.#_(n);break}}static get defaultPropertiesToUpdate(){return[[c.AnnotationEditorParamsType.INK_THICKNESS,W._defaultThickness],[c.AnnotationEditorParamsType.INK_COLOR,W._defaultColor||y.AnnotationEditor._defaultLineColor],[c.AnnotationEditorParamsType.INK_OPACITY,Math.round(W._defaultOpacity*100)]]}get propertiesToUpdate(){return[[c.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||W._defaultThickness],[c.AnnotationEditorParamsType.INK_COLOR,this.color||W._defaultColor||y.AnnotationEditor._defaultLineColor],[c.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??W._defaultOpacity))]]}#g(t){const n=this.thickness;this.addCommands({cmd:()=>{this.thickness=t,this.#x()},undo:()=>{this.thickness=n,this.#x()},mustExec:!0,type:c.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#v(t){const n=this.color;this.addCommands({cmd:()=>{this.color=t,this.#b()},undo:()=>{this.color=n,this.#b()},mustExec:!0,type:c.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#_(t){t/=100;const n=this.opacity;this.addCommands({cmd:()=>{this.opacity=t,this.#b()},undo:()=>{this.opacity=n,this.#b()},mustExec:!0,type:c.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(this.#C(),this.#k()),this.isAttachedToDOM||(this.parent.add(this),this.#E()),this.#x())}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#p.disconnect(),this.#p=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,n]=this.parentDimensions,v=this.width*t,a=this.height*n;this.setDimensions(v,a)}enableEditMode(){this.#u||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",this.#l))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#l))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#A(){const{parentRotation:t,parentDimensions:[n,v]}=this;switch(t){case 90:return[0,v,v,n];case 180:return[n,v,n,v];case 270:return[n,0,v,n];default:return[0,0,n,v]}}#T(){const{ctx:t,color:n,opacity:v,thickness:a,parentScale:u,scaleFactor:i}=this;t.lineWidth=a*u/i,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${n}${(0,U.opacityToHex)(v)}`}#F(t,n){this.canvas.addEventListener("contextmenu",this.#n),this.canvas.addEventListener("pointerleave",this.#a),this.canvas.addEventListener("pointermove",this.#i),this.canvas.addEventListener("pointerup",this.#s),this.canvas.removeEventListener("pointerdown",this.#l),this.isEditing=!0,this.#d||(this.#d=!0,this.#E(),this.thickness||=W._defaultThickness,this.color||=W._defaultColor||y.AnnotationEditor._defaultLineColor,this.opacity??=W._defaultOpacity),this.currentPath.push([t,n]),this.#r=!1,this.#T(),this.#c=()=>{this.#I(),this.#c&&window.requestAnimationFrame(this.#c)},window.requestAnimationFrame(this.#c)}#R(t,n){const[v,a]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===v&&n===a)return;const u=this.currentPath;let i=this.#o;if(u.push([t,n]),this.#r=!0,u.length<=2){i.moveTo(...u[0]),i.lineTo(t,n);return}u.length===3&&(this.#o=i=new Path2D,i.moveTo(...u[0])),this.#S(i,...u.at(-3),...u.at(-2),t,n)}#L(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);this.#o.lineTo(...t)}#O(t,n){this.#c=null,t=Math.min(Math.max(t,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),this.#R(t,n),this.#L();let v;if(this.currentPath.length!==1)v=this.#w();else{const m=[t,n];v=[[m,m.slice(),m.slice(),m]]}const a=this.#o,u=this.currentPath;this.currentPath=[],this.#o=new Path2D;const i=()=>{this.allRawPaths.push(u),this.paths.push(v),this.bezierPath2D.push(a),this.rebuild()},_=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#C(),this.#k()),this.#x())};this.addCommands({cmd:i,undo:_,mustExec:!0})}#I(){if(!this.#r)return;this.#r=!1;const t=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),v=n.map(i=>i[0]),a=n.map(i=>i[1]);Math.min(...v)-t,Math.max(...v)+t,Math.min(...a)-t,Math.max(...a)+t;const{ctx:u}=this;u.save(),u.clearRect(0,0,this.canvas.width,this.canvas.height);for(const i of this.bezierPath2D)u.stroke(i);u.stroke(this.#o),u.restore()}#S(t,n,v,a,u,i,_){const m=(n+a)/2,g=(v+u)/2,C=(a+i)/2,H=(u+_)/2;t.bezierCurveTo(m+2*(a-m)/3,g+2*(u-g)/3,C+2*(a-C)/3,H+2*(u-H)/3,C,H)}#w(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const n=[];let v,[a,u]=t[0];for(v=1;v<t.length-2;v++){const[I,p]=t[v],[w,B]=t[v+1],K=(I+w)/2,z=(p+B)/2,Q=[a+2*(I-a)/3,u+2*(p-u)/3],et=[K+2*(I-K)/3,z+2*(p-z)/3];n.push([[a,u],Q,et,[K,z]]),[a,u]=[K,z]}const[i,_]=t[v],[m,g]=t[v+1],C=[a+2*(i-a)/3,u+2*(_-u)/3],H=[m+2*(i-m)/3,g+2*(_-g)/3];return n.push([[a,u],C,H,[m,g]]),n}#b(){if(this.isEmpty()){this.#y();return}this.#T();const{canvas:t,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),this.#y();for(const v of this.bezierPath2D)n.stroke(v)}commit(){this.#u||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#u=!0,this.div.classList.add("disabled"),this.#x(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(t){super.focusin(t),this.enableEditMode()}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||this.#u||(this.setInForeground(),t.preventDefault(),t.type!=="mouse"&&this.div.focus(),this.#F(t.offsetX,t.offsetY))}canvasContextMenu(t){t.preventDefault()}canvasPointermove(t){t.preventDefault(),this.#R(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#D(t)}canvasPointerleave(t){this.#D(t)}#D(t){this.canvas.removeEventListener("pointerleave",this.#a),this.canvas.removeEventListener("pointermove",this.#i),this.canvas.removeEventListener("pointerup",this.#s),this.canvas.addEventListener("pointerdown",this.#l),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",this.#n)},10),this.#O(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#C(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",W._l10nPromise.get("editor_ink_canvas_aria_label").then(t=>this.canvas?.setAttribute("aria-label",t)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#k(){this.#p=new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)}),this.#p.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#u}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),W._l10nPromise.get("editor_ink2_aria_label").then(_=>this.div?.setAttribute("aria-label",_));const[v,a,u,i]=this.#A();if(this.setAt(v,a,0,0),this.setDims(u,i),this.#C(),this.width){const[_,m]=this.parentDimensions;this.setAspectRatio(this.width*_,this.height*m),this.setAt(t*_,n*m,this.width*_,this.height*m),this.#d=!0,this.#E(),this.setDims(this.width*_,this.height*m),this.#b(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#k(),this.div}#E(){if(!this.#d)return;const[t,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*n),this.#y()}setDimensions(t,n){const v=Math.round(t),a=Math.round(n);if(this.#h===v&&this.#f===a)return;this.#h=v,this.#f=a,this.canvas.style.visibility="hidden";const[u,i]=this.parentDimensions;this.width=t/u,this.height=n/i,this.fixAndSetPosition(),this.#u&&this.#m(t,n),this.#E(),this.#b(),this.canvas.style.visibility="visible",this.fixDims()}#m(t,n){const v=this.#H(),a=(t-v)/this.#e,u=(n-v)/this.#t;this.scaleFactor=Math.min(a,u)}#y(){const t=this.#H()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#j(t){const n=new Path2D;for(let v=0,a=t.length;v<a;v++){const[u,i,_,m]=t[v];v===0&&n.moveTo(...u),n.bezierCurveTo(i[0],i[1],_[0],_[1],m[0],m[1])}return n}static#N(t,n,v){const[a,u,i,_]=n;switch(v){case 0:for(let m=0,g=t.length;m<g;m+=2)t[m]+=a,t[m+1]=_-t[m+1];break;case 90:for(let m=0,g=t.length;m<g;m+=2){const C=t[m];t[m]=t[m+1]+a,t[m+1]=C+u}break;case 180:for(let m=0,g=t.length;m<g;m+=2)t[m]=i-t[m],t[m+1]+=u;break;case 270:for(let m=0,g=t.length;m<g;m+=2){const C=t[m];t[m]=i-t[m+1],t[m+1]=_-C}break;default:throw new Error("Invalid rotation")}return t}static#B(t,n,v){const[a,u,i,_]=n;switch(v){case 0:for(let m=0,g=t.length;m<g;m+=2)t[m]-=a,t[m+1]=_-t[m+1];break;case 90:for(let m=0,g=t.length;m<g;m+=2){const C=t[m];t[m]=t[m+1]-u,t[m+1]=C-a}break;case 180:for(let m=0,g=t.length;m<g;m+=2)t[m]=i-t[m],t[m+1]-=u;break;case 270:for(let m=0,g=t.length;m<g;m+=2){const C=t[m];t[m]=_-t[m+1],t[m+1]=i-C}break;default:throw new Error("Invalid rotation")}return t}#P(t,n,v,a){const u=[],i=this.thickness/2,_=t*n+i,m=t*v+i;for(const g of this.paths){const C=[],H=[];for(let I=0,p=g.length;I<p;I++){const[w,B,K,z]=g[I],Q=t*w[0]+_,et=t*w[1]+m,ft=t*B[0]+_,dt=t*B[1]+m,pt=t*K[0]+_,yt=t*K[1]+m,st=t*z[0]+_,D=t*z[1]+m;I===0&&(C.push(Q,et),H.push(Q,et)),C.push(ft,dt,pt,yt,st,D),H.push(ft,dt),I===p-1&&H.push(st,D)}u.push({bezier:W.#N(C,a,this.rotation),points:W.#N(H,a,this.rotation)})}return u}#M(){let t=1/0,n=-1/0,v=1/0,a=-1/0;for(const u of this.paths)for(const[i,_,m,g]of u){const C=c.Util.bezierBoundingBox(...i,..._,...m,...g);t=Math.min(t,C[0]),v=Math.min(v,C[1]),n=Math.max(n,C[2]),a=Math.max(a,C[3])}return[t,v,n,a]}#H(){return this.#u?Math.ceil(this.thickness*this.parentScale):0}#x(t=!1){if(this.isEmpty())return;if(!this.#u){this.#b();return}const n=this.#M(),v=this.#H();this.#e=Math.max(y.AnnotationEditor.MIN_SIZE,n[2]-n[0]),this.#t=Math.max(y.AnnotationEditor.MIN_SIZE,n[3]-n[1]);const a=Math.ceil(v+this.#e*this.scaleFactor),u=Math.ceil(v+this.#t*this.scaleFactor),[i,_]=this.parentDimensions;this.width=a/i,this.height=u/_,this.setAspectRatio(a,u);const m=this.translationX,g=this.translationY;this.translationX=-n[0],this.translationY=-n[1],this.#E(),this.#b(),this.#h=a,this.#f=u,this.setDims(a,u);const C=t?v/this.scaleFactor/2:0;this.translate(m-this.translationX-C,g-this.translationY-C)}static deserialize(t,n,v){if(t instanceof e.InkAnnotationElement)return null;const a=super.deserialize(t,n,v);a.thickness=t.thickness,a.color=c.Util.makeHexColor(...t.color),a.opacity=t.opacity;const[u,i]=a.pageDimensions,_=a.width*u,m=a.height*i,g=a.parentScale,C=t.thickness/2;a.#u=!0,a.#h=Math.round(_),a.#f=Math.round(m);const{paths:H,rect:I,rotation:p}=t;for(let{bezier:B}of H){B=W.#B(B,I,p);const K=[];a.paths.push(K);let z=g*(B[0]-C),Q=g*(B[1]-C);for(let ft=2,dt=B.length;ft<dt;ft+=6){const pt=g*(B[ft]-C),yt=g*(B[ft+1]-C),st=g*(B[ft+2]-C),D=g*(B[ft+3]-C),S=g*(B[ft+4]-C),d=g*(B[ft+5]-C);K.push([[z,Q],[pt,yt],[st,D],[S,d]]),z=S,Q=d}const et=this.#j(K);a.bezierPath2D.push(et)}const w=a.#M();return a.#e=Math.max(y.AnnotationEditor.MIN_SIZE,w[2]-w[0]),a.#t=Math.max(y.AnnotationEditor.MIN_SIZE,w[3]-w[1]),a.#m(_,m),a}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),n=y.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:c.AnnotationEditorType.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:this.#P(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation}}}o.InkEditor=W}),((h,o,F)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.StampEditor=void 0;var c=F(4),y=F(1),e=F(6),U=F(29);class W extends c.AnnotationEditor{#t=null;#e=null;#n=null;#i=null;#a=null;#s=null;#l=null;#o=!1;static _type="stamp";constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl}#u(){if(this.#e){this._uiManager.imageManager.getFromId(this.#e).then(n=>{if(!n){this.remove();return}this.#t=n.bitmap,this.#r()});return}if(this.#i){const n=this.#i;this.#i=null,this.#n=this._uiManager.imageManager.getFromUrl(n).then(v=>{if(this.#n=null,!v){this.remove();return}({bitmap:this.#t,id:this.#e,isSvg:this.#o}=v),this.#r()});return}const t=document.createElement("input");t.type="file",t.accept="image/*",this.#n=new Promise(n=>{t.addEventListener("change",async()=>{if(this.#n=null,!t.files||t.files.length===0)this.remove();else{const v=await this._uiManager.imageManager.getFromFile(t.files[0]);if(!v){this.remove();return}({bitmap:this.#t,id:this.#e,isSvg:this.#o}=v),this.#r()}n()}),t.addEventListener("cancel",()=>{this.#n=null,this.remove(),n()})}),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#s?.disconnect(),this.#s=null),super.remove()}rebuild(){super.rebuild(),this.div!==null&&(this.#e&&this.#u(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this.div.draggable=!0,this.parent.addUndoableEditor(this),this.div.focus()}isEmpty(){return this.#n===null&&this.#t===null&&this.#i===null}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.#t?this.#r():(this.div.classList.add("loading"),this.#u()),this.width){const[v,a]=this.parentDimensions;this.setAt(t*v,n*a,this.width*v,this.height*a)}return this.div}#r(){const{div:t}=this;let{width:n,height:v}=this.#t;const[a,u]=this.pageDimensions,i=.75;if(this.width)n=this.width*a,v=this.height*u;else if(n>i*a||v>i*u){const C=Math.min(i*a/n,i*u/v);n*=C,v*=C}const[_,m]=this.parentDimensions;this.setDims(n*_/a,v*m/u);const g=this.#a=document.createElement("canvas");t.append(g),this.#h(n,v),this.#c(),t.classList.remove("loading")}#d(t,n){const[v,a]=this.parentDimensions;this.width=t/v,this.height=n/a,this.setDims(t,n),this.fixAndSetPosition(),this.#l!==null&&clearTimeout(this.#l);const u=200;this.#l=setTimeout(()=>{this.#l=null,this.#h(t,n)},u)}#p(t,n){const{width:v,height:a}=this.#t;let u=v,i=a,_=this.#t;for(;u>2*t||i>2*n;){const m=u,g=i;u>2*t&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2)),i>2*n&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2));const C=new OffscreenCanvas(u,i);C.getContext("2d").drawImage(_,0,0,m,g,0,0,u,i),_=C.transferToImageBitmap()}return _}#h(t,n){const v=this.#a;if(!v||v.width===t&&v.height===n)return;v.width=t,v.height=n;const a=this.#o?this.#t:this.#p(t,n),u=v.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(a,0,0,a.width,a.height,0,0,t,n)}#f(t){if(t){if(this.#o){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=this.#t,n.getContext("2d").drawImage(this.#t,0,0),n.toDataURL()}if(this.#o){const[n,v]=this.pageDimensions,a=Math.round(this.width*n*e.PixelsPerInch.PDF_TO_CSS_UNITS),u=Math.round(this.height*v*e.PixelsPerInch.PDF_TO_CSS_UNITS),i=new OffscreenCanvas(a,u);return i.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,u),i.transferToImageBitmap()}return structuredClone(this.#t)}#c(){this.#s=new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&this.#d(n.width,n.height)}),this.#s.observe(this.div)}static deserialize(t,n,v){if(t instanceof U.StampAnnotationElement)return null;const a=super.deserialize(t,n,v),{rect:u,bitmapUrl:i,bitmapId:_,isSvg:m}=t;_&&v.imageManager.isValidId(_)?a.#e=_:a.#i=i,a.#o=m;const[g,C]=a.pageDimensions;return a.width=(u[2]-u[0])/g,a.height=(u[3]-u[1])/C,a}serialize(t=!1,n=null){if(this.isEmpty())return null;const v={annotationType:y.AnnotationEditorType.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#o};if(t)return v.bitmapUrl=this.#f(!0),v;if(n===null)return v;n.stamps||=new Map;const a=this.#o?(v.rect[2]-v.rect[0])*(v.rect[3]-v.rect[1]):null;if(!n.stamps.has(this.#e))n.stamps.set(this.#e,{area:a,serialized:v}),v.bitmap=this.#f(!1);else if(this.#o){const u=n.stamps.get(this.#e);a>u.area&&(u.area=a,u.serialized.bitmap.close(),u.serialized.bitmap=this.#f(!1))}return v}}o.StampEditor=W})],__webpack_module_cache__={};function __w_pdfjs_require__(h){var o=__webpack_module_cache__[h];if(o!==void 0)return o.exports;var F=__webpack_module_cache__[h]={exports:{}};return __webpack_modules__[h](F,F.exports,__w_pdfjs_require__),F.exports}var __webpack_exports__={};return(()=>{var h=__webpack_exports__;Object.defineProperty(h,"__esModule",{value:!0}),Object.defineProperty(h,"AbortException",{enumerable:!0,get:function(){return o.AbortException}}),Object.defineProperty(h,"AnnotationEditorLayer",{enumerable:!0,get:function(){return e.AnnotationEditorLayer}}),Object.defineProperty(h,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return o.AnnotationEditorParamsType}}),Object.defineProperty(h,"AnnotationEditorType",{enumerable:!0,get:function(){return o.AnnotationEditorType}}),Object.defineProperty(h,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return U.AnnotationEditorUIManager}}),Object.defineProperty(h,"AnnotationLayer",{enumerable:!0,get:function(){return W.AnnotationLayer}}),Object.defineProperty(h,"AnnotationMode",{enumerable:!0,get:function(){return o.AnnotationMode}}),Object.defineProperty(h,"CMapCompressionType",{enumerable:!0,get:function(){return o.CMapCompressionType}}),Object.defineProperty(h,"FeatureTest",{enumerable:!0,get:function(){return o.FeatureTest}}),Object.defineProperty(h,"GlobalWorkerOptions",{enumerable:!0,get:function(){return R.GlobalWorkerOptions}}),Object.defineProperty(h,"ImageKind",{enumerable:!0,get:function(){return o.ImageKind}}),Object.defineProperty(h,"InvalidPDFException",{enumerable:!0,get:function(){return o.InvalidPDFException}}),Object.defineProperty(h,"MissingPDFException",{enumerable:!0,get:function(){return o.MissingPDFException}}),Object.defineProperty(h,"OPS",{enumerable:!0,get:function(){return o.OPS}}),Object.defineProperty(h,"PDFDataRangeTransport",{enumerable:!0,get:function(){return F.PDFDataRangeTransport}}),Object.defineProperty(h,"PDFDateString",{enumerable:!0,get:function(){return c.PDFDateString}}),Object.defineProperty(h,"PDFWorker",{enumerable:!0,get:function(){return F.PDFWorker}}),Object.defineProperty(h,"PasswordResponses",{enumerable:!0,get:function(){return o.PasswordResponses}}),Object.defineProperty(h,"PermissionFlag",{enumerable:!0,get:function(){return o.PermissionFlag}}),Object.defineProperty(h,"PixelsPerInch",{enumerable:!0,get:function(){return c.PixelsPerInch}}),Object.defineProperty(h,"PromiseCapability",{enumerable:!0,get:function(){return o.PromiseCapability}}),Object.defineProperty(h,"RenderingCancelledException",{enumerable:!0,get:function(){return c.RenderingCancelledException}}),Object.defineProperty(h,"SVGGraphics",{enumerable:!0,get:function(){return F.SVGGraphics}}),Object.defineProperty(h,"UnexpectedResponseException",{enumerable:!0,get:function(){return o.UnexpectedResponseException}}),Object.defineProperty(h,"Util",{enumerable:!0,get:function(){return o.Util}}),Object.defineProperty(h,"VerbosityLevel",{enumerable:!0,get:function(){return o.VerbosityLevel}}),Object.defineProperty(h,"XfaLayer",{enumerable:!0,get:function(){return t.XfaLayer}}),Object.defineProperty(h,"build",{enumerable:!0,get:function(){return F.build}}),Object.defineProperty(h,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return o.createValidAbsoluteUrl}}),Object.defineProperty(h,"getDocument",{enumerable:!0,get:function(){return F.getDocument}}),Object.defineProperty(h,"getFilenameFromUrl",{enumerable:!0,get:function(){return c.getFilenameFromUrl}}),Object.defineProperty(h,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return c.getPdfFilenameFromUrl}}),Object.defineProperty(h,"getXfaPageViewport",{enumerable:!0,get:function(){return c.getXfaPageViewport}}),Object.defineProperty(h,"isDataScheme",{enumerable:!0,get:function(){return c.isDataScheme}}),Object.defineProperty(h,"isPdfFile",{enumerable:!0,get:function(){return c.isPdfFile}}),Object.defineProperty(h,"loadScript",{enumerable:!0,get:function(){return c.loadScript}}),Object.defineProperty(h,"normalizeUnicode",{enumerable:!0,get:function(){return o.normalizeUnicode}}),Object.defineProperty(h,"renderTextLayer",{enumerable:!0,get:function(){return y.renderTextLayer}}),Object.defineProperty(h,"setLayerDimensions",{enumerable:!0,get:function(){return c.setLayerDimensions}}),Object.defineProperty(h,"shadow",{enumerable:!0,get:function(){return o.shadow}}),Object.defineProperty(h,"updateTextLayer",{enumerable:!0,get:function(){return y.updateTextLayer}}),Object.defineProperty(h,"version",{enumerable:!0,get:function(){return F.version}});var o=__w_pdfjs_require__(1),F=__w_pdfjs_require__(2),c=__w_pdfjs_require__(6),y=__w_pdfjs_require__(26),e=__w_pdfjs_require__(27),U=__w_pdfjs_require__(5),W=__w_pdfjs_require__(29),R=__w_pdfjs_require__(14),t=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf)),pdf.exports}var hasRequiredCore_min;function requireCore_min(){return hasRequiredCore_min||(hasRequiredCore_min=1,(function(h){var o=requireReact(),F=requirePdf();function c(l){var A=Object.create(null);return l&&Object.keys(l).forEach((function(O){if(O!=="default"){var N=Object.getOwnPropertyDescriptor(l,O);Object.defineProperty(A,O,N.get?N:{enumerable:!0,get:function(){return l[O]}})}})),A.default=l,Object.freeze(A)}var y,e=c(o),U=c(F);h.AnnotationType=void 0,(y=h.AnnotationType||(h.AnnotationType={}))[y.Text=1]="Text",y[y.Link=2]="Link",y[y.FreeText=3]="FreeText",y[y.Line=4]="Line",y[y.Square=5]="Square",y[y.Circle=6]="Circle",y[y.Polygon=7]="Polygon",y[y.Polyline=8]="Polyline",y[y.Highlight=9]="Highlight",y[y.Underline=10]="Underline",y[y.Squiggly=11]="Squiggly",y[y.StrikeOut=12]="StrikeOut",y[y.Stamp=13]="Stamp",y[y.Caret=14]="Caret",y[y.Ink=15]="Ink",y[y.Popup=16]="Popup",y[y.FileAttachment=17]="FileAttachment";var W=function(l,A){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var V in N)Object.prototype.hasOwnProperty.call(N,V)&&(O[V]=N[V])},W(l,A)};function R(l,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");function O(){this.constructor=l}W(l,A),l.prototype=A===null?Object.create(A):(O.prototype=A.prototype,new O)}var t,n=function(){return n=Object.assign||function(l){for(var A,O=1,N=arguments.length;O<N;O++)for(var V in A=arguments[O])Object.prototype.hasOwnProperty.call(A,V)&&(l[V]=A[V]);return l},n.apply(this,arguments)};h.TextDirection=void 0,(t=h.TextDirection||(h.TextDirection={})).RightToLeft="RTL",t.LeftToRight="LTR";var v,a=e.createContext({currentTheme:"light",direction:h.TextDirection.LeftToRight,setCurrentTheme:function(){}}),u=function(l){var A=[];return Object.keys(l).forEach((function(O){O&&l[O]&&A.push(O)})),A.join(" ")},i=typeof window<"u"?e.useLayoutEffect:e.useEffect,_=function(l){var A=e.useRef(null),O=l.once,N=l.threshold,V=l.onVisibilityChanged;return i((function(){var q=A.current;if(q){var Z=new IntersectionObserver((function($){$.forEach((function(j){var J=j.isIntersecting,Y=j.intersectionRatio;V({isVisible:J,ratio:Y}),J&&O&&(Z.unobserve(q),Z.disconnect())}))}),{threshold:N||0});return Z.observe(q),function(){Z.unobserve(q),Z.disconnect()}}}),[]),A},m=function(l){var A=l.children,O=l.ignoreDirection,N=O!==void 0&&O,V=l.size,q=V===void 0?24:V,Z=e.useContext(a).direction,$=!N&&Z===h.TextDirection.RightToLeft,j="".concat(q||24,"px");return e.createElement("svg",{"aria-hidden":"true",className:u({"rpv-core__icon":!0,"rpv-core__icon--rtl":$}),focusable:"false",height:j,viewBox:"0 0 24 24",width:j},A)},g=function(){return e.createElement(m,{size:16},e.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},C=function(l){var A=l.children,O=l.testId,N=l.onClick,V=e.useContext(a).direction===h.TextDirection.RightToLeft,q=O?{"data-testid":O}:{};return e.createElement("button",n({className:u({"rpv-core__primary-button":!0,"rpv-core__primary-button--rtl":V}),type:"button",onClick:N},q),A)},H=function(l){var A=l.size,O=A===void 0?"4rem":A,N=l.testId,V=e.useState(!1),q=V[0],Z=V[1],$=N?{"data-testid":N}:{},j=_({onVisibilityChanged:function(J){Z(J.isVisible)}});return e.createElement("div",n({},$,{className:u({"rpv-core__spinner":!0,"rpv-core__spinner--animating":q}),ref:j,style:{height:O,width:O}}))},I=function(l){var A=l.ariaLabel,O=A===void 0?"":A,N=l.autoFocus,V=N!==void 0&&N,q=l.placeholder,Z=q===void 0?"":q,$=l.testId,j=l.type,J=j===void 0?"text":j,Y=l.value,ct=Y===void 0?"":Y,lt=l.onChange,ot=l.onKeyDown,At=ot===void 0?function(){}:ot,bt=e.useContext(a).direction,vt=e.useRef(),Xt=bt===h.TextDirection.RightToLeft,xt={ref:vt,"data-testid":"","aria-label":O,className:u({"rpv-core__textbox":!0,"rpv-core__textbox--rtl":Xt}),placeholder:Z,value:ct,onChange:function(Ft){return lt(Ft.target.value)},onKeyDown:At};return $&&(xt["data-testid"]=$),i((function(){if(V){var Ft=vt.current;if(Ft){var Nt=window.scrollX,Pt=window.scrollY;Ft.focus(),window.scrollTo(Nt,Pt)}}}),[]),J==="text"?e.createElement("input",n({type:"text"},xt)):e.createElement("input",n({type:"password"},xt))};(function(l){l[l.ExitFullScreen=0]="ExitFullScreen",l[l.FullScreenChange=1]="FullScreenChange",l[l.FullScreenElement=2]="FullScreenElement",l[l.FullScreenEnabled=3]="FullScreenEnabled",l[l.RequestFullScreen=4]="RequestFullScreen"})(v||(v={}));var p,w={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},B={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},K={ExitFullScreen:"msExitFullscreen",FullScreenChange:"msFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},z=typeof window<"u",Q=z&&(v.FullScreenEnabled in document&&w||B.FullScreenEnabled in document&&B||K.FullScreenEnabled in document&&K)||w,et=function(){return z&&Q.FullScreenEnabled in document&&document[Q.FullScreenEnabled]===!0},ft=function(l){return z?l[Q.ExitFullScreen]():Promise.resolve({})},dt=function(){return z?document[Q.FullScreenElement]:null},pt=function(l,A){var O=e.useRef(),N=function(){O.current&&clearTimeout(O.current)};return e.useEffect((function(){return function(){return N()}}),[]),e.useCallback((function(){for(var V=[],q=0;q<arguments.length;q++)V[q]=arguments[q];N(),O.current=setTimeout((function(){l.apply(void 0,V)}),A)}),[l,A])},yt=function(){var l=e.useRef(!1);return e.useEffect((function(){return l.current=!0,function(){l.current=!1}}),[]),l},st=function(l){var A=e.useRef(l);return e.useEffect((function(){A.current=l}),[l]),A.current};(function(l){l.NotRenderedYet="NotRenderedYet",l.Rendering="Rendering",l.Rendered="Rendered"})(p||(p={}));var D,S=-9999,d=function(l){var A=l.doc,O=A.numPages,N=A.loadingTask.docId,V=e.useMemo((function(){return Array(O).fill(null).map((function($,j){return{pageIndex:j,renderStatus:p.NotRenderedYet,visibility:S}}))}),[N]),q=e.useRef({currentRenderingPage:-1,startRange:0,endRange:O-1,visibilities:V}),Z=function($,j){q.current.visibilities[$].visibility=j};return{getHighestPriorityPage:function(){var $=q.current.visibilities.slice(q.current.startRange,q.current.endRange+1).filter((function(lt){return lt.visibility>S}));if(!$.length)return-1;for(var j=$[0].pageIndex,J=$[$.length-1].pageIndex,Y=$.length,ct=0;ct<Y;ct++){if($[ct].renderStatus===p.Rendering)return-1;if($[ct].renderStatus===p.NotRenderedYet)return $[ct].pageIndex}return J+1<O&&q.current.visibilities[J+1].renderStatus!==p.Rendered?J+1:j-1>=0&&q.current.visibilities[j-1].renderStatus!==p.Rendered?j-1:-1},isInRange:function($){return $>=q.current.startRange&&$<=q.current.endRange},markNotRendered:function(){for(var $=0;$<O;$++)q.current.visibilities[$].renderStatus=p.NotRenderedYet},markRendered:function($){q.current.visibilities[$].renderStatus=p.Rendered},markRendering:function($){q.current.currentRenderingPage!==-1&&q.current.currentRenderingPage!==$&&q.current.visibilities[q.current.currentRenderingPage].renderStatus===p.Rendering&&(q.current.visibilities[q.current.currentRenderingPage].renderStatus=p.NotRenderedYet),q.current.visibilities[$].renderStatus=p.Rendering,q.current.currentRenderingPage=$},setOutOfRange:function($){Z($,S)},setRange:function($,j){q.current.startRange=$,q.current.endRange=j;for(var J=0;J<O;J++)(J<$||J>j)&&(q.current.visibilities[J].visibility=S,q.current.visibilities[J].renderStatus=p.NotRenderedYet)},setVisibility:Z}},r={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{tryAgain:"The password is wrong. Please try again"},pageLabel:"Page {{pageIndex}}"}},f=e.createContext({l10n:r,setL10n:function(){}}),T=0,P=function(){return T++},L=function(l,A,O){var N=function(V){var q=A.current;if(q){var Z=V.target;if(Z instanceof Element&&Z.shadowRoot){var $=V.composedPath();$.length>0&&!q.contains($[0])&&O()}else q.contains(Z)||O()}};e.useEffect((function(){if(l){var V={capture:!0};return document.addEventListener("click",N,V),function(){document.removeEventListener("click",N,V)}}}),[])},M=function(l){var A=function(O){O.key==="Escape"&&l()};e.useEffect((function(){return document.addEventListener("keyup",A),function(){document.removeEventListener("keyup",A)}}),[])},s=function(l){var A=l.ariaControlsSuffix,O=l.children,N=l.closeOnClickOutside,V=l.closeOnEscape,q=l.onToggle,Z=e.useRef(),$=e.useContext(a).direction===h.TextDirection.RightToLeft;return e.useEffect((function(){var j=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=j}}),[]),M((function(){Z.current&&V&&q()})),L(N,Z,q),i((function(){var j=Z.current;if(j){var J=.75*document.body.clientHeight;j.getBoundingClientRect().height>=J&&(j.style.overflow="auto",j.style.maxHeight="".concat(J,"px"))}}),[]),e.createElement("div",{"aria-modal":"true",className:u({"rpv-core__modal-body":!0,"rpv-core__modal-body--rtl":$}),id:"rpv-core__modal-body-".concat(A),ref:Z,role:"dialog",tabIndex:-1},O)},b=function(l){var A=l.children;return e.createElement("div",{className:"rpv-core__modal-overlay"},A)};h.ToggleStatus=void 0,(D=h.ToggleStatus||(h.ToggleStatus={})).Close="Close",D.Open="Open",D.Toggle="Toggle";var E,k=function(l){var A=e.useState(l),O=A[0],N=A[1];return{opened:O,toggle:function(V){switch(V){case h.ToggleStatus.Close:N(!1);break;case h.ToggleStatus.Open:N(!0);break;case h.ToggleStatus.Toggle:default:N((function(q){return!q}))}}}},x=function(l){var A=l.content,O=l.isOpened,N=O!==void 0&&O,V=l.target,q=k(N),Z=q.opened,$=q.toggle;return e.createElement(e.Fragment,null,V&&V($,Z),Z&&A($))};h.Position=void 0,(E=h.Position||(h.Position={})).TopLeft="TOP_LEFT",E.TopCenter="TOP_CENTER",E.TopRight="TOP_RIGHT",E.RightTop="RIGHT_TOP",E.RightCenter="RIGHT_CENTER",E.RightBottom="RIGHT_BOTTOM",E.BottomLeft="BOTTOM_LEFT",E.BottomCenter="BOTTOM_CENTER",E.BottomRight="BOTTOM_RIGHT",E.LeftTop="LEFT_TOP",E.LeftCenter="LEFT_CENTER",E.LeftBottom="LEFT_BOTTOM";var G,X,it,St,rt,at,ut,ht,_t=function(l,A,O,N,V){i((function(){var q=A.current,Z=l.current,$=O.current;if(Z&&q&&$){var j=$.getBoundingClientRect(),J=(function(lt,ot,At,bt){var vt=ot.getBoundingClientRect(),Xt=lt.getBoundingClientRect(),xt=Xt.height,Ft=Xt.width,Nt=0,Pt=0;switch(At){case h.Position.TopLeft:Nt=vt.top-xt,Pt=vt.left;break;case h.Position.TopCenter:Nt=vt.top-xt,Pt=vt.left+vt.width/2-Ft/2;break;case h.Position.TopRight:Nt=vt.top-xt,Pt=vt.left+vt.width-Ft;break;case h.Position.RightTop:Nt=vt.top,Pt=vt.left+vt.width;break;case h.Position.RightCenter:Nt=vt.top+vt.height/2-xt/2,Pt=vt.left+vt.width;break;case h.Position.RightBottom:Nt=vt.top+vt.height-xt,Pt=vt.left+vt.width;break;case h.Position.BottomLeft:Nt=vt.top+vt.height,Pt=vt.left;break;case h.Position.BottomCenter:Nt=vt.top+vt.height,Pt=vt.left+vt.width/2-Ft/2;break;case h.Position.BottomRight:Nt=vt.top+vt.height,Pt=vt.left+vt.width-Ft;break;case h.Position.LeftTop:Nt=vt.top,Pt=vt.left-Ft;break;case h.Position.LeftCenter:Nt=vt.top+vt.height/2-xt/2,Pt=vt.left-Ft;break;case h.Position.LeftBottom:Nt=vt.top+vt.height-xt,Pt=vt.left-Ft}return{left:Pt+(bt.left||0),top:Nt+(bt.top||0)}})(Z,q,N,V),Y=J.top,ct=J.left;Z.style.top="".concat(Y-j.top,"px"),Z.style.left="".concat(ct-j.left,"px")}}),[])},Ct=function(l){var A,O=l.customClassName,N=l.position;return e.createElement("div",{className:u((A={"rpv-core__arrow":!0,"rpv-core__arrow--tl":N===h.Position.TopLeft,"rpv-core__arrow--tc":N===h.Position.TopCenter,"rpv-core__arrow--tr":N===h.Position.TopRight,"rpv-core__arrow--rt":N===h.Position.RightTop,"rpv-core__arrow--rc":N===h.Position.RightCenter,"rpv-core__arrow--rb":N===h.Position.RightBottom,"rpv-core__arrow--bl":N===h.Position.BottomLeft,"rpv-core__arrow--bc":N===h.Position.BottomCenter,"rpv-core__arrow--br":N===h.Position.BottomRight,"rpv-core__arrow--lt":N===h.Position.LeftTop,"rpv-core__arrow--lc":N===h.Position.LeftCenter,"rpv-core__arrow--lb":N===h.Position.LeftBottom},A["".concat(O)]=O!=="",A))})},Lt=function(l){var A=l.ariaControlsSuffix,O=l.children,N=l.closeOnClickOutside,V=l.offset,q=l.position,Z=l.targetRef,$=l.onClose,j=e.useRef(),J=e.useRef(),Y=e.useRef(),ct=e.useContext(a).direction===h.TextDirection.RightToLeft;L(N,j,$),_t(j,Z,Y,q,V),i((function(){var ot=J.current;if(ot){var At=.75*document.body.clientHeight;ot.getBoundingClientRect().height>=At&&(ot.style.overflow="auto",ot.style.maxHeight="".concat(At,"px"))}}),[]);var lt="rpv-core__popover-body-inner-".concat(A);return e.createElement(e.Fragment,null,e.createElement("div",{ref:Y,style:{left:0,position:"absolute",top:0}}),e.createElement("div",{"aria-describedby":lt,className:u({"rpv-core__popover-body":!0,"rpv-core__popover-body--rtl":ct}),id:"rpv-core__popover-body-".concat(A),ref:j,role:"dialog",tabIndex:-1},e.createElement(Ct,{customClassName:"rpv-core__popover-body-arrow",position:q}),e.createElement("div",{id:lt,ref:J},O)))},Bt=function(l){var A=l.closeOnEscape,O=l.onClose,N=e.useRef();return M((function(){N.current&&A&&O()})),e.createElement("div",{className:"rpv-core__popover-overlay",ref:N})},$t=function(l){var A=l.ariaControlsSuffix,O=l.children,N=l.contentRef,V=l.offset,q=l.position,Z=l.targetRef,$=e.useRef(),j=e.useContext(a).direction===h.TextDirection.RightToLeft;return _t(N,Z,$,q,V),e.createElement(e.Fragment,null,e.createElement("div",{ref:$,style:{left:0,position:"absolute",top:0}}),e.createElement("div",{className:u({"rpv-core__tooltip-body":!0,"rpv-core__tooltip-body--rtl":j}),id:"rpv-core__tooltip-body-".concat(A),ref:N,role:"tooltip"},e.createElement(Ct,{customClassName:"rpv-core__tooltip-body-arrow",position:q}),e.createElement("div",{className:"rpv-core__tooltip-body-content"},O)))};h.FullScreenMode=void 0,(G=h.FullScreenMode||(h.FullScreenMode={})).Normal="Normal",G.Entering="Entering",G.Entered="Entered",G.EnteredCompletely="EnteredCompletely",G.Exitting="Exitting",G.Exited="Exited",h.LayerRenderStatus=void 0,(X=h.LayerRenderStatus||(h.LayerRenderStatus={}))[X.PreRender=0]="PreRender",X[X.DidRender=1]="DidRender",h.PageMode=void 0,(it=h.PageMode||(h.PageMode={})).Attachments="UseAttachments",it.Bookmarks="UseOutlines",it.ContentGroup="UseOC",it.Default="UserNone",it.FullScreen="FullScreen",it.Thumbnails="UseThumbs",h.PasswordStatus=void 0,(St=h.PasswordStatus||(h.PasswordStatus={})).RequiredPassword="RequiredPassword",St.WrongPassword="WrongPassword",h.RotateDirection=void 0,(rt=h.RotateDirection||(h.RotateDirection={})).Backward="Backward",rt.Forward="Forward",h.ScrollMode=void 0,(at=h.ScrollMode||(h.ScrollMode={})).Page="Page",at.Horizontal="Horizontal",at.Vertical="Vertical",at.Wrapped="Wrapped",h.SpecialZoomLevel=void 0,(ut=h.SpecialZoomLevel||(h.SpecialZoomLevel={})).ActualSize="ActualSize",ut.PageFit="PageFit",ut.PageWidth="PageWidth",h.ViewMode=void 0,(ht=h.ViewMode||(h.ViewMode={})).DualPage="DualPage",ht.DualPageWithCover="DualPageWithCover",ht.SinglePage="SinglePage";var Yt,ne=function(l,A){return l.reduce((function(O,N,V){return V%A?O[O.length-1].push(N):O.push([N]),O}),[])},xe=function(l,A){switch(A[1].name){case"XYZ":return{bottomOffset:function(O,N){return A[3]===null?N:A[3]},leftOffset:function(O,N){return A[2]===null?0:A[2]},pageIndex:l,scaleTo:A[4]};case"Fit":case"FitB":return{bottomOffset:0,leftOffset:0,pageIndex:l,scaleTo:h.SpecialZoomLevel.PageFit};case"FitH":case"FitBH":return{bottomOffset:A[2],leftOffset:0,pageIndex:l,scaleTo:h.SpecialZoomLevel.PageWidth};default:return{bottomOffset:0,leftOffset:0,pageIndex:l,scaleTo:1}}},Ae=new Map,He=new Map,Te=function(l,A){return"".concat(l.loadingTask.docId,"___").concat(A.num,"R").concat(A.gen===0?"":A.gen)},Ne=function(l,A,O){Ae.set(Te(l,A),O)},Ve=function(l,A){if(!l)return Promise.reject("The document is not loaded yet");var O="".concat(l.loadingTask.docId,"___").concat(A),N=He.get(O);return N?Promise.resolve(N):new Promise((function(V,q){l.getPage(A+1).then((function(Z){He.set(O,Z),Z.ref&&Ne(l,Z.ref,A),V(Z)}))}))},cn=function(l,A){return new Promise((function(O){new Promise((function(N){typeof A=="string"?l.getDestination(A).then((function(V){N(V)})):N(A)})).then((function(N){if(typeof N[0]=="object"&&N[0]!==null){var V=N[0],q=(function($,j){var J=Te($,j);return Ae.has(J)?Ae.get(J):null})(l,V);q===null?l.getPageIndex(V).then((function($){Ne(l,V,$),cn(l,A).then((function(j){return O(j)}))})):O(xe(q,N))}else{var Z=xe(N[0],N);O(Z)}}))}))};(function(l){l[l.Solid=1]="Solid",l[l.Dashed=2]="Dashed",l[l.Beveled=3]="Beveled",l[l.Inset=4]="Inset",l[l.Underline=5]="Underline"})(Yt||(Yt={}));var gt,nt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),tt=function(l,A,O,N){var V=parseInt(l,10);return V>=A&&V<=O?V:N},Et=function(l){return l.contentsObj?l.contentsObj.str:l.contents||""},Gt=function(l){return l.titleObj?l.titleObj.str:l.title||""},Se=function(l){var A=l.annotation,O=e.useContext(a).direction,N=Gt(A),V=Et(A),q=O===h.TextDirection.RightToLeft,Z=e.useRef(),$="";if(A.modificationDate){var j=(function(J){var Y=nt.exec(J);if(!Y)return null;var ct=parseInt(Y[1],10),lt=tt(Y[2],1,12,1)-1,ot=tt(Y[3],1,31,1),At=tt(Y[4],0,23,0),bt=tt(Y[5],0,59,0),vt=tt(Y[6],0,59,0),Xt=Y[7]||"Z",xt=tt(Y[8],0,23,0),Ft=tt(Y[9],0,59,0);switch(Xt){case"-":At+=xt,bt+=Ft;break;case"+":At-=xt,bt-=Ft}return new Date(Date.UTC(ct,lt,ot,At,bt,vt))})(A.modificationDate);$=j?"".concat(j.toLocaleDateString(),", ").concat(j.toLocaleTimeString()):""}return e.useLayoutEffect((function(){if(Z.current){var J=document.querySelector('[data-annotation-id="'.concat(A.id,'"]'));if(J){var Y=J;return Y.style.zIndex+=1,function(){Y.style.zIndex="".concat(parseInt(Y.style.zIndex,10)-1)}}}}),[]),e.createElement("div",{ref:Z,className:u({"rpv-core__annotation-popup-wrapper":!0,"rpv-core__annotation-popup-wrapper--rtl":q}),style:{top:A.annotationType===h.AnnotationType.Popup?"":"100%"}},N&&e.createElement(e.Fragment,null,e.createElement("div",{className:u({"rpv-core__annotation-popup-title":!0,"rpv-core__annotation-popup-title--ltr":!q,"rpv-core__annotation-popup-title--rtl":q})},N),e.createElement("div",{className:"rpv-core__annotation-popup-date"},$)),V&&e.createElement("div",{className:"rpv-core__annotation-popup-content"},V.split(`
`).map((function(J,Y){return e.createElement(e.Fragment,{key:Y},J,e.createElement("br",null))}))))};(function(l){l.Click="Click",l.Hover="Hover"})(gt||(gt={}));var Wt,pe=function(l){var A,O=l.annotation,N=l.children,V=l.ignoreBorder,q=l.hasPopup,Z=l.isRenderable,$=l.page,j=l.viewport,J=O.rect,Y=(function(){var It=k(!1),te=It.opened,Qt=It.toggle,ee=e.useState(gt.Hover),ie=ee[0],se=ee[1];return{opened:te,closeOnHover:function(){ie===gt.Hover&&Qt(h.ToggleStatus.Close)},openOnHover:function(){ie===gt.Hover&&Qt(h.ToggleStatus.Open)},toggleOnClick:function(){switch(ie){case gt.Click:te&&se(gt.Hover),Qt(h.ToggleStatus.Toggle);break;case gt.Hover:se(gt.Click),Qt(h.ToggleStatus.Open)}}}})(),ct=Y.closeOnHover,lt=Y.opened,ot=Y.openOnHover,At=Y.toggleOnClick,bt=(A=[J[0],$.view[3]+$.view[1]-J[1],J[2],$.view[3]+$.view[1]-J[3]],[Math.min(A[0],A[2]),Math.min(A[1],A[3]),Math.max(A[0],A[2]),Math.max(A[1],A[3])]),vt=J[2]-J[0],Xt=J[3]-J[1],xt={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!V&&O.borderStyle.width>0){switch(O.borderStyle.style){case Yt.Dashed:xt.borderStyle="dashed";break;case Yt.Solid:xt.borderStyle="solid";break;case Yt.Underline:xt=Object.assign({borderBottomStyle:"solid"},xt);case Yt.Beveled:case Yt.Inset:}var Ft=O.borderStyle.width;xt.borderWidth="".concat(Ft,"px"),O.borderStyle.style!==Yt.Underline&&(vt-=2*Ft,Xt-=2*Ft);var Nt=O.borderStyle,Pt=Nt.horizontalCornerRadius,jt=Nt.verticalCornerRadius;(Pt>0||jt>0)&&(xt.borderRadius="".concat(Pt,"px / ").concat(jt,"px")),O.color?xt.borderColor="rgb(".concat(0|O.color[0],", ").concat(0|O.color[1],", ").concat(0|O.color[2],")"):xt.borderWidth="0"}return e.createElement(e.Fragment,null,Z&&N({popup:{opened:lt,closeOnHover:ct,openOnHover:ot,toggleOnClick:At},slot:{attrs:{style:Object.assign({height:"".concat(Xt,"px"),left:"".concat(bt[0],"px"),top:"".concat(bt[1],"px"),transform:"matrix(".concat(j.transform.join(","),")"),transformOrigin:"-".concat(bt[0],"px -").concat(bt[1],"px"),width:"".concat(vt,"px")},xt)},children:e.createElement(e.Fragment,null,q&&lt&&e.createElement(Se,{annotation:O}))}}))},qe=function(l){var A=l.annotation,O=l.page,N=l.viewport,V=A.hasPopup===!1,q=Gt(A),Z=Et(A),$=!!(A.hasPopup||q||Z);return e.createElement(pe,{annotation:A,hasPopup:V,ignoreBorder:!0,isRenderable:$,page:O,viewport:N},(function(j){return e.createElement("div",n({},j.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":A.id,onClick:j.popup.toggleOnClick,onMouseEnter:j.popup.openOnHover,onMouseLeave:j.popup.closeOnHover}),j.slot.children)}))},We=function(l){var A=l.annotation,O=l.page,N=l.viewport,V=A.hasPopup===!1,q=Gt(A),Z=Et(A),$=!!(A.hasPopup||q||Z),j=A.rect,J=j[2]-j[0],Y=j[3]-j[1],ct=A.borderStyle.width;return e.createElement(pe,{annotation:A,hasPopup:V,ignoreBorder:!0,isRenderable:$,page:O,viewport:N},(function(lt){return e.createElement("div",n({},lt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":A.id,onClick:lt.popup.toggleOnClick,onMouseEnter:lt.popup.openOnHover,onMouseLeave:lt.popup.closeOnHover}),e.createElement("svg",{height:"".concat(Y,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(J," ").concat(Y),width:"".concat(J,"px")},e.createElement("circle",{cy:Y/2,fill:"none",rx:J/2-ct/2,ry:Y/2-ct/2,stroke:"transparent",strokeWidth:ct||1})),lt.slot.children)}))},Fe=function(l){var A=l.annotation,O=l.page,N=l.viewport,V=Gt(A),q=Et(A),Z=!(A.hasPopup!==!1||!V&&!q),$=function(){var j,J,Y,ct,lt=A.file;lt&&(j=lt.filename,J=lt.content,Y=typeof J=="string"?"":URL.createObjectURL(new Blob([J],{type:""})),(ct=document.createElement("a")).style.display="none",ct.href=Y||j,ct.setAttribute("download",(function(ot){var At=ot.split("/").pop();return At?At.split("#")[0].split("?")[0]:ot})(j)),document.body.appendChild(ct),ct.click(),document.body.removeChild(ct),Y&&URL.revokeObjectURL(Y))};return e.createElement(pe,{annotation:A,hasPopup:Z,ignoreBorder:!0,isRenderable:!0,page:O,viewport:N},(function(j){return e.createElement("div",n({},j.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":A.id,onClick:j.popup.toggleOnClick,onDoubleClick:$,onMouseEnter:j.popup.openOnHover,onMouseLeave:j.popup.closeOnHover}),j.slot.children)}))},Ge=function(l){var A=l.annotation,O=l.page,N=l.viewport,V=A.hasPopup===!1,q=Gt(A),Z=Et(A),$=!!(A.hasPopup||q||Z);return e.createElement(pe,{annotation:A,hasPopup:V,ignoreBorder:!0,isRenderable:$,page:O,viewport:N},(function(j){return e.createElement("div",n({},j.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":A.id,onClick:j.popup.toggleOnClick,onMouseEnter:j.popup.openOnHover,onMouseLeave:j.popup.closeOnHover}),j.slot.children)}))},Be=function(l){var A=l.annotation,O=l.page,N=l.viewport,V=Gt(A),q=Et(A),Z=!(!V&&!q),$=!A.parentType||["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(A.parentType)!==-1;return i((function(){if(A.parentId){var j=document.querySelector('[data-annotation-id="'.concat(A.parentId,'"]')),J=document.querySelector('[data-annotation-id="'.concat(A.id,'"]'));if(j&&J){var Y=parseFloat(j.style.left),ct=parseFloat(j.style.top)+parseFloat(j.style.height);J.style.left="".concat(Y,"px"),J.style.top="".concat(ct,"px"),J.style.transformOrigin="-".concat(Y,"px -").concat(ct,"px")}}}),[]),e.createElement(pe,{annotation:A,hasPopup:$,ignoreBorder:!1,isRenderable:Z,page:O,viewport:N},(function(j){return e.createElement("div",n({},j.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":A.id}),e.createElement(Se,{annotation:A}))}))},Ze=function(l){var A=l.annotation,O=l.childAnnotation,N=l.page,V=l.viewport,q=A.hasPopup===!1,Z=Gt(A),$=Et(A),j=!!(A.hasPopup||Z||$);if(A.quadPoints&&A.quadPoints.length>0){var J=A.quadPoints.map((function(Y){return Object.assign({},A,{rect:[Y[2].x,Y[2].y,Y[1].x,Y[1].y],quadPoints:[]})}));return e.createElement(e.Fragment,null,J.map((function(Y,ct){return e.createElement(Ze,{key:ct,annotation:Y,childAnnotation:O,page:N,viewport:V})})))}return e.createElement(pe,{annotation:A,hasPopup:q,ignoreBorder:!0,isRenderable:j,page:N,viewport:V},(function(Y){return e.createElement(e.Fragment,null,e.createElement("div",n({},Y.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":A.id,onClick:Y.popup.toggleOnClick,onMouseEnter:Y.popup.openOnHover,onMouseLeave:Y.popup.closeOnHover}),Y.slot.children),O&&O.annotationType===h.AnnotationType.Popup&&Y.popup.opened&&e.createElement(Be,{annotation:O,page:N,viewport:V}))}))},Ee=function(l){var A=l.annotation,O=l.page,N=l.viewport,V=A.hasPopup===!1,q=Gt(A),Z=Et(A),$=!!(A.hasPopup||q||Z),j=A.rect,J=j[2]-j[0],Y=j[3]-j[1],ct=A.borderStyle.width;return e.createElement(pe,{annotation:A,hasPopup:V,ignoreBorder:!0,isRenderable:$,page:O,viewport:N},(function(lt){return e.createElement("div",n({},lt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":A.id,onClick:lt.popup.toggleOnClick,onMouseEnter:lt.popup.openOnHover,onMouseLeave:lt.popup.closeOnHover}),A.inkLists&&A.inkLists.length&&e.createElement("svg",{height:"".concat(Y,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(J," ").concat(Y),width:"".concat(J,"px")},A.inkLists.map((function(ot,At){return e.createElement("polyline",{key:At,fill:"none",stroke:"transparent",strokeWidth:ct||1,points:ot.map((function(bt){return"".concat(bt.x-j[0],",").concat(j[3]-bt.y)})).join(" ")})}))),lt.slot.children)}))},rn=function(l){var A=l.annotation,O=l.page,N=l.viewport,V=A.hasPopup===!1,q=Gt(A),Z=Et(A),$=!!(A.hasPopup||q||Z),j=A.rect,J=j[2]-j[0],Y=j[3]-j[1],ct=A.borderStyle.width;return e.createElement(pe,{annotation:A,hasPopup:V,ignoreBorder:!0,isRenderable:$,page:O,viewport:N},(function(lt){return e.createElement("div",n({},lt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":A.id,onClick:lt.popup.toggleOnClick,onMouseEnter:lt.popup.openOnHover,onMouseLeave:lt.popup.closeOnHover}),e.createElement("svg",{height:"".concat(Y,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(J," ").concat(Y),width:"".concat(J,"px")},e.createElement("line",{stroke:"transparent",strokeWidth:ct||1,x1:j[2]-A.lineCoordinates[0],x2:j[2]-A.lineCoordinates[2],y1:j[3]-A.lineCoordinates[1],y2:j[3]-A.lineCoordinates[3]})),lt.slot.children)}))},sn=/^([^\w]*)(javascript|data|vbscript)/im,un=/&#(\w+)(^\w|;)?/g,hn=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,Qe=/^([^:]+):/gm,Le=function(l,A){var O,N=(O=l||"",O.replace(un,(function($,j){return String.fromCharCode(j)}))).replace(hn,"").trim();if(!N)return A;var V=N[0];if(V==="."||V==="/")return N;var q=N.match(Qe);if(!q)return N;var Z=q[0];return sn.test(Z)?A:N},tn=function(l){var A,O=l.annotation,N=l.annotationContainerRef,V=l.doc,q=l.outlines,Z=l.page,$=l.pageIndex,j=l.scale,J=l.viewport,Y=l.onExecuteNamedAction,ct=l.onJumpFromLinkAnnotation,lt=l.onJumpToDest,ot=e.useRef(),At=q&&q.length&&O.dest&&typeof O.dest=="string"?(A=q.find((function(xt){return xt.dest===O.dest})))===null||A===void 0?void 0:A.title:"",bt=!!(O.url||O.dest||O.action||O.unsafeUrl),vt={};if(O.url||O.unsafeUrl){var Xt=Le(O.url||O.unsafeUrl,"");Xt?vt={"data-target":"external",href:Xt,rel:"noopener noreferrer nofollow",target:O.newWindow?"_blank":"",title:Xt}:bt=!1}else vt={href:"","data-annotation-link":O.id,onClick:function(xt){xt.preventDefault(),O.action?Y(O.action):cn(V,O.dest).then((function(Ft){var Nt=ot.current,Pt=N.current;if(Nt&&Pt){var jt=Nt.getBoundingClientRect();Pt.style.setProperty("height","100%"),Pt.style.setProperty("width","100%");var It=Pt.getBoundingClientRect();Pt.style.removeProperty("height"),Pt.style.removeProperty("width");var te=(jt.left-It.left)/j,Qt=(It.bottom-jt.bottom+jt.height)/j;ct({bottomOffset:Qt,label:At,leftOffset:te,pageIndex:$})}lt(Ft)}))}};return At&&(vt=Object.assign({},vt,{title:At,"aria-label":At})),e.createElement(pe,{annotation:O,hasPopup:!1,ignoreBorder:!1,isRenderable:bt,page:Z,viewport:J},(function(xt){return e.createElement("div",n({},xt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":O.id,"data-testid":"core__annotation--link-".concat(O.id)}),e.createElement("a",n({ref:ot},vt)))}))},dn=function(l){var A=l.annotation,O=l.page,N=l.viewport,V=A.hasPopup===!1,q=Gt(A),Z=Et(A),$=!!(A.hasPopup||q||Z),j=A.rect,J=j[2]-j[0],Y=j[3]-j[1],ct=A.borderStyle.width;return e.createElement(pe,{annotation:A,hasPopup:V,ignoreBorder:!0,isRenderable:$,page:O,viewport:N},(function(lt){return e.createElement("div",n({},lt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":A.id,onClick:lt.popup.toggleOnClick,onMouseEnter:lt.popup.openOnHover,onMouseLeave:lt.popup.closeOnHover}),A.vertices&&A.vertices.length&&e.createElement("svg",{height:"".concat(Y,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(J," ").concat(Y),width:"".concat(J,"px")},e.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:ct||1,points:A.vertices.map((function(ot){return"".concat(ot.x-j[0],",").concat(j[3]-ot.y)})).join(" ")})),lt.slot.children)}))},Zn=function(l){var A=l.annotation,O=l.page,N=l.viewport,V=A.hasPopup===!1,q=Gt(A),Z=Et(A),$=!!(A.hasPopup||q||Z),j=A.rect,J=j[2]-j[0],Y=j[3]-j[1],ct=A.borderStyle.width;return e.createElement(pe,{annotation:A,hasPopup:V,ignoreBorder:!0,isRenderable:$,page:O,viewport:N},(function(lt){return e.createElement("div",n({},lt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":A.id,onClick:lt.popup.toggleOnClick,onMouseEnter:lt.popup.openOnHover,onMouseLeave:lt.popup.closeOnHover}),A.vertices&&A.vertices.length&&e.createElement("svg",{height:"".concat(Y,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(J," ").concat(Y),width:"".concat(J,"px")},e.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:ct||1,points:A.vertices.map((function(ot){return"".concat(ot.x-j[0],",").concat(j[3]-ot.y)})).join(" ")})),lt.slot.children)}))},Qn=function(l){var A=l.annotation,O=l.page,N=l.viewport,V=A.hasPopup===!1,q=Gt(A),Z=Et(A),$=!!(A.hasPopup||q||Z),j=A.rect,J=j[2]-j[0],Y=j[3]-j[1],ct=A.borderStyle.width;return e.createElement(pe,{annotation:A,hasPopup:V,ignoreBorder:!0,isRenderable:$,page:O,viewport:N},(function(lt){return e.createElement("div",n({},lt.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":A.id,onClick:lt.popup.toggleOnClick,onMouseEnter:lt.popup.openOnHover,onMouseLeave:lt.popup.closeOnHover}),e.createElement("svg",{height:"".concat(Y,"px"),preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 ".concat(J," ").concat(Y),width:"".concat(J,"px")},e.createElement("rect",{height:Y-ct,fill:"none",stroke:"transparent",strokeWidth:ct||1,x:ct/2,y:ct/2,width:J-ct})),lt.slot.children)}))},ti=function(l){var A=l.annotation,O=l.page,N=l.viewport,V=A.hasPopup===!1,q=Gt(A),Z=Et(A),$=!!(A.hasPopup||q||Z);return e.createElement(pe,{annotation:A,hasPopup:V,ignoreBorder:!0,isRenderable:$,page:O,viewport:N},(function(j){return e.createElement("div",n({},j.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":A.id,onClick:j.popup.toggleOnClick,onMouseEnter:j.popup.openOnHover,onMouseLeave:j.popup.closeOnHover}),j.slot.children)}))},ei=function(l){var A=l.annotation,O=l.page,N=l.viewport,V=A.hasPopup===!1,q=Gt(A),Z=Et(A),$=!!(A.hasPopup||q||Z);return e.createElement(pe,{annotation:A,hasPopup:V,ignoreBorder:!0,isRenderable:$,page:O,viewport:N},(function(j){return e.createElement("div",n({},j.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":A.id,onClick:j.popup.toggleOnClick,onMouseEnter:j.popup.openOnHover,onMouseLeave:j.popup.closeOnHover}),j.slot.children)}))},ni=function(l){var A=l.annotation,O=l.page,N=l.viewport,V=A.hasPopup===!1,q=Gt(A),Z=Et(A),$=!!(A.hasPopup||q||Z);return e.createElement(pe,{annotation:A,hasPopup:V,ignoreBorder:!0,isRenderable:$,page:O,viewport:N},(function(j){return e.createElement("div",n({},j.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":A.id,onClick:j.popup.toggleOnClick,onMouseEnter:j.popup.openOnHover,onMouseLeave:j.popup.closeOnHover}),j.slot.children)}))},ii=function(){return e.createElement(m,{size:16},e.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),e.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),e.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),e.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},ri=function(){return e.createElement(m,{size:16},e.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),e.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),e.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),e.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),e.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),e.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),e.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),e.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),e.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),e.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},si=function(){return e.createElement(m,{size:16},e.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),e.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},ai=function(){return e.createElement(m,{size:16},e.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),e.createElement("path",{d:"M6 4.5L6 0.5"}),e.createElement("path",{d:"M18 4.5L18 0.5"}),e.createElement("path",{d:"M10 4.5L10 0.5"}),e.createElement("path",{d:"M14 4.5L14 0.5"}))},oi=function(){return e.createElement(m,{size:16},e.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),e.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),e.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},li=function(){return e.createElement(m,{size:16},e.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},ci=function(l){var A=l.annotation,O=l.childAnnotation,N=l.page,V=l.viewport,q=A.hasPopup===!1,Z=Gt(A),$=Et(A),j=!!(A.hasPopup||Z||$),J=A.name?A.name.toLowerCase():"";return e.createElement(pe,{annotation:A,hasPopup:q,ignoreBorder:!1,isRenderable:j,page:N,viewport:V},(function(Y){return e.createElement(e.Fragment,null,e.createElement("div",n({},Y.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":A.id,onClick:Y.popup.toggleOnClick,onMouseEnter:Y.popup.openOnHover,onMouseLeave:Y.popup.closeOnHover}),J&&e.createElement("div",{className:"rpv-core__annotation-text-icon"},J==="check"&&e.createElement(g,null),J==="comment"&&e.createElement(ii,null),J==="help"&&e.createElement(ri,null),J==="insert"&&e.createElement(li,null),J==="key"&&e.createElement(si,null),J==="note"&&e.createElement(ai,null),(J==="newparagraph"||J==="paragraph")&&e.createElement(oi,null)),Y.slot.children),O&&O.annotationType===h.AnnotationType.Popup&&Y.popup.opened&&e.createElement(Be,{annotation:O,page:N,viewport:V}))}))},ui=function(l){var A=l.annotation,O=l.page,N=l.viewport,V=A.hasPopup===!1,q=Gt(A),Z=Et(A),$=!!(A.hasPopup||q||Z);return e.createElement(pe,{annotation:A,hasPopup:V,ignoreBorder:!0,isRenderable:$,page:O,viewport:N},(function(j){return e.createElement("div",n({},j.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":A.id,onClick:j.popup.toggleOnClick,onMouseEnter:j.popup.openOnHover,onMouseLeave:j.popup.closeOnHover}),j.slot.children)}))},hi=function(l){var A=l.annotations,O=l.doc,N=l.outlines,V=l.page,q=l.pageIndex,Z=l.plugins,$=l.rotation,j=l.scale,J=l.onExecuteNamedAction,Y=l.onJumpFromLinkAnnotation,ct=l.onJumpToDest,lt=e.useRef(),ot=V.getViewport({rotation:$,scale:j}).clone({dontFlip:!0}),At=A.filter((function(bt){return!bt.parentId}));return i((function(){var bt=lt.current;bt&&Z.forEach((function(vt){vt.onAnnotationLayerRender&&vt.onAnnotationLayerRender({annotations:At,container:bt,pageIndex:q,rotation:$,scale:j})}))}),[]),e.createElement("div",{ref:lt,className:"rpv-core__annotation-layer","data-testid":"core__annotation-layer-".concat(q)},At.map((function(bt){var vt=A.find((function(Xt){return Xt.parentId===bt.id}));switch(bt.annotationType){case h.AnnotationType.Caret:return e.createElement(qe,{key:bt.id,annotation:bt,page:V,viewport:ot});case h.AnnotationType.Circle:return e.createElement(We,{key:bt.id,annotation:bt,page:V,viewport:ot});case h.AnnotationType.FileAttachment:return e.createElement(Fe,{key:bt.id,annotation:bt,page:V,viewport:ot});case h.AnnotationType.FreeText:return e.createElement(Ge,{key:bt.id,annotation:bt,page:V,viewport:ot});case h.AnnotationType.Highlight:return e.createElement(Ze,{key:bt.id,annotation:bt,childAnnotation:vt,page:V,viewport:ot});case h.AnnotationType.Ink:return e.createElement(Ee,{key:bt.id,annotation:bt,page:V,viewport:ot});case h.AnnotationType.Line:return e.createElement(rn,{key:bt.id,annotation:bt,page:V,viewport:ot});case h.AnnotationType.Link:return e.createElement(tn,{key:bt.id,annotation:bt,annotationContainerRef:lt,doc:O,outlines:N,page:V,pageIndex:q,scale:j,viewport:ot,onExecuteNamedAction:J,onJumpFromLinkAnnotation:Y,onJumpToDest:ct});case h.AnnotationType.Polygon:return e.createElement(dn,{key:bt.id,annotation:bt,page:V,viewport:ot});case h.AnnotationType.Polyline:return e.createElement(Zn,{key:bt.id,annotation:bt,page:V,viewport:ot});case h.AnnotationType.Popup:return e.createElement(Be,{key:bt.id,annotation:bt,page:V,viewport:ot});case h.AnnotationType.Square:return e.createElement(Qn,{key:bt.id,annotation:bt,page:V,viewport:ot});case h.AnnotationType.Squiggly:return e.createElement(ti,{key:bt.id,annotation:bt,page:V,viewport:ot});case h.AnnotationType.Stamp:return e.createElement(ei,{key:bt.id,annotation:bt,page:V,viewport:ot});case h.AnnotationType.StrikeOut:return e.createElement(ni,{key:bt.id,annotation:bt,page:V,viewport:ot});case h.AnnotationType.Text:return e.createElement(ci,{key:bt.id,annotation:bt,childAnnotation:vt,page:V,viewport:ot});case h.AnnotationType.Underline:return e.createElement(ui,{key:bt.id,annotation:bt,page:V,viewport:ot});default:return e.createElement(e.Fragment,{key:bt.id})}})))},di=function(l){var A=l.page,O=l.renderAnnotations,N=yt(),V=e.useState({loading:!0,annotations:[]}),q=V[0],Z=V[1];return e.useEffect((function(){A.getAnnotations({intent:"display"}).then((function($){N.current&&Z({loading:!1,annotations:$})}))}),[]),q.loading?e.createElement(e.Fragment,null):O(q.annotations)},fi=function(l){var A=l.doc,O=l.outlines,N=l.page,V=l.pageIndex,q=l.plugins,Z=l.rotation,$=l.scale,j=l.onExecuteNamedAction,J=l.onJumpFromLinkAnnotation,Y=l.onJumpToDest;return e.createElement(di,{page:N,renderAnnotations:function(ct){return e.createElement(hi,{annotations:ct,doc:A,outlines:O,page:N,pageIndex:V,plugins:q,rotation:Z,scale:$,onExecuteNamedAction:j,onJumpFromLinkAnnotation:J,onJumpToDest:Y})}})},gn=function(l,A){var O=l%A;return O===0?l:Math.floor(l-O)},pi=function(l){var A=l.canvasLayerRef,O=l.height,N=l.page,V=l.pageIndex,q=l.plugins,Z=l.rotation,$=l.scale,j=l.width,J=l.onRenderCanvasCompleted,Y=e.useRef();return i((function(){var ct=Y.current;ct&&ct.cancel();var lt=A.current;lt.removeAttribute("data-testid"),q.forEach((function(It){It.onCanvasLayerRender&&It.onCanvasLayerRender({ele:lt,pageIndex:V,rotation:Z,scale:$,status:h.LayerRenderStatus.PreRender})}));var ot=N.getViewport({rotation:Z,scale:$}),At=window.devicePixelRatio||1,bt=Math.sqrt(16777216/(ot.width*ot.height)),vt=At>bt;vt?lt.style.transform="scale(1, 1)":lt.style.removeProperty("transform");var Xt=Math.min(bt,At),xt=(function(It,te){var Qt,ee;if(Math.floor(It)===It)return[It,1];var ie=1/It;if(ie>te)return[1,te];if(Math.floor(ie)===ie)return[1,ie];for(var se=It>1?ie:It,be=0,de=1,ye=1,ge=1;;){var ve=be+ye,_e=de+ge;if(_e>te)break;se<=ve/_e?(ye=(Qt=[ve,_e])[0],ge=Qt[1]):(be=(ee=[ve,_e])[0],de=ee[1])}return se<(be/de+ye/ge)/2?se===It?[be,de]:[de,be]:se===It?[ye,ge]:[ge,ye]})(Xt,8),Ft=xt[0],Nt=xt[1];lt.width=gn(ot.width*Xt,Ft),lt.height=gn(ot.height*Xt,Ft),lt.style.width="".concat(gn(ot.width,Nt),"px"),lt.style.height="".concat(gn(ot.height,Nt),"px"),lt.hidden=!0;var Pt=lt.getContext("2d",{alpha:!1}),jt=vt||At!==1?[Xt,0,0,Xt,0,0]:null;return Y.current=N.render({canvasContext:Pt,transform:jt,viewport:ot}),Y.current.promise.then((function(){lt.hidden=!1,lt.setAttribute("data-testid","core__canvas-layer-".concat(V)),q.forEach((function(It){It.onCanvasLayerRender&&It.onCanvasLayerRender({ele:lt,pageIndex:V,rotation:Z,scale:$,status:h.LayerRenderStatus.DidRender})})),J()}),(function(){J()})),function(){lt&&(lt.width=0,lt.height=0)}}),[]),e.createElement("div",{className:"rpv-core__canvas-layer",style:{height:"".concat(O,"px"),width:"".concat(j,"px")}},e.createElement("canvas",{ref:A}))},gi=function(l){var A=l.height,O=l.page,N=l.rotation,V=l.scale,q=l.width,Z=e.useRef();return i((function(){var $=Z.current,j=O.getViewport({rotation:N,scale:V});O.getOperatorList().then((function(J){(function(){var Y=Z.current;Y&&(Y.innerHTML="")})(),new U.SVGGraphics(O.commonObjs,O.objs).getSVG(J,j).then((function(Y){Y.style.height="".concat(A,"px"),Y.style.width="".concat(q,"px"),$.appendChild(Y)}))}))}),[]),e.createElement("div",{className:"rpv-core__svg-layer",ref:Z})},mi=function(l){var A=l.containerRef,O=l.page,N=l.pageIndex,V=l.plugins,q=l.rotation,Z=l.scale,$=l.onRenderTextCompleted,j=e.useRef(),J=function(){var Y=A.current;Y&&([].slice.call(Y.querySelectorAll(".rpv-core__text-layer-text")).forEach((function(ct){return Y.removeChild(ct)})),[].slice.call(Y.querySelectorAll('br[role="presentation"]')).forEach((function(ct){return Y.removeChild(ct)})))};return i((function(){var Y=j.current;Y&&Y.cancel();var ct=A.current;if(ct){ct.removeAttribute("data-testid");var lt=O.getViewport({rotation:q,scale:Z});return V.forEach((function(ot){ot.onTextLayerRender&&ot.onTextLayerRender({ele:ct,pageIndex:N,scale:Z,status:h.LayerRenderStatus.PreRender})})),O.getTextContent().then((function(ot){J(),j.current=U.renderTextLayer({container:ct,textContent:ot,textContentSource:ot,viewport:lt}),j.current.promise.then((function(){ct.setAttribute("data-testid","core__text-layer-".concat(N)),[].slice.call(ct.children).forEach((function(At){At.classList.contains("rpv-core__text-layer-text--not")||At.classList.add("rpv-core__text-layer-text")})),V.forEach((function(At){At.onTextLayerRender&&At.onTextLayerRender({ele:ct,pageIndex:N,scale:Z,status:h.LayerRenderStatus.DidRender})})),$()}),(function(){ct.removeAttribute("data-testid"),$()}))})),function(){var ot;J(),(ot=j.current)===null||ot===void 0||ot.cancel()}}}),[]),e.createElement("div",{className:"rpv-core__text-layer",ref:A})},vi=function(l){var A=l.doc,O=l.measureRef,N=l.outlines,V=l.pageIndex,q=l.pageRotation,Z=l.pageSize,$=l.plugins,j=l.renderPage,J=l.renderQueueKey,Y=l.rotation,ct=l.scale,lt=l.shouldRender,ot=l.viewMode,At=l.onExecuteNamedAction,bt=l.onJumpFromLinkAnnotation,vt=l.onJumpToDest,Xt=l.onRenderCompleted,xt=l.onRotatePage,Ft=yt(),Nt=e.useState(null),Pt=Nt[0],jt=Nt[1],It=e.useState(!1),te=It[0],Qt=It[1],ee=e.useState(!1),ie=ee[0],se=ee[1],be=e.useRef(),de=e.useRef(),ye=Math.abs(Y+q)%180==0,ge=Z.pageWidth*ct,ve=Z.pageHeight*ct,_e=ye?ge:ve,me=ye?ve:ge,Me=(Z.rotation+Y+q)%360,Ue=e.useRef(0),je=j||function(Pe){return e.createElement(e.Fragment,null,Pe.canvasLayer.children,Pe.textLayer.children,Pe.annotationLayer.children)};return e.useEffect((function(){jt(null),Qt(!1),se(!1)}),[q,Y,ct]),e.useEffect((function(){lt&&Ft.current&&!Pt&&Ve(A,V).then((function(Pe){Ft.current&&(Ue.current=J,jt(Pe))}))}),[lt,Pt]),e.useEffect((function(){te&&ie&&(J!==Ue.current?(jt(null),Qt(!1),se(!1)):Xt(V))}),[te,ie]),e.createElement("div",{className:u({"rpv-core__page-layer":!0,"rpv-core__page-layer--dual":ot===h.ViewMode.DualPage,"rpv-core__page-layer--dual-cover":ot===h.ViewMode.DualPageWithCover,"rpv-core__page-layer--single":ot===h.ViewMode.SinglePage}),"data-testid":"core__page-layer-".concat(V),ref:O,style:{height:"".concat(me,"px"),width:"".concat(_e,"px")}},Pt?e.createElement(e.Fragment,null,je({annotationLayer:{attrs:{},children:e.createElement(fi,{doc:A,outlines:N,page:Pt,pageIndex:V,plugins:$,rotation:Me,scale:ct,onExecuteNamedAction:At,onJumpFromLinkAnnotation:bt,onJumpToDest:vt})},canvasLayer:{attrs:{},children:e.createElement(pi,{canvasLayerRef:be,height:me,page:Pt,pageIndex:V,plugins:$,rotation:Me,scale:ct,width:_e,onRenderCanvasCompleted:function(){Ft.current&&Qt(!0)}})},canvasLayerRendered:te,doc:A,height:me,pageIndex:V,rotation:Me,scale:ct,svgLayer:{attrs:{},children:e.createElement(gi,{height:me,page:Pt,rotation:Me,scale:ct,width:_e})},textLayer:{attrs:{},children:e.createElement(mi,{containerRef:de,page:Pt,pageIndex:V,plugins:$,rotation:Me,scale:ct,onRenderTextCompleted:function(){Ft.current&&se(!0)}})},textLayerRendered:ie,width:_e,markRendered:Xt,onRotatePage:function(Pe){return xt(V,Pe)}}),$.map((function(Pe,Oe){return Pe.renderPageLayer?e.createElement(e.Fragment,{key:Oe},Pe.renderPageLayer({canvasLayerRef:be,canvasLayerRendered:te,doc:A,height:me,pageIndex:V,rotation:Me,scale:ct,textLayerRef:de,textLayerRendered:ie,width:_e})):e.createElement(e.Fragment,{key:Oe})}))):e.createElement(H,{testId:"core__page-layer-loading-".concat(V)}))},_i=function(l,A){var O=A.rect;return l.height!==O.height||l.width!==O.width?O:l};(function(l){l.Horizontal="Horizontal",l.Vertical="Vertical",l.Both="Both"})(Wt||(Wt={}));var bi=function(l){return 1-Math.pow(1-l,4)},mn=1e-4,On={left:0,top:0},In={capture:!1,passive:!0},yi=function(l){var A=l.elementRef,O=l.enableSmoothScroll,N=l.isRtl,V=l.scrollDirection,q=l.onSmoothScroll,Z=e.useState(On),$=Z[0],j=Z[1],J=e.useState(A.current),Y=J[0],ct=J[1],lt=N?-1:1,ot=e.useRef(V);ot.current=V;var At=e.useRef(On),bt=e.useRef(!0),vt=e.useCallback((function(){bt.current=!0,O&&j(At.current),q(!1)}),[]),Xt=e.useCallback((function(){if(Y){switch(ot.current){case Wt.Horizontal:At.current={left:lt*Y.scrollLeft,top:0};break;case Wt.Both:At.current={left:lt*Y.scrollLeft,top:Y.scrollTop};break;case Wt.Vertical:default:At.current={left:0,top:Y.scrollTop}}O&&!bt.current||j(At.current)}}),[Y]);i((function(){ct(A.current)})),i((function(){if(Y)return Y.addEventListener("scroll",Xt,In),function(){Y.removeEventListener("scroll",Xt,In)}}),[Y]);var xt=e.useCallback((function(Ft,Nt){var Pt=A.current;if(!Pt)return Promise.resolve();var jt={left:0,top:0};switch(ot.current){case Wt.Horizontal:jt.left=lt*Ft.left;break;case Wt.Both:jt.left=lt*Ft.left,jt.top=Ft.top;break;case Wt.Vertical:default:jt.top=Ft.top}return Nt?(bt.current=!1,q(!0),new Promise((function(It,te){(function(Qt,ee,ie,se,be,de){be===void 0&&(be=function(Oe){return Oe}),de===void 0&&(de=function(){});var ye=0,ge=0,ve=!1;switch(ee){case Wt.Horizontal:ge=Qt.scrollLeft,ye=0;case Wt.Both:ge=Qt.scrollLeft,ye=Qt.scrollTop;break;case Wt.Vertical:default:ge=0,ye=Qt.scrollTop}var _e=function(){ve||(ve=!0,Qt.scrollLeft=ie.left,Qt.scrollTop=ie.top,de())};if(Math.abs(ye-ie.top)<=mn&&ee===Wt.Vertical)_e();else if(Math.abs(ge-ie.left)<=mn&&ee===Wt.Horizontal)_e();else{var me,Me=-1,Ue=ge-ie.left,je=ye-ie.top,Pe=function(Oe){Me===-1&&(Me=Oe);var ze=Oe-Me,Dt=Math.min(ze/se,1),Ot=be(Dt),Tt={left:ge-Ue*Ot,top:ye-je*Ot};switch(ee){case Wt.Horizontal:Qt.scrollLeft=Tt.left;break;case Wt.Both:Qt.scrollLeft=Tt.left,Qt.scrollTop=Tt.top;break;case Wt.Vertical:default:Qt.scrollTop=Tt.top}Math.abs(Tt.top-ie.top)<=mn&&Math.abs(Tt.left-ie.left)<=mn&&!ve&&(window.cancelAnimationFrame(me),_e()),ze<se?me=window.requestAnimationFrame(Pe):window.cancelAnimationFrame(me)};me=window.requestAnimationFrame(Pe)}})(Pt,ot.current,jt,400,bi,(function(){vt(),It()}))}))):new Promise((function(It,te){switch(ot.current){case Wt.Horizontal:Pt.scrollLeft=jt.left;break;case Wt.Both:Pt.scrollLeft=jt.left,Pt.scrollTop=jt.top;break;case Wt.Vertical:default:Pt.scrollTop=jt.top}It()}))}),[A]);return{scrollOffset:$,scrollTo:xt}},fn=function(l,A,O){return Math.max(l,Math.min(O,A))},Ai=function(l,A){if(A!==h.ViewMode.DualPageWithCover)return 0;if(!(function(V){var q=V.length;if(q===1)return!1;for(var Z=1;Z<q;Z++)if(V[Z].height!==V[0].height||V[Z].width!==V[0].width)return!0;return!1})(l))return 2*l[0].width;var O=ne(l.slice(1),2).map((function(V){return V.length===2?V[0].width+V[1].width:V[0].width})),N=[l[0].width].concat(O);return Math.max.apply(Math,N)},Si={left:0,top:0},Ei={left:0,top:0},Sn={left:0,top:0},wi={left:0,top:0},Ci={height:0,width:0},Dn={left:0,top:0},Nn="data-virtual-index",Pi=[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1],Ti=function(l){var A=l.enableSmoothScroll,O=l.isRtl,N=l.numberOfItems,V=l.parentRef,q=l.setRenderRange,Z=l.sizes,$=l.scrollMode,j=l.viewMode,J=e.useState(!1),Y=J[0],ct=J[1],lt=e.useCallback((function(Dt){return ct(Dt)}),[]),ot=e.useRef($);ot.current=$;var At=e.useRef(j);At.current=j;var bt=$===h.ScrollMode.Wrapped||j===h.ViewMode.DualPageWithCover||j===h.ViewMode.DualPage?Wt.Both:$===h.ScrollMode.Horizontal?Wt.Horizontal:Wt.Vertical,vt=yi({elementRef:V,enableSmoothScroll:A,isRtl:O,scrollDirection:bt,onSmoothScroll:lt}),Xt=vt.scrollOffset,xt=vt.scrollTo,Ft=(function(Dt){var Ot=Dt.elementRef,Tt=e.useState(Ot.current),kt=Tt[0],Rt=Tt[1],Ht=e.useRef(!1),Ut=e.useReducer(_i,{height:0,width:0}),Mt=Ut[0],wt=Ut[1];return i((function(){Ot.current!==kt&&Rt(Ot.current)})),i((function(){if(kt&&!Ht.current){Ht.current=!0;var Vt=kt.getBoundingClientRect(),Kt=Vt.height,ue=Vt.width;wt({rect:{height:Kt,width:ue}})}}),[kt]),e.useEffect((function(){if(kt){var Vt=new ResizeObserver((function(Kt,ue){Kt.forEach((function(le){if(le.target===kt){var Re=le.contentRect,Ie=Re.height,qt=Re.width;wt({rect:{height:Ie,width:qt}})}}))}));return Vt.observe(kt),function(){Vt.unobserve(kt)}}}),[kt]),Mt})({elementRef:V}),Nt=e.useRef({scrollOffset:Dn,measurements:[]});Nt.current.scrollOffset=Xt;var Pt=e.useMemo((function(){return Array(N).fill(-1)}),[]),jt=e.useState(Pt),It=jt[0],te=jt[1],Qt=e.useMemo((function(){var Dt=new IntersectionObserver((function(Ot){Ot.forEach((function(Tt){var kt=Tt.isIntersecting?Tt.intersectionRatio:-1,Rt=Tt.target.getAttribute(Nn);if(Rt){var Ht=parseInt(Rt,10);0<=Ht&&Ht<N&&te((function(Ut){return Ut[Ht]=kt,(function(Mt,wt,Vt){for(var Kt,ue=0,le=wt.length;ue<le;ue++)!Kt&&ue in wt||(Kt||(Kt=Array.prototype.slice.call(wt,0,ue)),Kt[ue]=wt[ue]);return Mt.concat(Kt||Array.prototype.slice.call(wt))})([],Ut)}))}}))}),{threshold:Pi});return Dt}),[]),ee=e.useMemo((function(){return $===h.ScrollMode.Page&&j===h.ViewMode.SinglePage?(function(Dt,Ot,Tt){for(var kt=[],Rt=0;Rt<Dt;Rt++){var Ht={height:Math.max(Ot.height,Tt[Rt].height),width:Math.max(Ot.width,Tt[Rt].width)},Ut=Rt===0?wi:kt[Rt-1].end,Mt={left:Ut.left+Ht.width,top:Ut.top+Ht.height};kt[Rt]={index:Rt,start:Ut,size:Ht,end:Mt,visibility:-1}}return kt})(N,Ft,Z):j===h.ViewMode.DualPageWithCover?(function(Dt,Ot,Tt,kt){for(var Rt=[],Ht=0,Ut=0,Mt=Sn,wt=0;wt<Dt;wt++){var Vt=wt===0?{height:kt===h.ScrollMode.Page?Math.max(Ot.height,Tt[wt].height):Tt[wt].height,width:kt===h.ScrollMode.Page?Math.max(Ot.width,Tt[wt].width):Tt[wt].width}:{height:kt===h.ScrollMode.Page?Math.max(Ot.height,Tt[wt].height):Tt[wt].height,width:Math.max(Ot.width/2,Tt[wt].width)};kt===h.ScrollMode.Page?Mt=wt===0?Sn:{left:wt%2==0?Vt.width:0,top:Math.floor((wt-1)/2)*Vt.height+Rt[0].end.top}:wt===0?(Mt=Sn,Ht=Tt[0].height,Ut=0):wt%2==1?(Mt={left:0,top:Ht+=Ut},Ut=wt===Dt-1?Tt[wt].height:Math.max(Tt[wt].height,Tt[wt+1].height)):Mt={left:Rt[wt-1].end.left,top:Ht};var Kt={left:Mt.left+Vt.width,top:Mt.top+Vt.height};Rt[wt]={index:wt,start:Mt,size:Vt,end:Kt,visibility:-1}}return Rt})(N,Ft,Z,$):j===h.ViewMode.DualPage?(function(Dt,Ot,Tt,kt){for(var Rt=[],Ht=0,Ut=0,Mt=Ei,wt=0;wt<Dt;wt++){var Vt={height:kt===h.ScrollMode.Page?Math.max(Ot.height,Tt[wt].height):Tt[wt].height,width:Math.max(Ot.width/2,Tt[wt].width)};kt===h.ScrollMode.Page?Mt={left:wt%2==0?0:Vt.width,top:Math.floor(wt/2)*Vt.height}:wt%2==0?(Mt={left:0,top:Ht+=Ut},Ut=wt===Dt-1?Tt[wt].height:Math.max(Tt[wt].height,Tt[wt+1].height)):Mt={left:Rt[wt-1].end.left,top:Ht};var Kt={left:Mt.left+Vt.width,top:Mt.top+Vt.height};Rt[wt]={index:wt,start:Mt,size:Vt,end:Kt,visibility:-1}}return Rt})(N,Ft,Z,$):(function(Dt,Ot,Tt,kt){for(var Rt=[],Ht=0,Ut={left:0,top:0},Mt=0,wt=Si,Vt=0;Vt<Dt;Vt++){var Kt=Tt[Vt];if(Vt===0)Ht=Kt.width,Ut={left:0,top:0},Mt=Kt.height;else switch(kt){case h.ScrollMode.Wrapped:(Ht+=Kt.width)<Ot.width?(wt={left:Rt[Vt-1].end.left,top:Ut.top},Mt=Math.max(Mt,Kt.height)):(Ht=Kt.width,Ut={left:(wt={left:Ut.left,top:Ut.top+Mt}).left,top:wt.top},Mt=Kt.height);break;case h.ScrollMode.Horizontal:case h.ScrollMode.Vertical:default:wt=Rt[Vt-1].end}var ue={left:wt.left+Kt.width,top:wt.top+Kt.height};Rt[Vt]={index:Vt,start:wt,size:Kt,end:ue,visibility:-1}}return Rt})(N,Ft,Z,$)}),[$,Z,j,Ft]),ie=ee[N-1]?{height:ee[N-1].end.top,width:ee[N-1].end.left}:Ci;Nt.current.measurements=ee;var se=e.useMemo((function(){var Dt=(function(Vt,Kt,ue,le){var Re=0;switch(Vt){case Wt.Horizontal:Re=le.left;break;case Wt.Vertical:default:Re=le.top}var Ie=Kt.length-1,qt=(function(oe,Xe,on,_n){for(;oe<=Xe;){var en=(oe+Xe)/2|0,pn=_n(en);if(pn<on)oe=en+1;else{if(!(pn>on))return en;Xe=en-1}}return oe>0?oe-1:0})(0,Ie,Re,(function(oe){switch(Vt){case Wt.Horizontal:return Kt[oe].start.left;case Wt.Both:case Wt.Vertical:default:return Kt[oe].start.top}}));if(Vt===Wt.Both)for(var ke=Kt[qt].start.top;qt-1>=0&&Kt[qt-1].start.top===ke&&Kt[qt-1].start.left>=le.left;)qt--;for(var he=qt;he<=Ie;){var fe={top:Kt[he].start.top-le.top,left:Kt[he].start.left-le.left},we={height:ue.height-fe.top,width:ue.width-fe.left};if(Vt===Wt.Horizontal&&we.width<0||Vt===Wt.Vertical&&we.height<0||Vt===Wt.Both&&(we.width<0||we.height<0))break;he++}return{start:qt,end:he}})(bt,ee,Ft,Xt),Ot=Dt.start,Tt=Dt.end,kt=It.slice(fn(0,N,Ot),fn(0,N,Tt)),Rt=Ot+kt.reduce((function(Vt,Kt,ue,le){return Kt>le[Vt]?ue:Vt}),0),Ht=Rt=fn(0,N-1,Rt),Ut=q({endPage:Tt,numPages:N,startPage:Ot}),Mt=Ut.startPage,wt=Ut.endPage;switch(Mt=Math.max(Mt,0),wt=Math.min(wt,N-1),j){case h.ViewMode.DualPageWithCover:Rt>0&&(Ht=Rt%2==1?Rt:Rt-1),Mt=Mt===0?0:Mt%2==1?Mt:Mt-1,N-(wt=wt%2==1?wt-1:wt)<=2&&(wt=N-1);break;case h.ViewMode.DualPage:Ht=Rt%2==0?Rt:Rt-1,Mt=Mt%2==0?Mt:Mt-1,wt=wt%2==1?wt:wt-1;break;case h.ViewMode.SinglePage:default:Ht=Rt}return{startPage:Mt,endPage:wt,maxVisbilityIndex:Ht}}),[ee,Ft,Xt,j,It]),be=se.startPage,de=se.endPage,ye=se.maxVisbilityIndex,ge=e.useMemo((function(){for(var Dt=[],Ot=function(kt){var Rt=ee[kt],Ht=n(n({},Rt),{visibility:It[kt]!==void 0?It[kt]:-1,measureRef:function(Ut){Ut&&(Ut.setAttribute(Nn,"".concat(kt)),Qt.observe(Ut))}});Dt.push(Ht)},Tt=be;Tt<=de;Tt++)Ot(Tt);return Dt}),[be,de,It,ee]),ve=e.useCallback((function(Dt,Ot){var Tt=Nt.current.measurements[fn(0,N-1,Dt)],kt=ot.current===h.ScrollMode.Page?Dn:Ot;return Tt?xt({left:kt.left+Tt.start.left,top:kt.top+Tt.start.top},A):Promise.resolve()}),[xt,A]),_e=e.useCallback((function(Dt,Ot){var Tt=Nt.current.measurements,kt=Tt[Dt].start,Rt=Tt.find((function(Ut){return Ut.start.top-kt.top>1e-12}));if(!Rt)return Promise.resolve();var Ht=Rt.index;switch(At.current){case h.ViewMode.DualPage:Ht=Ht%2==0?Ht:Ht+1;break;case h.ViewMode.DualPageWithCover:Ht=Ht%2==1?Ht:Ht+1}return ve(Ht,Ot)}),[]),me=e.useCallback((function(Dt,Ot){for(var Tt=Nt.current.measurements,kt=Tt[Dt].start,Rt=Dt,Ht=!1,Ut=N-1;Ut>=0;Ut--)if(kt.top-Tt[Ut].start.top>1e-12){Ht=!0,Rt=Tt[Ut].index;break}if(!Ht)return Promise.resolve();switch(At.current){case h.ViewMode.DualPage:Rt=Rt%2==0?Rt:Rt-1;break;case h.ViewMode.DualPageWithCover:Rt=Rt%2==0?Rt-1:Rt}return Rt===Dt&&(Rt=Dt-1),ve(Rt,Ot)}),[]),Me=e.useCallback((function(Dt,Ot){if(At.current===h.ViewMode.DualPageWithCover||At.current===h.ViewMode.DualPage)return _e(Dt,Ot);switch(ot.current){case h.ScrollMode.Wrapped:return _e(Dt,Ot);case h.ScrollMode.Horizontal:case h.ScrollMode.Vertical:default:return ve(Dt+1,Ot)}}),[]),Ue=e.useCallback((function(Dt,Ot){if(At.current===h.ViewMode.DualPageWithCover||At.current===h.ViewMode.DualPage)return me(Dt,Ot);switch(ot.current){case h.ScrollMode.Wrapped:return me(Dt,Ot);case h.ScrollMode.Horizontal:case h.ScrollMode.Vertical:default:return ve(Dt-1,Ot)}}),[]),je=e.useCallback((function(){return(function(Dt,Ot){switch(Ot){case h.ScrollMode.Horizontal:return{position:"relative",height:"100%",width:"".concat(Dt.width,"px")};case h.ScrollMode.Vertical:default:return{position:"relative",height:"".concat(Dt.height,"px"),width:"100%"}}})(ie,ot.current)}),[ie]),Pe=e.useCallback((function(Dt){return(function(Ot,Tt,kt){return kt!==h.ScrollMode.Page?{}:{height:"".concat(Tt.height,"px"),width:"100%",position:"absolute",top:0,transform:"translateY(".concat(Ot.start.top,"px)")}})(Dt,Ft,ot.current)}),[Ft]),Oe=e.useCallback((function(Dt){return(function(Ot,Tt,kt,Rt,Ht){var Ut,Mt,wt,Vt,Kt,ue,le,Re=Tt?"right":"left",Ie=Tt?-1:1,qt=kt.length,ke=Ot.start.left*Ie,he=Ot.size,fe=he.height,we=he.width;if(Rt===h.ViewMode.DualPageWithCover){var oe=Ht===h.ScrollMode.Page?0:Ot.start.top;return Ot.index===0||qt%2==0&&Ot.index===qt-1?((Ut={height:"".concat(fe,"px"),minWidth:"".concat(Ai(kt,Rt),"px"),width:"100%"})[Re]=0,Ut.position="absolute",Ut.top=0,Ut.transform="translate(".concat(ke,"px, ").concat(oe,"px)"),Ut):((Mt={height:"".concat(fe,"px"),width:"".concat(we,"px")})[Re]=0,Mt.position="absolute",Mt.top=0,Mt.transform="translate(".concat(ke,"px, ").concat(oe,"px)"),Mt)}if(Rt===h.ViewMode.DualPage)return(wt={height:"".concat(fe,"px"),width:"".concat(we,"px")})[Re]=0,wt.position="absolute",wt.top=0,wt.transform="translate(".concat(ke,"px, ").concat(Ht===h.ScrollMode.Page?0:Ot.start.top,"px)"),wt;switch(Ht){case h.ScrollMode.Horizontal:return(Vt={height:"100%",width:"".concat(we,"px")})[Re]=0,Vt.position="absolute",Vt.top=0,Vt.transform="translateX(".concat(ke,"px)"),Vt;case h.ScrollMode.Page:return(Kt={height:"".concat(fe,"px"),width:"".concat(we,"px")})[Re]=0,Kt.position="absolute",Kt.top=0,Kt;case h.ScrollMode.Wrapped:return(ue={height:"".concat(fe,"px"),width:"".concat(we,"px")})[Re]=0,ue.position="absolute",ue.top=0,ue.transform="translate(".concat(ke,"px, ").concat(Ot.start.top,"px)"),ue;case h.ScrollMode.Vertical:default:return(le={height:"".concat(fe,"px"),width:"100%"})[Re]=0,le.position="absolute",le.top=0,le.transform="translateY(".concat(Ot.start.top,"px)"),le}})(Dt,O,Z,At.current,ot.current)}),[O,Z]),ze=e.useCallback((function(Dt,Ot){var Tt=Nt.current,kt=Tt.measurements,Rt=Tt.scrollOffset,Ht=kt[fn(0,N-1,Ot)];if(Ht){var Ut=ot.current===h.ScrollMode.Page?{left:Ht.start.left,top:Ht.start.top}:{left:Rt.left*Dt,top:Rt.top*Dt};return xt(Ut,!1)}return Promise.resolve()}),[]);return e.useEffect((function(){return function(){Qt.disconnect()}}),[]),{boundingClientRect:Ft,isSmoothScrolling:Y,startPage:be,endPage:de,maxVisbilityIndex:ye,virtualItems:ge,getContainerStyles:je,getItemContainerStyles:Pe,getItemStyles:Oe,scrollToItem:ve,scrollToNextItem:Me,scrollToPreviousItem:Ue,zoom:ze}},En=function(l,A,O,N,V,q){var Z=O;switch(!0){case(V===h.ViewMode.DualPageWithCover&&q>=3):case(V===h.ViewMode.DualPage&&q>=3):Z=2*O;break;default:Z=O}switch(N){case h.SpecialZoomLevel.ActualSize:return 1;case h.SpecialZoomLevel.PageFit:return Math.min((l.clientWidth-17)/Z,(l.clientHeight-16)/A);case h.SpecialZoomLevel.PageWidth:return(l.clientWidth-17)/Z}},Ri=function(l){var A,O,N=l.getCurrentPage,V=(A=50,O=e.useRef([]),e.useEffect((function(){return function(){O.current=[]}}),[]),{push:function(J){var Y=O.current;Y.length+1>A&&Y.shift(),Y.push(J),O.current=Y},map:function(J){return O.current.map((function(Y){return J(Y)}))},pop:function(){var J=O.current;if(J.length===0)return null;var Y=J.pop();return O.current=J,Y}}),q=(function(J){var Y=e.useRef([]);return e.useEffect((function(){return function(){Y.current=[]}}),[]),{dequeue:function(){var ct=Y.current;if(ct.length===0)return null;var lt=ct.shift();return Y.current=ct,lt||null},enqueue:function(ct){var lt=Y.current;lt.length+1>J&&lt.pop(),Y.current=[ct].concat(lt)},map:function(ct){return Y.current.map((function(lt){return ct(lt)}))}}})(50),Z=function(){var J=q.dequeue();return J&&V.push(J),J&&J.pageIndex===N()?Z():J},$=function(){var J=V.pop();return J&&q.enqueue(J),J&&J.pageIndex===N()?$():J},j=e.useCallback((function(J){V.push(J)}),[]);return{getNextDestination:Z,getPreviousDestination:$,markVisitedDestination:j}},Bn=function(l){var A=[];return l.map((function(O){A=A.concat(O).concat((function(N){var V=[];return N.items&&N.items.length>0&&(V=V.concat(Bn(N.items))),V})(O))})),A},jn={capture:!1,passive:!0},ki={height:0,width:0},wn={height:0,width:0},Mi=function(l){var A=l.getCurrentPage,O=l.getCurrentScrollMode,N=l.jumpToPage,V=l.targetRef,q=e.useState(h.FullScreenMode.Normal),Z=q[0],$=q[1],j=(function(){var It=e.useState(ki),te=It[0],Qt=It[1],ee=pt((function(){Qt({height:window.innerHeight,width:window.innerWidth})}),100);return i((function(){return window.addEventListener("resize",ee,jn),function(){window.removeEventListener("resize",ee,jn)}}),[]),te})(),J=e.useState(wn),Y=J[0],ct=J[1],lt=e.useRef(wn),ot=e.useRef(A()),At=e.useRef(wn),bt=e.useState(V.current),vt=bt[0],Xt=bt[1],xt=e.useRef();i((function(){V.current!==vt&&Xt(V.current)}),[]),i((function(){if(vt){var It=new ResizeObserver((function(te){te.forEach((function(Qt){var ee=Qt.target.getBoundingClientRect(),ie=ee.height,se=ee.width;ct({height:ie,width:se})}))}));return It.observe(vt),function(){It.unobserve(vt),It.disconnect()}}}),[vt]);var Ft=e.useCallback((function(It){var te=dt();return te&&te!==It?($(h.FullScreenMode.Normal),ft(te)):Promise.resolve()}),[]),Nt=e.useCallback((function(It){It&&et()&&(Xt(It),Ft(It).then((function(){xt.current=It,$(h.FullScreenMode.Entering),(function(te){z&&te[Q.RequestFullScreen]()})(It)})))}),[]),Pt=e.useCallback((function(){dt()&&($(h.FullScreenMode.Exitting),ft(document))}),[]),jt=e.useCallback((function(){vt&&dt()!==vt&&$(h.FullScreenMode.Exitting)}),[vt]);return e.useEffect((function(){switch(Z){case h.FullScreenMode.Entering:xt.current&&(xt.current.style.backgroundColor="var(--rpv-core__full-screen-target-background-color)"),ot.current=A(),lt.current={height:window.innerHeight,width:window.innerWidth};break;case h.FullScreenMode.Entered:O()===h.ScrollMode.Page?N(ot.current).then((function(){$(h.FullScreenMode.EnteredCompletely)})):$(h.FullScreenMode.EnteredCompletely);break;case h.FullScreenMode.Exitting:xt.current&&(xt.current.style.backgroundColor="",xt.current=null),ot.current=A();break;case h.FullScreenMode.Exited:$(h.FullScreenMode.Normal),O()===h.ScrollMode.Page&&N(ot.current)}}),[Z]),e.useEffect((function(){if(Z!==h.FullScreenMode.Normal)return Z===h.FullScreenMode.Entering&&j.height===Y.height&&j.width===Y.width&&j.height>0&&j.width>0&&(At.current.height===0||j.height==At.current.height)?(At.current={height:window.innerHeight,width:window.innerWidth},void $(h.FullScreenMode.Entered)):void(Z===h.FullScreenMode.Exitting&&lt.current.height===j.height&&lt.current.width===j.width&&j.height>0&&j.width>0&&$(h.FullScreenMode.Exited))}),[Z,j,Y]),e.useEffect((function(){var It;return It=jt,z&&document.addEventListener(Q.FullScreenChange,It),function(){(function(te){z&&document.removeEventListener(Q.FullScreenChange,te)})(jt)}}),[vt]),{enterFullScreenMode:Nt,exitFullScreenMode:Pt,fullScreenMode:Z}},xi={buildPageStyles:function(){return{}},transformSize:function(l){return l.size}},an={left:0,top:0},Fi=function(l){var A=l.currentFile,O=l.defaultScale,N=l.doc,V=l.enableSmoothScroll,q=l.initialPage,Z=l.initialRotation,$=l.initialScale,j=l.pageLayout,J=l.pageSizes,Y=l.plugins,ct=l.renderPage,lt=l.scrollMode,ot=l.setRenderRange,At=l.viewMode,bt=l.viewerState,vt=l.onDocumentLoad,Xt=l.onOpenFile,xt=l.onPageChange,Ft=l.onRotate,Nt=l.onRotatePage,Pt=l.onZoom,jt=N.numPages,It=N.loadingTask.docId,te=e.useContext(f).l10n,Qt=e.useContext(a),ee=Qt.direction===h.TextDirection.RightToLeft,ie=e.useRef(),se=e.useRef(),be=e.useState(q),de=be[0],ye=be[1],ge=e.useRef(null),ve=Ri({getCurrentPage:function(){return qt.current.pageIndex}}),_e=e.useState(Z),me=_e[0],Me=_e[1],Ue=st(me),je=e.useState(!1),Pe=je[0],Oe=je[1],ze=e.useState(new Map),Dt=ze[0],Ot=ze[1],Tt=e.useState(lt),kt=Tt[0],Rt=Tt[1],Ht=st(kt),Ut=e.useState(At),Mt=Ut[0],wt=Ut[1],Vt=st(Mt),Kt=(function(mt){var zt=yt(),Jt=e.useState([]),ae=Jt[0],re=Jt[1];return e.useEffect((function(){mt.getOutline().then((function(Zt){if(zt.current&&Zt!==null){var Ce=Bn(Zt);re(Ce)}}))}),[]),ae})(N),ue=e.useState($),le=ue[0],Re=ue[1],Ie=st(le),qt=e.useRef(bt),ke=e.useRef(typeof O=="string"?O:null),he=e.useRef(-1),fe=e.useRef(-1),we=e.useRef(q),oe=Mi({getCurrentPage:function(){return qt.current.pageIndex},getCurrentScrollMode:function(){return qt.current.scrollMode},jumpToPage:function(mt){return Ye(mt)},targetRef:se}),Xe=e.useState(-1),on=Xe[0],_n=Xe[1],en=e.useState(0),pn=en[0],Bi=en[1],De=d({doc:N});e.useEffect((function(){return function(){Ae.clear(),He.clear()}}),[It]);var zn=e.useMemo((function(){return Object.assign({},xi,j)}),[]),ji=e.useMemo((function(){return Array(jt).fill(0).map((function(mt,zt){var Jt=[J[zt].pageHeight,J[zt].pageWidth],ae=Math.abs(me)%180==0?{height:Jt[0],width:Jt[1]}:{height:Jt[1],width:Jt[0]},re={height:ae.height*le,width:ae.width*le};return zn.transformSize({numPages:jt,pageIndex:zt,size:re})}))}),[me,le]),ce=Ti({enableSmoothScroll:V,isRtl:ee,numberOfItems:jt,parentRef:se,scrollMode:kt,setRenderRange:ot,sizes:ji,viewMode:Mt}),Hi=pt((function(){!ke.current||qt.current.fullScreenMode!==h.FullScreenMode.Normal||q>0&&we.current===q||nn(ke.current)}),200);(function(mt){var zt=mt.targetRef,Jt=mt.onResize;i((function(){var ae=new ResizeObserver((function(Zt){Zt.forEach((function(Ce){Jt(Ce.target)}))})),re=zt.current;if(re)return ae.observe(re),function(){ae.unobserve(re)}}),[])})({targetRef:se,onResize:Hi});var $e=function(mt){var zt=mt;Y.forEach((function(Jt){Jt.onViewerStateChange&&(zt=Jt.onViewerStateChange(zt))})),qt.current=zt},Ui=function(){return se.current},Wi=function(){return qt.current},zi=e.useCallback((function(mt){ve.markVisitedDestination(mt)}),[]),Tn=e.useCallback((function(mt){var zt=mt.pageIndex,Jt=mt.bottomOffset,ae=mt.leftOffset,re=mt.scaleTo,Zt=se.current,Ce=qt.current;return Zt&&Ce?new Promise((function(Ke,Ln){Ve(N,zt).then((function(bn){var Je=bn.getViewport({scale:1}),yn=0,Jn=(typeof Jt=="function"?Jt(Je.width,Je.height):Jt)||0,An=(typeof ae=="function"?ae(Je.width,Je.height):ae)||0,ln=Ce.scale;switch(re){case h.SpecialZoomLevel.PageFit:yn=0,An=0,nn(h.SpecialZoomLevel.PageFit);break;case h.SpecialZoomLevel.PageWidth:ln=En(Zt,J[zt].pageHeight,J[zt].pageWidth,h.SpecialZoomLevel.PageWidth,At,jt),yn=(Je.height-Jn)*ln,An*=ln,nn(ln);break;default:yn=(Je.height-Jn)*ln,An*=ln}switch(Ce.scrollMode){case h.ScrollMode.Horizontal:ce.scrollToItem(zt,{left:An,top:0}).then((function(){Ke()}));break;case h.ScrollMode.Vertical:default:ce.scrollToItem(zt,{left:0,top:yn}).then((function(){Ke()}))}}))})):Promise.resolve()}),[]),Vn=e.useCallback((function(mt){return ve.markVisitedDestination(mt),Tn(mt)}),[]),Vi=e.useCallback((function(){var mt=ve.getNextDestination();return mt?Tn(mt):Promise.resolve()}),[]),qi=e.useCallback((function(){var mt=ve.getPreviousDestination();return mt?Tn(mt):Promise.resolve()}),[]),Gi=e.useCallback((function(){return ce.scrollToNextItem(qt.current.pageIndex,an)}),[]),Ye=e.useCallback((function(mt){return 0<=mt&&mt<jt?ce.scrollToItem(mt,an):Promise.resolve()}),[]),Xi=e.useCallback((function(){return ce.scrollToPreviousItem(qt.current.pageIndex,an)}),[]),qn=e.useCallback((function(mt){var zt,Jt;(zt=mt.name,Jt=zt.split(/\./).pop(),Jt?Jt.toLowerCase():"").toLowerCase()==="pdf"&&new Promise((function(ae){var re=new FileReader;re.readAsArrayBuffer(mt),re.onload=function(){var Zt=new Uint8Array(re.result);ae(Zt)}})).then((function(ae){Xt(mt.name,ae)}))}),[Xt]),Gn=e.useCallback((function(mt){var zt=mt===h.RotateDirection.Backward?-90:90,Jt=qt.current.rotation,ae=Jt===360||Jt===-360?zt:Jt+zt;De.markNotRendered(),Me(ae),$e(n(n({},qt.current),{rotation:ae})),Ft({direction:mt,doc:N,rotation:ae})}),[]),Rn=e.useCallback((function(mt,zt){var Jt=zt===h.RotateDirection.Backward?-90:90,ae=qt.current.pagesRotation,re=(ae.has(mt)?ae.get(mt):Z)+Jt,Zt=ae.set(mt,re);Ot(Zt),Oe((function(Ce){return!Ce})),$e(n(n({},qt.current),{pagesRotation:Zt,rotatedPage:mt})),Nt({direction:zt,doc:N,pageIndex:mt,rotation:re}),De.markRendering(mt),_n(mt)}),[]),Xn=e.useCallback((function(mt){$e(n(n({},qt.current),{scrollMode:mt})),Rt(mt)}),[]),$n=e.useCallback((function(mt){$e(n(n({},qt.current),{viewMode:mt})),wt(mt)}),[]),nn=e.useCallback((function(mt){var zt=se.current,Jt=qt.current.pageIndex;if(!(Jt<0||Jt>=jt)){var ae=J[Jt].pageHeight,re=J[Jt].pageWidth,Zt=zt?typeof mt=="string"?En(zt,ae,re,mt,qt.current.viewMode,jt):mt:1;ke.current=typeof mt=="string"?mt:null,Zt!==qt.current.scale&&(Bi((function(Ce){return Ce+1})),De.markNotRendered(),Re(Zt),Pt({doc:N,scale:Zt}),$e(n(n({},qt.current),{scale:Zt})))}}),[]),$i=e.useCallback((function(mt){oe.enterFullScreenMode(mt)}),[]),Yi=e.useCallback((function(){oe.exitFullScreenMode()}),[]);e.useEffect((function(){$e(n(n({},qt.current),{fullScreenMode:oe.fullScreenMode}))}),[oe.fullScreenMode]),e.useEffect((function(){var mt={enterFullScreenMode:$i,exitFullScreenMode:Yi,getPagesContainer:Ui,getViewerState:Wi,jumpToDestination:Vn,jumpToNextDestination:Vi,jumpToPreviousDestination:qi,jumpToNextPage:Gi,jumpToPreviousPage:Xi,jumpToPage:Ye,openFile:qn,rotate:Gn,rotatePage:Rn,setViewerState:$e,switchScrollMode:Xn,switchViewMode:$n,zoom:nn};return Y.forEach((function(zt){zt.install&&zt.install(mt)})),function(){Y.forEach((function(zt){zt.uninstall&&zt.uninstall(mt)}))}}),[It]),e.useEffect((function(){vt({doc:N,file:A}),Y.forEach((function(mt){mt.onDocumentLoad&&mt.onDocumentLoad({doc:N,file:A})}))}),[It]);var kn,Mn,xn,Yn=ce.boundingClientRect;kn=function(){q&&Ye(q)},Mn=Yn.height>0&&Yn.width>0,xn=e.useRef(!1),i((function(){Mn&&!xn.current&&(xn.current=!0,kn())}),[kn,Mn]),i((function(){var mt=qt.current.pageIndex;mt>-1&&Ht!==kt&&ce.scrollToItem(mt,an).then((function(){oe.fullScreenMode===h.FullScreenMode.EnteredCompletely&&(V||De.markNotRendered(),he.current=-1)}))}),[kt]),i((function(){var mt=qt.current.pageIndex;mt>-1&&Ue!==me&&ce.scrollToItem(mt,an)}),[me]),i((function(){Ie!=0&&Ie!=qt.current.scale&&ce.zoom(qt.current.scale/Ie,qt.current.pageIndex).then((function(){oe.fullScreenMode===h.FullScreenMode.EnteredCompletely&&(fe.current=-1)}))}),[le]),i((function(){if(Vt!==qt.current.viewMode){var mt=ce.startPage,zt=ce.endPage,Jt=ce.virtualItems;De.markNotRendered(),De.setRange(mt,zt);for(var ae=function(Zt){var Ce=Jt.find((function(Ke){return Ke.index===Zt}));Ce&&De.setVisibility(Zt,Ce.visibility)},re=mt;re<=zt;re++)ae(re);Fn()}}),[Mt]),i((function(){var mt=qt.current.pageIndex;mt>-1&&Vt!==Mt&&ce.scrollToItem(mt,an)}),[Mt]),i((function(){var mt=qt.current.pageIndex;mt>0&&mt===q&&we.current===q&&ke.current&&(we.current=-1,nn(ke.current))}),[de]),e.useEffect((function(){ce.isSmoothScrolling||ge.current!==null&&ge.current===de||(ge.current=de,xt({currentPage:de,doc:N}))}),[de,ce.isSmoothScrolling]),e.useEffect((function(){oe.fullScreenMode===h.FullScreenMode.Entering&&qt.current.scrollMode===h.ScrollMode.Page&&(he.current=qt.current.pageIndex),oe.fullScreenMode===h.FullScreenMode.EnteredCompletely&&qt.current.scrollMode===h.ScrollMode.Page&&V&&(he.current=-1),oe.fullScreenMode===h.FullScreenMode.EnteredCompletely&&ke.current&&(fe.current=qt.current.pageIndex,nn(ke.current))}),[oe.fullScreenMode]),e.useEffect((function(){if(oe.fullScreenMode!==h.FullScreenMode.Entering&&oe.fullScreenMode!==h.FullScreenMode.Exitting&&!ce.isSmoothScrolling){var mt=ce.startPage,zt=ce.endPage,Jt=ce.maxVisbilityIndex,ae=ce.virtualItems,re=Jt,Zt=oe.fullScreenMode===h.FullScreenMode.Entered||oe.fullScreenMode===h.FullScreenMode.EnteredCompletely;if(!(Zt&&re!==he.current&&he.current>-1||Zt&&re!==fe.current&&fe.current>-1)){ye(re),$e(n(n({},qt.current),{pageIndex:re})),De.setRange(mt,zt);for(var Ce=function(Ln){var bn=ae.find((function(Je){return Je.index===Ln}));bn&&De.setVisibility(Ln,bn.visibility)},Ke=mt;Ke<=zt;Ke++)Ce(Ke);Fn()}}}),[ce.startPage,ce.endPage,ce.isSmoothScrolling,ce.maxVisbilityIndex,oe.fullScreenMode,Pe,me,le]);var Ki=e.useCallback((function(mt){De.markRendered(mt),Fn()}),[pn]),Fn=function(){var mt=De.getHighestPriorityPage();mt>-1&&De.isInRange(mt)&&(De.markRendering(mt),_n(mt))},Ji=function(mt){var zt=de-1,Jt=de+1;switch(mt){case"FirstPage":Ye(0);break;case"LastPage":Ye(jt-1);break;case"NextPage":Jt<jt&&Ye(Jt);break;case"PrevPage":zt>=0&&Ye(zt)}},Zi=e.useCallback((function(){var mt=ce.virtualItems,zt=[];switch(Mt){case h.ViewMode.DualPage:zt=ne(mt,2);break;case h.ViewMode.DualPageWithCover:mt.length&&(zt=mt[0].index===0?[[mt[0]]].concat(ne(mt.slice(1),2)):ne(mt,2));break;case h.ViewMode.SinglePage:default:zt=ne(mt,1)}var Jt=te&&te.core?te.core.pageLabel:"Page {{pageIndex}}",ae={attrs:{className:"rpv-core__inner-container","data-testid":"core__inner-container",ref:ie,style:{height:"100%"}},children:e.createElement(e.Fragment,null),subSlot:{attrs:{"data-testid":"core__inner-pages",className:u({"rpv-core__inner-pages":!0,"rpv-core__inner-pages--horizontal":kt===h.ScrollMode.Horizontal,"rpv-core__inner-pages--rtl":ee,"rpv-core__inner-pages--single":kt===h.ScrollMode.Page,"rpv-core__inner-pages--vertical":kt===h.ScrollMode.Vertical,"rpv-core__inner-pages--wrapped":kt===h.ScrollMode.Wrapped}),ref:se,style:{height:"100%",position:"relative"}},children:e.createElement("div",{"data-testid":"core__inner-current-page-".concat(de),style:Object.assign({"--scale-factor":le},ce.getContainerStyles())},zt.map((function(re){return e.createElement("div",{className:u({"rpv-core__inner-page-container":!0,"rpv-core__inner-page-container--single":kt===h.ScrollMode.Page}),style:ce.getItemContainerStyles(re[0]),key:"".concat(re[0].index,"-").concat(Mt)},re.map((function(Zt){var Ce=Mt===h.ViewMode.DualPageWithCover&&(Zt.index===0||jt%2==0&&Zt.index===jt-1);return e.createElement("div",{"aria-label":Jt.replace("{{pageIndex}}","".concat(Zt.index+1)),className:u({"rpv-core__inner-page":!0,"rpv-core__inner-page--dual-even":Mt===h.ViewMode.DualPage&&Zt.index%2==0,"rpv-core__inner-page--dual-odd":Mt===h.ViewMode.DualPage&&Zt.index%2==1,"rpv-core__inner-page--dual-cover":Ce,"rpv-core__inner-page--dual-cover-even":Mt===h.ViewMode.DualPageWithCover&&!Ce&&Zt.index%2==0,"rpv-core__inner-page--dual-cover-odd":Mt===h.ViewMode.DualPageWithCover&&!Ce&&Zt.index%2==1,"rpv-core__inner-page--single":Mt===h.ViewMode.SinglePage&&kt===h.ScrollMode.Page}),role:"region",key:"".concat(Zt.index,"-").concat(Mt),style:Object.assign({},ce.getItemStyles(Zt),zn.buildPageStyles({numPages:jt,pageIndex:Zt.index,scrollMode:kt,viewMode:Mt}))},e.createElement(vi,{doc:N,measureRef:Zt.measureRef,outlines:Kt,pageIndex:Zt.index,pageRotation:Dt.has(Zt.index)?Dt.get(Zt.index):0,pageSize:J[Zt.index],plugins:Y,renderPage:ct,renderQueueKey:pn,rotation:me,scale:le,shouldRender:on===Zt.index,viewMode:Mt,onExecuteNamedAction:Ji,onJumpFromLinkAnnotation:zi,onJumpToDest:Vn,onRenderCompleted:Ki,onRotatePage:Rn}))})))})))}};return Y.forEach((function(re){re.renderViewer&&(ae=re.renderViewer({containerRef:ie,doc:N,pagesContainerRef:se,pagesRotation:Dt,pageSizes:J,rotation:me,slot:ae,themeContext:Qt,jumpToPage:Ye,openFile:qn,rotate:Gn,rotatePage:Rn,switchScrollMode:Xn,switchViewMode:$n,zoom:nn}))})),ae}),[Y,ce]),Kn=e.useCallback((function(mt){return e.createElement("div",n({},mt.attrs,{style:mt.attrs&&mt.attrs.style?mt.attrs.style:{}}),mt.children,mt.subSlot&&Kn(mt.subSlot))}),[]);return Kn(Zi())},Hn=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],Li=function(l){var A=l.defaultScale,O=l.doc,N=l.render,V=l.scrollMode,q=l.viewMode,Z=e.useRef(),$=e.useState({pageSizes:[],scale:0}),j=$[0],J=$[1];return e.useLayoutEffect((function(){var Y=Array(O.numPages).fill(0).map((function(ct,lt){return new Promise((function(ot,At){Ve(O,lt).then((function(bt){var vt=bt.getViewport({scale:1});ot({pageHeight:vt.height,pageWidth:vt.width,rotation:vt.rotation})}))}))}));Promise.all(Y).then((function(ct){var lt=Z.current;if(lt&&ct.length!==0){var ot=ct[0].pageWidth,At=ct[0].pageHeight,bt=lt.parentElement,vt=(bt.clientWidth-45)/ot,Xt=(bt.clientHeight-45)/At,xt=vt;switch(V){case h.ScrollMode.Horizontal:xt=Math.min(vt,Xt);break;case h.ScrollMode.Vertical:default:xt=vt}var Ft,Nt,Pt=A?typeof A=="string"?En(bt,At,ot,A,q,O.numPages):A:(Ft=xt,(Nt=Hn.findIndex((function(jt){return jt>=Ft})))===-1||Nt===0?Ft:Hn[Nt-1]);J({pageSizes:ct,scale:Pt})}}))}),[O.loadingTask.docId]),j.pageSizes.length===0||j.scale===0?e.createElement("div",{className:"rpv-core__page-size-calculator","data-testid":"core__page-size-calculating",ref:Z},e.createElement(H,null)):N(j.pageSizes,j.scale)},vn=function(){},Cn=(function(l){function A(O,N){var V=l.call(this)||this;return V.verifyPassword=O,V.passwordStatus=N,V}return R(A,l),A})(vn),Oi=function(l){var A=l.passwordStatus,O=l.renderProtectedView,N=l.verifyPassword,V=l.onDocumentAskPassword,q=e.useContext(f).l10n,Z=e.useState(""),$=Z[0],j=Z[1],J=e.useContext(a).direction===h.TextDirection.RightToLeft,Y=function(){return N($)};return e.useEffect((function(){V&&V({verifyPassword:N})}),[]),O?O({passwordStatus:A,verifyPassword:N}):e.createElement("div",{className:"rpv-core__asking-password-wrapper"},e.createElement("div",{className:u({"rpv-core__asking-password":!0,"rpv-core__asking-password--rtl":J})},e.createElement("div",{className:"rpv-core__asking-password-message"},A===h.PasswordStatus.RequiredPassword&&q.core.askingPassword.requirePasswordToOpen,A===h.PasswordStatus.WrongPassword&&q.core.wrongPassword.tryAgain),e.createElement("div",{className:"rpv-core__asking-password-body"},e.createElement("div",{className:u({"rpv-core__asking-password-input":!0,"rpv-core__asking-password-input--ltr":!J,"rpv-core__asking-password-input--rtl":J})},e.createElement(I,{testId:"core__asking-password-input",type:"password",value:$,onChange:j,onKeyDown:function(ct){ct.key==="Enter"&&Y()}})),e.createElement(C,{onClick:Y},q.core.askingPassword.submit))))},Un=(function(l){function A(O){var N=l.call(this)||this;return N.doc=O,N}return R(A,l),A})(vn),Wn=(function(l){function A(O){var N=l.call(this)||this;return N.error=O,N}return R(A,l),A})(vn),Pn=(function(l){function A(O){var N=l.call(this)||this;return N.percentages=O,N}return R(A,l),A})(vn),Ii=function(l){var A=l.characterMap,O=l.file,N=l.httpHeaders,V=l.render,q=l.renderError,Z=l.renderLoader,$=l.renderProtectedView,j=l.transformGetDocumentParams,J=l.withCredentials,Y=l.onDocumentAskPassword,ct=e.useContext(a).direction===h.TextDirection.RightToLeft,lt=e.useState(new Pn(0)),ot=lt[0],At=lt[1],bt=e.useRef(""),vt=yt();return e.useEffect((function(){bt.current="",At(new Pn(0));var Xt=new U.PDFWorker({name:"PDFWorker_".concat(Date.now())}),xt=Object.assign({httpHeaders:N,withCredentials:J,worker:Xt},typeof O=="string"?{url:O}:{data:O},A?{cMapUrl:A.url,cMapPacked:A.isCompressed}:{}),Ft=j?j(xt):xt,Nt=U.getDocument(Ft);return Nt.onPassword=function(Pt,jt){switch(jt){case U.PasswordResponses.NEED_PASSWORD:vt.current&&At(new Cn(Pt,h.PasswordStatus.RequiredPassword));break;case U.PasswordResponses.INCORRECT_PASSWORD:vt.current&&At(new Cn(Pt,h.PasswordStatus.WrongPassword))}},Nt.onProgress=function(Pt){var jt=Pt.total>0?Math.min(100,100*Pt.loaded/Pt.total):100;vt.current&&bt.current===""&&At(new Pn(jt))},Nt.promise.then((function(Pt){bt.current=Pt.loadingTask.docId,vt.current&&At(new Un(Pt))}),(function(Pt){return vt.current&&!Xt.destroyed&&At(new Wn({message:Pt.message||"Cannot load document",name:Pt.name}))})),function(){Nt.destroy(),Xt.destroy()}}),[O]),ot instanceof Cn?e.createElement(Oi,{passwordStatus:ot.passwordStatus,renderProtectedView:$,verifyPassword:ot.verifyPassword,onDocumentAskPassword:Y}):ot instanceof Un?V(ot.doc):ot instanceof Wn?q?q(ot.error):e.createElement("div",{className:u({"rpv-core__doc-error":!0,"rpv-core__doc-error--rtl":ct})},e.createElement("div",{className:"rpv-core__doc-error-text"},ot.error.message)):e.createElement("div",{"data-testid":"core__doc-loading",className:u({"rpv-core__doc-loading":!0,"rpv-core__doc-loading--rtl":ct})},Z?Z(ot.percentages):e.createElement(H,null))},Di=function(l,A){var O=e.useMemo((function(){return l==="auto"?typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":l}),[]),N=e.useState(O),V=N[0],q=N[1],Z=st(V);return e.useEffect((function(){if(l==="auto"){var $=window.matchMedia("(prefers-color-scheme: dark)"),j=function(J){q(J.matches?"dark":"light")};return $.addEventListener("change",j),function(){return $.removeEventListener("change",j)}}}),[]),e.useEffect((function(){V!==Z&&A&&A(V)}),[V]),e.useEffect((function(){l!==V&&q(l)}),[l]),{currentTheme:V,setCurrentTheme:q}},Ni=function(l){return{startPage:l.startPage-3,endPage:l.endPage+3}};h.Button=function(l){var A=l.children,O=l.testId,N=l.onClick,V=e.useContext(a).direction===h.TextDirection.RightToLeft,q=O?{"data-testid":O}:{};return e.createElement("button",n({className:u({"rpv-core__button":!0,"rpv-core__button--rtl":V}),type:"button",onClick:N},q),A)},h.Icon=m,h.LazyRender=function(l){var A=l.attrs,O=l.children,N=l.testId,V=e.useState(!1),q=V[0],Z=V[1],$=N?n(n({},A),{"data-testid":N}):A,j=_({once:!0,onVisibilityChanged:function(J){J.isVisible&&Z(!0)}});return e.createElement("div",n({ref:j},$),q&&O)},h.LocalizationContext=f,h.Menu=function(l){var A=l.children,O=e.useRef(),N=e.useRef([]),V=e.useContext(a).direction===h.TextDirection.RightToLeft,q=function($){if(O.current)switch($.key){case"Tab":$.preventDefault();break;case"ArrowDown":$.preventDefault(),Z((function(j,J){return J+1}));break;case"ArrowUp":$.preventDefault(),Z((function(j,J){return J-1}));break;case"End":$.preventDefault(),Z((function(j,J){return j.length-1}));break;case"Home":$.preventDefault(),Z((function(j,J){return 0}))}},Z=function($){if(O.current){var j=N.current,J=j.findIndex((function(ct){return ct.getAttribute("tabindex")==="0"})),Y=Math.min(j.length-1,Math.max(0,$(j,J)));J>=0&&J<=j.length-1&&j[J].setAttribute("tabindex","-1"),j[Y].setAttribute("tabindex","0"),j[Y].focus()}};return i((function(){var $=O.current;if($){var j=(function(J){var Y=[];return J.querySelectorAll('.rpv-core__menu-item[role="menuitem"]').forEach((function(ct){if(ct instanceof HTMLElement){var lt=ct.parentElement;(lt===J||window.getComputedStyle(lt).display!=="none")&&Y.push(ct)}})),Y})($);N.current=j}}),[]),i((function(){return document.addEventListener("keydown",q),function(){document.removeEventListener("keydown",q)}}),[]),e.createElement("div",{ref:O,"aria-orientation":"vertical",className:u({"rpv-core__menu":!0,"rpv-core__menu--rtl":V}),role:"menu",tabIndex:0},A)},h.MenuDivider=function(){return e.createElement("div",{"aria-orientation":"horizontal",className:"rpv-core__menu-divider",role:"separator"})},h.MenuItem=function(l){var A=l.checked,O=A!==void 0&&A,N=l.children,V=l.icon,q=V===void 0?null:V,Z=l.isDisabled,$=Z!==void 0&&Z,j=l.testId,J=l.onClick,Y=e.useContext(a).direction===h.TextDirection.RightToLeft,ct=j?{"data-testid":j}:{};return e.createElement("button",n({className:u({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":$,"rpv-core__menu-item--ltr":!Y,"rpv-core__menu-item--rtl":Y}),role:"menuitem",tabIndex:-1,type:"button",onClick:J},ct),e.createElement("div",{className:u({"rpv-core__menu-item-icon":!0,"rpv-core__menu-item-icon--ltr":!Y,"rpv-core__menu-item-icon--rtl":Y})},q),e.createElement("div",{className:u({"rpv-core__menu-item-label":!0,"rpv-core__menu-item-label--ltr":!Y,"rpv-core__menu-item-label--rtl":Y})},N),e.createElement("div",{className:u({"rpv-core__menu-item-check":!0,"rpv-core__menu-item-check--ltr":!Y,"rpv-core__menu-item-check--rtl":Y})},O&&e.createElement(g,null)))},h.MinimalButton=function(l){var A=l.ariaLabel,O=A===void 0?"":A,N=l.ariaKeyShortcuts,V=N===void 0?"":N,q=l.children,Z=l.isDisabled,$=Z!==void 0&&Z,j=l.isSelected,J=j!==void 0&&j,Y=l.testId,ct=l.onClick,lt=e.useContext(a).direction===h.TextDirection.RightToLeft,ot=Y?{"data-testid":Y}:{};return e.createElement("button",n({"aria-label":O},V&&{"aria-keyshortcuts":V},$&&{"aria-disabled":!0},{className:u({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":$,"rpv-core__minimal-button--rtl":lt,"rpv-core__minimal-button--selected":J}),type:"button",onClick:ct},ot),q)},h.Modal=function(l){var A=l.ariaControlsSuffix,O=l.closeOnClickOutside,N=l.closeOnEscape,V=l.content,q=l.isOpened,Z=q!==void 0&&q,$=l.target,j=A||"".concat(P());return e.createElement(x,{target:$?function(J,Y){return e.createElement("div",{"aria-expanded":Y?"true":"false","aria-haspopup":"dialog","aria-controls":"rpv-core__modal-body-".concat(j)},$(J,Y))}:null,content:function(J){return e.createElement(b,null,e.createElement(s,{ariaControlsSuffix:j,closeOnClickOutside:O,closeOnEscape:N,onToggle:J},V(J)))},isOpened:Z})},h.Popover=function(l){var A=l.ariaHasPopup,O=A===void 0?"dialog":A,N=l.ariaControlsSuffix,V=l.closeOnClickOutside,q=l.closeOnEscape,Z=l.content,$=l.lockScroll,j=$===void 0||$,J=l.offset,Y=l.position,ct=l.target,lt=k(!1),ot=lt.opened,At=lt.toggle,bt=e.useRef(),vt=e.useMemo((function(){return N||"".concat(P())}),[]);return e.createElement("div",{ref:bt,"aria-expanded":ot?"true":"false","aria-haspopup":O,"aria-controls":"rpv-core__popver-body-".concat(vt)},ct(At,ot),ot&&e.createElement(e.Fragment,null,j&&e.createElement(Bt,{closeOnEscape:q,onClose:At}),e.createElement(Lt,{ariaControlsSuffix:vt,closeOnClickOutside:V,offset:J,position:Y,targetRef:bt,onClose:At},Z(At))))},h.PrimaryButton=C,h.ProgressBar=function(l){var A=l.progress,O=e.useContext(a).direction===h.TextDirection.RightToLeft;return e.createElement("div",{className:u({"rpv-core__progress-bar":!0,"rpv-core__progress-bar--rtl":O})},e.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:"".concat(A,"%")}},A,"%"))},h.Separator=function(){return e.createElement("div",{className:"rpv-core__separator"})},h.Spinner=H,h.Splitter=function(l){var A=l.constrain,O=e.useContext(a).direction===h.TextDirection.RightToLeft,N=e.useRef(),V=e.useRef(),q=e.useRef(),Z=e.useRef(0),$=e.useRef(0),j=e.useRef(0),J=e.useRef(0),Y={capture:!0},ct=function(ot){var At=N.current,bt=V.current,vt=q.current;if(At&&bt&&vt){var Xt=J.current,xt=ot.clientX-Z.current,Ft=j.current+(O?-xt:xt),Nt=At.parentElement.getBoundingClientRect().width,Pt=100*Ft/Nt;if(At.classList.add("rpv-core__splitter--resizing"),A){var jt=Nt-Ft-Xt;if(!A({firstHalfPercentage:Pt,firstHalfSize:Ft,secondHalfPercentage:100*jt/Nt,secondHalfSize:jt}))return}bt.style.width="".concat(Pt,"%"),document.body.classList.add("rpv-core__splitter-body--resizing"),bt.classList.add("rpv-core__splitter-sibling--resizing"),vt.classList.add("rpv-core__splitter-sibling--resizing")}},lt=function(ot){var At=N.current,bt=V.current,vt=q.current;At&&bt&&vt&&(document.body.classList.remove("rpv-core__splitter-body--resizing"),At.classList.remove("rpv-core__splitter--resizing"),bt.classList.remove("rpv-core__splitter-sibling--resizing"),vt.classList.remove("rpv-core__splitter-sibling--resizing"),document.removeEventListener("mousemove",ct,Y),document.removeEventListener("mouseup",lt,Y))};return e.useEffect((function(){var ot=N.current;ot&&(J.current=ot.getBoundingClientRect().width,V.current=ot.previousElementSibling,q.current=ot.nextElementSibling)}),[]),e.createElement("div",{ref:N,className:"rpv-core__splitter",onMouseDown:function(ot){var At=V.current;At&&(Z.current=ot.clientX,$.current=ot.clientY,j.current=At.getBoundingClientRect().width,document.addEventListener("mousemove",ct,Y),document.addEventListener("mouseup",lt,Y))}})},h.TextBox=I,h.ThemeContext=a,h.Tooltip=function(l){var A=l.ariaControlsSuffix,O=l.content,N=l.offset,V=l.position,q=l.target,Z=k(!1),$=Z.opened,j=Z.toggle,J=e.useRef(),Y=e.useRef(),ct=e.useMemo((function(){return A||"".concat(P())}),[]);M((function(){J.current&&document.activeElement&&J.current.contains(document.activeElement)&&ot()}));var lt=function(){j(h.ToggleStatus.Open)},ot=function(){j(h.ToggleStatus.Close)};return e.createElement(e.Fragment,null,e.createElement("div",{ref:J,"aria-describedby":"rpv-core__tooltip-body-".concat(ct),onBlur:function(At){At.relatedTarget instanceof HTMLElement&&At.currentTarget.parentElement&&At.currentTarget.parentElement.contains(At.relatedTarget)?Y.current&&(Y.current.style.display="none"):ot()},onFocus:lt,onMouseEnter:lt,onMouseLeave:ot},q),$&&e.createElement($t,{ariaControlsSuffix:ct,contentRef:Y,offset:N,position:V,targetRef:J},O()))},h.Viewer=function(l){var A=l.characterMap,O=l.defaultScale,N=l.enableSmoothScroll,V=N===void 0||N,q=l.fileUrl,Z=l.httpHeaders,$=Z===void 0?{}:Z,j=l.initialPage,J=j===void 0?0:j,Y=l.pageLayout,ct=l.initialRotation,lt=ct===void 0?0:ct,ot=l.localization,At=l.plugins,bt=At===void 0?[]:At,vt=l.renderError,Xt=l.renderLoader,xt=l.renderPage,Ft=l.renderProtectedView,Nt=l.scrollMode,Pt=Nt===void 0?h.ScrollMode.Vertical:Nt,jt=l.setRenderRange,It=jt===void 0?Ni:jt,te=l.transformGetDocumentParams,Qt=l.theme,ee=Qt===void 0?{direction:h.TextDirection.LeftToRight,theme:"light"}:Qt,ie=l.viewMode,se=ie===void 0?h.ViewMode.SinglePage:ie,be=l.withCredentials,de=be!==void 0&&be,ye=l.onDocumentAskPassword,ge=l.onDocumentLoad,ve=ge===void 0?function(){}:ge,_e=l.onPageChange,me=_e===void 0?function(){}:_e,Me=l.onRotate,Ue=Me===void 0?function(){}:Me,je=l.onRotatePage,Pe=je===void 0?function(){}:je,Oe=l.onSwitchTheme,ze=Oe===void 0?function(){}:Oe,Dt=l.onZoom,Ot=Dt===void 0?function(){}:Dt,Tt=e.useState({data:q,name:typeof q=="string"?q:"",shouldLoad:!1}),kt=Tt[0],Rt=Tt[1],Ht=function(he,fe){Rt({data:fe,name:he,shouldLoad:!0})},Ut=e.useState(!1),Mt=Ut[0],wt=Ut[1],Vt=st(kt);e.useEffect((function(){var he,fe,we,oe;he=Vt.data,oe=typeof(fe=q),(we=typeof he)=="string"&&oe==="string"&&he===fe||we==="object"&&oe==="object"&&he.length===fe.length&&he.every((function(Xe,on){return Xe===fe[on]}))||Rt({data:q,name:typeof q=="string"?q:"",shouldLoad:Mt})}),[q,Mt]);var Kt=_({onVisibilityChanged:function(he){wt(he.isVisible),he.isVisible&&Rt((function(fe){return Object.assign({},fe,{shouldLoad:!0})}))}}),ue=typeof ee=="string"?{direction:h.TextDirection.LeftToRight,theme:ee}:ee,le=e.useState(ot||r),Re=le[0],Ie=le[1],qt={l10n:Re,setL10n:Ie},ke=Object.assign({},{direction:ue.direction},Di(ue.theme||"light",ze));return e.useEffect((function(){ot&&Ie(ot)}),[ot]),e.createElement(f.Provider,{value:qt},e.createElement(a.Provider,{value:ke},e.createElement("div",{ref:Kt,className:"rpv-core__viewer rpv-core__viewer--".concat(ke.currentTheme),"data-testid":"core__viewer",style:{height:"100%",width:"100%"}},kt.shouldLoad&&e.createElement(Ii,{characterMap:A,file:kt.data,httpHeaders:$,render:function(he){return e.createElement(Li,{defaultScale:O,doc:he,render:function(fe,we){return e.createElement(Fi,{currentFile:{data:kt.data,name:kt.name},defaultScale:O,doc:he,enableSmoothScroll:V,initialPage:J,initialRotation:lt,initialScale:we,pageLayout:Y,pageSizes:fe,plugins:bt,renderPage:xt,scrollMode:Pt,setRenderRange:It,viewMode:se,viewerState:{file:kt,fullScreenMode:h.FullScreenMode.Normal,pageIndex:-1,pageHeight:fe[0].pageHeight,pageWidth:fe[0].pageWidth,pagesRotation:new Map,rotation:lt,scale:we,scrollMode:Pt,viewMode:se},onDocumentLoad:ve,onOpenFile:Ht,onPageChange:me,onRotate:Ue,onRotatePage:Pe,onZoom:Ot})},scrollMode:Pt,viewMode:se})},renderError:vt,renderLoader:Xt,renderProtectedView:Ft,transformGetDocumentParams:te,withCredentials:de,onDocumentAskPassword:ye}))))},h.Worker=function(l){var A=l.children,O=l.workerUrl;return U.GlobalWorkerOptions.workerSrc=O,e.createElement(e.Fragment,null,A)},h.chunk=ne,h.classNames=u,h.createStore=function(l){var A=l||{},O={},N=function(q,Z){var $;A=n(n({},A),(($={})[q]=Z,$)),(O[q]||[]).forEach((function(j){return j(A[q])}))},V=function(q){return A[q]};return{subscribe:function(q,Z){O[q]=(O[q]||[]).concat(Z)},unsubscribe:function(q,Z){O[q]=(O[q]||[]).filter((function($){return $!==Z}))},update:function(q,Z){N(q,Z)},updateCurrentValue:function(q,Z){var $=V(q);$!==void 0&&N(q,Z($))},get:function(q){return V(q)}}},h.getDestination=cn,h.getPage=Ve,h.isFullScreenEnabled=et,h.isMac=function(){return typeof window<"u"&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},h.useDebounceCallback=pt,h.useIntersectionObserver=_,h.useIsMounted=yt,h.useIsomorphicLayoutEffect=i,h.usePrevious=st,h.useRenderQueue=d})(core_min)),core_min}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib.exports;hasRequiredLib=1;/**
 * A React component to view a PDF document
 *
 * @see https://react-pdf-viewer.dev
 * @license https://react-pdf-viewer.dev/license
 * @copyright 2019-2023 Nguyen Huu Phuoc <me@phuoc.ng>
 */return lib.exports=requireCore_min(),lib.exports}export{requireLib as a,getDefaultExportFromCjs as g,requireReact as r};
