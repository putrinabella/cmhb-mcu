import{u as l,a as u,s as i,j as s}from"./index-BIIL7VVf.js";import{l as c,A as p,F as d}from"./FormInput-AxLJgXeE.js";import{B as g}from"./button-BlcJd5pQ.js";import{E as h,P as k}from"./PasswordField-DXvScC_e.js";import"./pdfjs-DdtK18WL.js";import"./apiClient-C4E4e5VJ.js";import"./index-C0RmN517.js";import"./mail-D7BaMfYE.js";function f(){const n=l(),{login:t,setToken:a}=u();return{loginUser:async(r,m)=>{try{const e=await c(r,m);if(e.token){const o={id:e.user.id,email:e.user.email,token:e.token,name:e.user.name,position:e.user.position,department:e.user.department,phone_number:e.user.phone_number,role:"Company PIC",company:e.user.company_id?{id:e.user.company_id,name:e.user.company_name}:null};t(e.token,o),a(e.token),i({title:"Login Berhasil",text:"Selamat datang kembali!",icon:"success",timer:1e3,showConfirmButton:!1,onClose:()=>n("/")})}else console.warn("Token tidak ditemukan")}catch(e){let o=e?.meta?.message||e?.message||"Terjadi kesalahan";o=o.replace(/^Login Gagal\s*/,""),i({title:"Login Gagal",text:o,icon:"error"})}}}}function C(){const{loginUser:n}=f(),t=a=>n(a.email,a.password);return s.jsx(p,{title:"Login",subtitle:"Masukkan email dan kata sandi untuk masuk.",children:s.jsx(d,{defaultValues:{email:"nurcholis@gmail.com",password:"Nurcholis@12"},onSubmit:t,children:({control:a})=>s.jsxs("div",{className:"space-y-4",children:[s.jsx(h,{control:a}),s.jsx(k,{control:a}),s.jsx(g,{type:"submit",className:"w-full bg-primary text-primary-content hover:bg-primary-focus",children:"Masuk"})]})})})}export{C as default};
