import{g as R,r as t,j as e,b as U}from"./index-DhvCd668.js";import y from"./PdfViewer-D1MWGP8f.js";import{H as k,P as E,a as L,b as w,d as N}from"./Header-WzUi-GhU.js";import{H as v}from"./heart-plus-DcKgOhSx.js";import"./pdfjs-DdtK18WL.js";import"./download-CV7iDDkn.js";import"./apiClient-BmXS3_vS.js";import"./index-NIGUFBhG.js";function $(){const{examId:i}=R(),[a,p]=t.useState(null),[o,x]=t.useState(null),[c,b]=t.useState(null),n=t.useRef(null),[j,u]=t.useState(!0),[m,d]=t.useState(null);if(t.useEffect(()=>{if(!i){d("ID pemeriksaan tidak ditemukan"),u(!1);return}let r=!0;return(async()=>{try{const s=await L(i);if(!r)return;if(p(s.data),w(s.data.result)){const l=await N(s.data.result.id);if(!r){const h=URL.createObjectURL(l);URL.revokeObjectURL(h);return}x(l);const f=URL.createObjectURL(l);n.current=f,b(f)}}catch(s){console.error(s),r&&d("Gagal mengambil detail pemeriksaan")}finally{r&&u(!1)}})(),()=>{r=!1}},[i]),t.useEffect(()=>()=>{if(n.current){try{URL.revokeObjectURL(n.current)}catch{}n.current=null}},[]),j)return e.jsx(U,{});if(m)return e.jsx("div",{className:"p-6 text-error",children:m});if(!a)return e.jsx("div",{className:"p-6 text-error",children:"Data tidak ditemukan"});const g=`${a.company_employee.nik} - ${a.company_employee.name}.pdf`;return e.jsxs("div",{className:"bg-base-100 text-base-content p-6 space-y-6",children:[e.jsx(k,{greeting:"Hasil MCU",name:a.mcu_package,icon:v}),c&&o?e.jsx(y,{fileUrl:c,fileBlob:o,fileName:g}):e.jsx("div",{className:"bg-base-100 border-2 border-dashed border-primary/50 rounded-2xl p-6 shadow-md w-full",children:e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2 text-base-content",children:[e.jsx(E,{className:"w-6 h-6 text-primary"}),typeof a.result=="string"?a.result:"Belum ada hasil"]})})]})}export{$ as default};
