import{c as m,j as e,H as p,s as x}from"./index-DYAhuHJB.js";import{u as h,f as b,C as u,a as j}from"./use-examination-access-DpEG-ocF.js";import{g}from"./dateUtils-onPuWgd0.js";import{a as f}from"./employeeAPI-D3xaQJpT.js";import{F as y}from"./fingerprint-NNBMceVj.js";import{C as N}from"./calendar-CmWGJAzZ.js";import{P as k}from"./phone-wfJCnCBp.js";import"./pdfjs-DdtK18WL.js";import"./examinationsApi-Dyv80Zp2.js";import"./apiClient-BmXS3_vS.js";import"./index-NIGUFBhG.js";import"./genericApi-B1yEKLU8.js";/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],_=m("id-card",w);function T({examinations:n}){const l=n.map(s=>({id:s.id,isVisibleToEmployee:s.is_visible_to_employee===1||s.isVisibleToEmployee===1})),{accessState:r,toggleAccess:c,loadingIds:o}=h(l),d=async s=>{try{const t=await f(s),a=window.URL.createObjectURL(t);window.open(a,"_blank")}catch(t){console.error(t),x({icon:"error",title:"Gagal Import",text:"Gagal memuat hasil pemeriksaan"})}};return!n||n.length===0?e.jsx("p",{className:"p-4 text-center text-base-content",children:"Tidak ada data pemeriksaan."}):e.jsx("div",{className:"block md:hidden space-y-3 py-4",children:n.map((s,t)=>{const a=s.company_employee,i=typeof s.result=="object"&&s.result!==null&&"id"in s.result?s.result:null;return e.jsxs("div",{className:"rounded-2xl border border-base-300 shadow-sm bg-base-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-primary/20 px-3 py-2",children:[e.jsxs("h2",{className:"font-semibold text-base text-base-content",children:[t+1,". ",a?.name||"-"]}),e.jsxs("p",{className:"text-xs text-base-content/70 mt-0.5",children:[a?.gender||"-"," â€¢ ",a?.age_detail||"-"]})]}),e.jsxs("div",{className:"p-3 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center text-base-content",children:[e.jsx(y,{size:16,className:"mr-2 text-primary"}),e.jsxs("span",{children:["NIK: ",a?.nik||"-"]})]}),e.jsxs("div",{className:"flex items-center text-base-content",children:[e.jsx(_,{size:16,className:"mr-2 text-primary"}),e.jsxs("span",{children:["No Peg: ",a?.employee_number||"-"]})]}),e.jsxs("div",{className:"flex items-center text-base-content",children:[e.jsx(N,{size:16,className:"mr-2 text-primary"}),e.jsxs("span",{children:["Lahir:"," ",a?.dob?g(a.dob):"-"]})]}),e.jsxs("div",{className:"flex items-center text-base-content",children:[e.jsx(k,{size:16,className:"mr-2 text-primary"}),a?.phone_number?e.jsx("a",{href:b(a.phone_number),target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:a.phone_number}):e.jsx("span",{children:"-"})]}),e.jsx("hr",{className:"border-base-300"}),e.jsxs("div",{className:"flex items-start text-base-content",children:[e.jsx(p,{size:16,className:"mr-2 mt-0.5 text-primary flex-shrink-0"}),e.jsx("span",{className:`break-words leading-tight ${s.mcu_package?.name?"":"text-red-600 font-bold"}`,children:s.mcu_package?.name||"Paket MCU Belum Ditentukan"})]}),s.notes&&e.jsxs("p",{className:"text-xs italic text-base-content/70 ps-6",children:["Catatan: ",s.notes]}),e.jsx("div",{className:"mt-2",children:i?e.jsx("button",{className:"btn btn-sm w-full rounded-full text-base-content bg-primary/20",onClick:()=>d(i.id),children:"Lihat Hasil"}):e.jsx("button",{className:"btn btn-sm w-full rounded-full text-base-content bg-secondary/5",children:"Belum ada hasil"})}),e.jsx("div",{className:"mt-2",children:e.jsx("button",{className:`btn btn-sm flex items-center gap-2 w-full rounded-full text-base-content ${r[s.id]?"bg-primary/20":"bg-secondary/5"}`,disabled:o.has(s.id),onClick:()=>c(s.id),children:r[s.id]?e.jsxs(e.Fragment,{children:[e.jsx(u,{size:16})," Hasil dapat diakses pegawai"]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{size:16})," Hasil tidak dapat diakses pegawai"]})})})]})]},s.id)})})}export{T as default};
