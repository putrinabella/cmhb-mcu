import{r as c,b as j,j as e}from"./index-CtLpaF1e.js";import{a as u}from"./apiClient-BmXS3_vS.js";import"./index-NIGUFBhG.js";const x=async(t={})=>{const l=t.filters?Object.entries(t.filters).map(([d,o])=>`${encodeURIComponent(d)}=${encodeURIComponent(o)}`).join("&"):"",a=new URLSearchParams;return t.page&&a.append("page",String(t.page)),t.per_page&&a.append("per_page",String(t.per_page)),t.search&&a.append("search",t.search),t.sort_by&&a.append("sort_by",t.sort_by),t.sort_order&&a.append("sort_order",t.sort_order),l&&a.append("filters",l),u("get",`/companies?${a.toString()}`)};function S(){const[t,l]=c.useState([]),[a,d]=c.useState(!0),[o,m]=c.useState(null),[r,p]=c.useState(1),[b,g]=j(),n=Number(b.get("page")||1);c.useEffect(()=>{(async()=>{try{d(!0);const i=await x({page:n,per_page:10,sort_by:"name",sort_order:"asc"});l(i.data.data),p(i.data.last_page)}catch(i){m(i.message||"Terjadi kesalahan")}finally{d(!1)}})()},[n]);const h=s=>{s>=1&&s<=r&&g({page:String(s)})};return e.jsxs("div",{className:"p-8 mx-auto min-h-screen bg-base-100 text-base-content",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Daftar Perusahaan"}),a&&e.jsx("p",{children:"Memuat data..."}),o&&e.jsx("p",{className:"text-red-500",children:o}),!a&&!o&&e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"space-y-2 mb-6",children:t.map(s=>e.jsxs("li",{className:"p-4 border rounded-lg shadow-sm bg-base-200",children:[e.jsx("h2",{className:"font-semibold",children:s.name}),e.jsxs("p",{children:["Kode: ",s.code]}),e.jsxs("p",{children:["Alamat: ",s.address]}),e.jsxs("p",{children:["Telp: ",s.phone]}),e.jsxs("p",{children:["Email: ",s.email]})]},s.id))}),e.jsxs("div",{className:"join",children:[e.jsx("button",{className:"join-item btn",onClick:()=>h(n-1),disabled:n===1,children:"«"}),Array.from({length:r},(s,i)=>i+1).slice(0,5).map(s=>e.jsx("button",{className:`join-item btn ${s===n?"btn-active":""}`,onClick:()=>h(s),children:s},s)),r>5&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"join-item btn btn-disabled",children:"..."}),e.jsx("button",{className:`join-item btn ${r===n?"btn-active":""}`,onClick:()=>h(r),children:r})]}),e.jsx("button",{className:"join-item btn",onClick:()=>h(n+1),disabled:n===r,children:"»"})]})]})]})}export{S as default};
