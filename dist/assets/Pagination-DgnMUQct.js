import{r as f,j as s}from"./index-qf8s-zRF.js";function p({queryFn:t,params:a}){const[o,i]=f.useState(null),[r,u]=f.useState(!1),[x,n]=f.useState(null),c=f.useRef({}),e=async(l=!1,b)=>{u(!0),n(null);const d=b??a,j=JSON.stringify(d);if(!l&&c.current[j]){i(c.current[j]),u(!1);return}try{const h=await t(d);c.current[j]=h,i(h)}catch(h){n(h.message??"Unknown error")}finally{u(!1)}};return f.useEffect(()=>{e()},[]),{data:o,loading:r,error:x,refetch:e,invalidateCache:()=>{c.current={},i(null)},invalidateCacheFor:l=>{const b=JSON.stringify(l);Object.keys(c.current).forEach(d=>{d.includes(b)&&delete c.current[d]})}}}function N({queryFn:t,defaultParams:a}){const[o,i]=f.useState(1),[r,u]=f.useState(""),x={...a,page:o,search:r},{data:n,loading:c,error:e,refetch:l,invalidateCache:b}=p({queryFn:t,params:x}),d=m=>{m>=1&&m<=(n?.last_page??1)&&(i(m),l(!0,{...a,page:m,search:r}))},j=m=>{i(1),u(m),l(!0,{...a,page:1,search:m})},h=()=>{i(1),u(""),l(!0,{...a,page:1,search:""})};return{data:n?.data??[],total:n?.total??0,loading:c,error:e,lastPage:n?.last_page??1,page:o,search:r,handlePageChange:d,handleSearch:j,resetSearch:h,refetch:l,invalidateCache:b}}function S({page:t,lastPage:a,onPageChange:o,perPage:i=10,total:r=0}){if(a<=1)return s.jsx("p",{className:"text-sm text-gray-500 mt-6"});const u=r===0?0:(t-1)*i+1,x=r===0?0:Math.min(t*i,r),n=[],c=2;for(let e=1;e<=a;e++)e===1||e===a||e>=t-c&&e<=t+c?n.push(e):n[n.length-1]!=="..."&&n.push("...");return s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mt-6",children:[s.jsx("p",{className:"text-sm text-gray-500",children:r===0?s.jsx(s.Fragment,{children:"Menampilkan 0 data"}):s.jsxs(s.Fragment,{children:["Menampilkan ",s.jsx("span",{className:"font-medium",children:u})," sampai"," ",s.jsx("span",{className:"font-medium",children:x})," dari"," ",s.jsx("span",{className:"font-medium",children:r})," data"]})}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("button",{onClick:()=>o(t-1),disabled:t===1,className:`btn btn-sm ${t===1?"btn-disabled":"btn-outline"}`,children:"«"}),n.map((e,l)=>e==="..."?s.jsx("span",{className:"btn btn-sm btn-outline cursor-default",children:"..."},`ellipsis-${l}`):s.jsx("button",{onClick:()=>o(e),className:`btn btn-sm ${e===t?"btn-primary":"btn-outline"}`,children:e},e)),s.jsx("button",{onClick:()=>o(t+1),disabled:t===a,className:`btn btn-sm ${t===a?"btn-disabled":"btn-outline"}`,children:"»"})]})]})}export{S as P,N as u};
