import{u as l,a as u,s as o,j as s,L as c}from"./index-BfdL3V75.js";import{l as p,A as d,F as g}from"./authService-DbaaLMq6.js";import{B as k}from"./button-Dyz-buuH.js";import{E as h}from"./EmailField-BYEZ1Su1.js";import{P as x}from"./PasswordField-4w-URT0F.js";import"./pdfjs-BzSgQdvw.js";import"./apiClient-BmXS3_vS.js";import"./index-NIGUFBhG.js";import"./mail-D_vBmMem.js";function f(){const n=l(),{login:i,setToken:a}=u();return{loginUser:async(r,m)=>{try{const e=await p(r,m);if(e.token){const t={id:e.user.id,email:e.user.email,token:e.token,name:e.user.name,position:e.user.position,department:e.user.department,phone_number:e.user.phone_number,company:e.user.company_id?{id:e.user.company_id,name:e.user.company_name}:null};i(e.token,t),a(e.token),o({title:"Login Berhasil",text:"Selamat datang kembali!",icon:"success",timer:1e3,showConfirmButton:!1,onClose:()=>n("/")})}else console.warn("Token tidak ditemukan")}catch(e){let t=e?.meta?.message||e?.message||"Terjadi kesalahan";t=t.replace(/^Login Gagal\s*/,""),o({title:"Login Gagal",text:t,icon:"error"})}}}}function S(){const{loginUser:n}=f(),i=a=>n(a.email,a.password);return s.jsxs(d,{title:"Login",subtitle:"Masukkan email dan kata sandi untuk masuk.",children:[s.jsx(g,{defaultValues:{email:"testingpic@gmail.com",password:"Testingpic@12"},onSubmit:i,children:({control:a})=>s.jsxs("div",{className:"space-y-4",children:[s.jsx(h,{control:a}),s.jsx(x,{control:a}),s.jsx(k,{type:"submit",className:"w-full bg-primary text-primary-content hover:bg-primary-focus",children:"Masuk"})]})}),s.jsxs("p",{className:"text-sm text-center mt-4 text-base-content/70",children:["Belum punya akun?"," ",s.jsx(c,{to:"/register",className:"text-primary hover:underline",children:"Daftar di sini"})]})]})}export{S as default};
