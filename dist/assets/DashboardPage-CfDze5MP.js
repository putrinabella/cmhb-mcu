import{c as u,r as c,j as e,b as m,u as g,a as h}from"./index-qf8s-zRF.js";import{f as b,g as f,a as y}from"./dateUtils-onPuWgd0.js";import{u as j,P as N}from"./Pagination-DgnMUQct.js";import{g as v,i as w,H as P,P as p}from"./Header-Bivhslf2.js";import{L as C}from"./List-CsrtqNSy.js";import{H as k}from"./heart-plus-DtCMscJ4.js";import{F as H}from"./folder-TRIvH1lD.js";import"./pdfjs-BzSgQdvw.js";import"./apiClient-BmXS3_vS.js";import"./index-NIGUFBhG.js";import"./genericApi-B1yEKLU8.js";/**
 * @license lucide-react v0.541.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],I=u("activity",E);function _({fetchData:a,emptyMessage:n="Tidak ada riwayat",onItemClick:o}){const[r,t]=c.useState([]),[s,d]=c.useState(!0);return c.useEffect(()=>{(async()=>{try{const l=await a();t(l)}catch(l){console.error("Failed to load history:",l)}finally{d(!1)}})()},[a]),s?e.jsx(m,{}):e.jsx(C,{items:r,emptyMessage:n,onItemClick:o})}function L(){const a=g(),n=async()=>{const r=(await v()).data.batches;return console.log(r),r.filter(t=>typeof t.examination=="object").map(t=>{const s=t.examination;return{id:s.id,title:s.mcu_package||"MCU Event",timestamp:b(t.exam_date),icon:e.jsx(k,{size:20}),titleClassName:s.mcu_package==="Paket Belum Ditentukan"?"text-red-500":"",badge:w(s.result)?e.jsx("span",{className:"badge bg-primary/20 text-base-content text-xs p-0",children:"Hasil tersedia"}):void 0}})};return e.jsx(_,{fetchData:n,emptyMessage:"Belum ada riwayat MCU",onItemClick:o=>a(`/examinations/${o.id}`)})}function q(){const{user:a}=h(),n=g(),{data:o,loading:r,error:t,page:s,lastPage:d,total:x,handlePageChange:l}=j({queryFn:y,defaultParams:{}});return a?e.jsxs("div",{className:"bg-base-100 text-base-content p-6 space-y-6",children:[e.jsx(P,{greeting:"Selamat Datang,",name:a.name,icon:I}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6",children:[a.role==="Company PIC"&&e.jsxs("div",{className:"bg-base-100 border-2 border-dashed border-primary/50 rounded-2xl p-6 shadow-md w-full",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2 text-base-content",children:[e.jsx(p,{className:"w-6 h-6 text-primary"}),"Batch MCU"]}),r&&e.jsx(m,{}),t&&e.jsx("p",{className:"text-error text-center",children:t}),!r&&!t&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:o.map(i=>e.jsxs("div",{className:"group flex flex-col items-center justify-center p-4 rounded-xl cursor-pointer bg-base-100 hover:bg-primary hover:text-primary-content shadow-sm transition-all duration-200 tooltip tooltip-bottom","data-tip":`${f(i.exam_date)} | ${i.location}`,onClick:()=>n(`/dashboard/batch/${i.id}`),children:[e.jsx(H,{className:"w-12 h-12 text-yellow-400 group-hover:text-yellow-100 transition-colors"}),e.jsx("span",{className:"mt-2 text-sm text-center font-medium truncate w-full transition-colors",title:i.batch_code,children:i.batch_code})]},i.id))}),e.jsx(N,{page:s,lastPage:d,onPageChange:l,total:x})]}),a.role==="Employee"&&e.jsxs("div",{className:"bg-base-100 border-2 border-dashed border-primary/50 rounded-2xl p-6 shadow-md w-full",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2 text-base-content",children:[e.jsx(p,{className:"w-6 h-6 text-primary"}),"Medical Check-Up"]}),e.jsx(L,{})]}),a.role!=="Company PIC"&&a.role!=="Employee"&&e.jsx("div",{className:"bg-error/10 border-2 border-dashed border-error rounded-2xl p-6 shadow-md w-full text-center",children:e.jsx("h2",{className:"text-xl font-semibold text-error",children:"Anda tidak memiliki akses"})})]})]}):e.jsx(m,{})}export{q as default};
