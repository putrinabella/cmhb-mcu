import{j as e,s as m}from"./index-DhvCd668.js";import{u as x,f as b,C as p,a as j}from"./use-examination-access-SJnjCaFi.js";import{g as u}from"./dateUtils-onPuWgd0.js";import{a as g}from"./employeeAPI-DySHOSmq.js";import"./pdfjs-DdtK18WL.js";import"./examinationsApi-Dyv80Zp2.js";import"./apiClient-BmXS3_vS.js";import"./index-NIGUFBhG.js";import"./genericApi-B1yEKLU8.js";function E({examinations:a}){console.log("Isi examinations:",a);const c=async t=>{try{const n=await g(t),s=window.URL.createObjectURL(n);window.open(s,"_blank")}catch{m({title:"Gagal",text:"Gagal memuat hasil pemeriksaan.",icon:"error"})}},i=a.map(t=>({id:t.id,isVisibleToEmployee:t.is_visible_to_employee===1||t.isVisibleToEmployee===1})),{accessState:l,toggleAccess:d,loadingIds:o}=x(i);return!a||a.length===0?e.jsx("p",{className:"p-4 text-center text-base-content",children:"Tidak ada data pemeriksaan."}):e.jsx("div",{className:"hidden md:block max-h-[56vh] overflow-y-auto",children:e.jsxs("table",{className:"table w-full",children:[e.jsx("thead",{className:"bg-primary/20 backdrop-blur-3xl text-base-content sticky top-0 z-10",children:e.jsxs("tr",{className:"text-center align-middle",children:[e.jsx("th",{children:"No"}),e.jsx("th",{className:"max-w-[200px]",children:"Paket MCU"}),e.jsx("th",{children:"Nomor Pegawai"}),e.jsx("th",{children:"NIK"}),e.jsx("th",{children:"Nama"}),e.jsx("th",{children:"Gender"}),e.jsx("th",{children:"Tanggal Lahir"}),e.jsx("th",{children:"Kontak"}),e.jsx("th",{children:"Hasil"}),e.jsx("th",{children:"Hak Akses"})]})}),e.jsx("tbody",{className:"align-middle",children:a.map((t,n)=>{const s=t.company_employee,h=typeof t.mcu_package=="string"?t.mcu_package:t.mcu_package?.name||"-",r=typeof t.result=="object"&&t.result!==null&&"id"in t.result?t.result:null;return e.jsxs("tr",{className:"hover:bg-base-200",children:[e.jsx("td",{className:"text-center",children:n+1}),e.jsxs("td",{className:"max-w-[200px]",children:[h,t.notes&&e.jsxs("div",{className:"text-xs text-base-content/70 mt-1",children:["Catatan: ",t.notes]})]}),e.jsx("td",{className:"text-center",children:s?.employee_number||"-"}),e.jsx("td",{className:"text-center",children:s?.nik||"-"}),e.jsx("td",{children:s?.name||"-"}),e.jsx("td",{className:"text-center",children:s?.gender||"-"}),e.jsxs("td",{className:"text-center",children:[s?.dob?u(s.dob):"-",e.jsx("br",{}),e.jsx("small",{children:s?.age_detail||""})]}),e.jsx("td",{className:"text-center",children:s?.phone_number?e.jsx("a",{href:b(s.phone_number),target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:s.phone_number}):"-"}),e.jsx("td",{className:"text-center",children:r?e.jsx("button",{className:"btn btn-sm rounded-full w-full text-base-content bg-primary/20",onClick:()=>c(r.id),children:"Lihat Hasil"}):e.jsx("button",{className:"btn btn-sm rounded-full w-full text-base-content bg-secondary/5",children:"Belum ada hasil"})}),e.jsx("td",{className:"text-center",children:e.jsx("button",{className:`btn btn-sm flex items-center gap-2 rounded-full w-full text-base-content ${l[t.id]?"bg-primary/20":"bg-secondary/5"}`,disabled:o.has(t.id),onClick:()=>d(t.id),children:l[t.id]?e.jsxs(e.Fragment,{children:[e.jsx(p,{size:16})," Aktif"]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{size:16})," Nonaktif"]})})})]},t.id)})})]})})}export{E as default};
